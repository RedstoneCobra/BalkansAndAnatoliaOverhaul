namespace = dg_setup

#################################################
# Religious System Setup and Maintenance Events #
#################################################

#ID Range: 59 General Religion + 10 Conversion + xx
#COMPATIBILITY: culture, culture_group, province_id

#01 - The True Faith
#03 - A new $MONARCHTITLE$
#04 - A meeting with the Pope (history setup)
#05 - $MONARCH$'s divine inspiration

country_event = { #The True Faith
	
	###Calculating the province religion population (21 - minorities)
	
	id = dg_setup.001
	title = dg_setup.001.t #The True Faith
	desc = dg_setup.001.d
	picture = world_religions
	
	is_triggered_only = yes
	hidden = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = { 1825 = { is_empty = yes } } #playing MEIOU map (1825 = uncolonized island)
				set_global_flag = dei_gratia_for_meiou
			}
			#Compatibility with CK2
			every_country = {
				dg_remove_non_meiou = yes
			}
			every_province = {
				dg_remove_non_meiou = yes
			}
			###STARTING CHURCH PROPERTY
			every_country = {
				set_variable = { which = church_property value = 7 }
				#Before 900 AD, 31% of Italy and Southern France, 35% of Germany, 44% of Northern France owned by the Church
				#By the 11th century, 30-40% of cultivated land in Western Europe owned by the Church
				#21% of Sweden owned by the Church in 1527
				#17% of the population lived on Church estates in 19th century Poland (19% Crown, 64% Nobility)
				if = {
					limit = { government = republic }
					change_variable = { which = church_property value = -2 }
				}
				if = {
					limit = { is_tribal = yes }
					change_variable = { which = church_property value = -2 }
				}
				if = {
					limit = { is_colonial_nation = yes }
					change_variable = { which = church_property value = 2 }
				}
				if = {
					limit = {
						is_colonial_nation = yes
						any_country = { overlord_of = ROOT has_country_flag = patronato_real }
					}
					change_variable = { which = church_property value = 2 }
				}
				if = {
					limit = {
						#Disorganized religions
						OR = {
							religion_group = pagan
							religion_group = european_pagan
							religion_group = new_world_pagan
							AND = {
								religion = coptic
								NOT = { has_country_flag = miaphysite_monasteries_incorporated }
							}
							religion = confucianism
						}
						NOT = { religion = inti }
						NOT = { religion = nahuatl }
						NOT = { has_country_modifier = organized_religion_clerical_requirements }
					}
					change_variable = { which = church_property value = -2 }
				}
			}
			###Defining bishoprics, archbishoprics, metropolitans and centers of pilgrimage
			##HOLY LANDS
			379 = {
				owner = {
					if = {
						limit = {
							OR = {
								religion_group = jewish_group
								religion = orthodox
								religion = coptic
								religion = catholic
								religion = chaldean
								religion = hussite
								religion = gnostic
								religion = sunni
								religion = shiite
								religion = wahhabi
								religion = ibadi
							}
						}
						set_country_flag = holy_land_jerusalem
					}
				}
			}
			2530 = {
				owner = {
					if = {
						limit = {
							OR = {
								religion = catholic
								religion = orthodox
							}
						}
						set_country_flag = holy_land_rome
					}
				}
				save_global_event_target_as = the_vatican
				save_global_event_target_as = catholic_crusade_goal
			}
			1402 = {
				owner = {
					if = {
						limit = { religion = orthodox }
						set_country_flag = holy_land_constantinople
					}
				}
			}
			358 = {
				owner = {
					if = {
						limit = {
							OR = {
								religion = orthodox
								religion = coptic
							}
						}
						set_country_flag = holy_land_alexandria
					}
				}
			}
			332 = {
				owner = {
					if = {
						limit = {
							OR = {
								religion = orthodox
								religion = coptic
							}
						}
						set_country_flag = holy_land_antioch
					}
				}
			}
			410 = {
				owner = {
					if = {
						limit = { religion = chaldean }
						set_country_flag = holy_land_ctesiphon
					}
				}
			}
			1330 = {
				owner = {
					if = {
						limit = { religion = shiite }
						set_country_flag = holy_land_al_najaf
					}
				}
			}
			385 = {
				owner = {
					if = {
						limit = {
							OR = {
								religion = sunni
								religion = shiite
								religion = ibadi
								religion = wahhabi
							}
						}
						set_country_flag = holy_land_mecca
					}
				}
			}
			384 = {
				owner = {
					if = {
						limit = {
							OR = {
								religion = sunni
								religion = shiite
								religion = ibadi
								religion = wahhabi
							}
						}
						set_country_flag = holy_land_medina
					}
				}
			}
			41 = {
				owner = {
					if = {
						limit = { religion = baltic_pagan_reformed }
						set_country_flag = holy_land_balga
					}
				}
			}
			2632 = {
				owner = {
					if = {
						limit = {
							OR = {
								religion = jain
								religion = hinduism
								religion = buddhism
							}
						}
						set_country_flag = holy_land_varanasi
					}
				}
			}
			random_country = {
				limit = {
					religion = sikhism
					any_owned_province = { has_province_flag = amritsar }
				}
				set_country_flag = holy_land_amritsar
			}
			#HINDUISM
			every_province = { #The holiest city
				limit = {
					province_id = 2632 #Varanasi
				}
				set_province_flag = hinduism_holy_land
				set_province_flag = hindu_pilgrimage
			}
			every_province = { #The 'four drops' of Hinduism
				limit = {
					OR = {
						province_id = 2557 #Allahabad (Awadh)
						province_id = 2701 #Haridiwar (Garhwal)
						province_id = 3146 #Nasik
						province_id = 526 #Ujjain
					}
				}
				set_province_flag = hinduism_four_drops
				set_province_flag = hinduism_holy_land
				set_province_flag = hindu_pilgrimage
			}
			every_province = { #The 'four seats' of Hinduism
				limit = {
					OR = {
						province_id = 3158 #Rameswaram (Arrupalutai)
						province_id = 2713 #Dwarka (Halar)
						province_id = 2701 #Badrinath (Garhwal)
						province_id = 560 #Puri (Katak)
					}
				}
				set_province_flag = hinduism_four_seats
				set_province_flag = hinduism_holy_land
				set_province_flag = hindu_pilgrimage
			}
			every_province = {
				limit = {
					province_id = 4075 #Marrakesh
					owner = { religion_group = muslim }
				}
				add_province_modifier = { name = sufi_shrine duration = -1 }
			}
			every_province = { #Catholic archbishoprics
				limit = {
					OR = { #Archbishopric (Province name, if different)
						#PORTUGAL
						province_id = 230 #Lisboa (Vale do Tejo e Sado)
						province_id = 1423 #Evora (Alto Alenteho)
						province_id = 232 #Braga (Braganca)
						#SPAIN
						province_id = 206 #Santiago
						province_id = 181 #Tarragona
						province_id = 214 #Saragossa (Zaragoza)
						province_id = 2312 #Toledo
						province_id = 223 #Granada (Gharnata)
						province_id = 2311 #Seville
						province_id = 198 #Burgos
						province_id = 220 #Valencia
						#FRANCE
						province_id = 167 #Rouen (Caux)
						province_id = 1335 #Sens (Brye)
						province_id = 186 #Reims (Argonne)
						province_id = 976 #Lyons (Liyonnes)
						province_id = 204 #Vienne (Vionnays)
						province_id = 201 #Aix/Arles/Embrun (Provenca)
						province_id = 193 #Besancon (Besancon)
						province_id = 205 #Terantaise (Savoy)
						province_id = 3861 #Narbonne (Narbonne)
						province_id = 176 #Bordeaux (Guiana)
						province_id = 175 #Auch (Armagnhac)
						province_id = 195 #Tours (Tourraine)
						province_id = 391 #Bourges (Berry)
						province_id = 196 #Toulouse (Toulouse)
						AND = {
							province_id = 202 #Avignon (Veneisi)
							is_year = 1475
						}
						AND = {
							province_id = 183 #Paris
							is_year = 1622
						}
						#NORTHERN ITALY
						province_id = 101 #Genoa (Liguria)
						province_id = 104 #Milan (Lumbardia)
						province_id = 3867 #Ravenna (Rumagna)
						province_id = 112 #Venice (Venexia)
						province_id = 111 #Aquileia (Friul)
						province_id = 1380 #Pisa
						province_id = 116 #Florence (Florenza)
						AND = {
							province_id = 117 #Siena
							is_year = 1459
						}
						AND = {
							province_id = 315 #Turin (Piemonte)
							is_year = 1515
						}
						AND = {
							province_id = 132 #Bologna (Emilia)
							is_year = 1582
						}
						AND = {
							province_id = 3702 #Fermo (Marco Firmana)
							is_year = 1589
						}
						AND = {
							province_id = 1355 #Gorz
							is_year = 1751
						}
						#Rome is a patriarchate
						#SOUTHERN ITALY
						province_id = 2562 #Capua (Cajeta)
						province_id = 2531 #Naples/Sorrento/Amalfi (Napoli)
						province_id = 2532 #Salerno (Salierno)
						province_id = 2533 #Bari/Trani/Nazareth/Siponto (Bari)
						province_id = 1285 #Brindisi/Otranto (Salentu)
						province_id = 3870 #Taranto
						province_id = 120 #Acerenza/Gonza (Basilcata) #
						province_id = 2534 #Cosenza/Rossano (Cusenza)
						province_id = 123 #Reggio/S.Severina (Calabria)
						province_id = 124 #Messina/Monreale (Messina)
						province_id = 125 #Palermo
						province_id = 127 #Torres (Sassari)
						province_id = 2242 #Cagliari (Casteddu)
						province_id = 2241 #Oristano (Aristanis)
						province_id = 2856 #Bari
						province_id = 121 #Benevento (Irpinia)
						AND = {
							province_id = 2857 #Chieti (Abruzzo Citra)
							is_year = 1526
						}
						AND = {
							province_id = 1413 #Syracuse
							is_year = 1744
						}
						#IRELAND
						province_id = 372 #Armagh (Ulster)
						province_id = 373 #Dublin (Meath)
						province_id = 374 #Cashel (Leinster)
						province_id = 376 #Tuam (Connacht)
						#BRITAIN
						province_id = 235 #Canterbury (Kent)
						province_id = 245 #York (Yorkshire)
						province_id = 249 #Glasgow (Ayrshire)
						province_id = 251 #St. Andrews (Athall)
						#THE NETHERLANDS
						AND = {
							OR = {
								province_id = 98 #Utrecht
								province_id = 92 #Brussels
								province_id = 2353 #Kimbresis
							}
							is_year = 1559 #Papal Bull 'Super Universas'
						}
						#GERMANY
						province_id = 1350 #Magdeburg (Magdeburg)
						province_id = 76 #Salzburg
						province_id = 1368 #Cologne (Kurkoln - not the neighbouring free city of Cologne, but the seat of the archbishop and elector)
						province_id = 54 #Bremen (Weser - owned by the archbishopric of Bremen)
						province_id = 1363 #Treves (Kurtrier)
						province_id = 2756 #Mayence (Mainz)
						AND = {
							province_id = 268 #Prague (Praha)
							is_year = 1344
						}
						AND = {
							province_id = 774 #Vienna (Ostmark)
							is_year = 1469
						}
						AND = {
							province_id = 84 #Olomouc (Olomocko)
							is_year = 1777
						}
						AND = {
							province_id = 974 #Bamberg (Tahtlan)
							is_year = 1818
						}
						#SCANDINAVIA
						province_id = 1 #Uppsala (Uppland)
						province_id = 6 #Lund (Skane)
						#BALTICS
						province_id = 38 #Riga
						#POLAND
						province_id = 3756 #Gnesen (Gniezno)
						AND = {
							province_id = 256 #Warsaw (Mazowieckie)
							is_year = 1813
						}
						AND = {
							province_id = 2401 #Poznan (Poznanski)
							is_year = 1821
						}
						#HUNGARY
						province_id = 133 #Gran (Buda)
						province_id = 1270 #Kalocza (Bacska)
						#BALKANS
						province_id = 136 #Spalato (Spalatro)
						province_id = 2571 #Zara (Jadera)
						province_id = 137 #Ragusa
						province_id = 138 #Cattaro (Kotor)
						province_id = 2373 #Durazzo (Durres) - potential
						province_id = 2237 #Antivari/Bar(Cetinje) - potential
						province_id = 157 #Tarnovo (Lodogario) - potential
						#GREECE
						province_id = 146 #Athens (Attica) - potential
						province_id = 1401 #Ohrid (Makedonia) - potential
						#RUSSIA
						province_id = 280 #Kiev (Kyiv) - potential
						province_id = 295 #Moscow (Moskva) - potential
						AND = {
							province_id = 1393 #Minsk - potential
							is_year = 1798
						}
						#ANATOLIA
						AND = {
							province_id = 1325 #Smyrna (Ionia) - potential
							is_year = 1818
						}
						#INDIA
						AND = {
							province_id = 531 #Goa - potential
							is_year = 1533
						}
						#NEW WORLD
						AND = {
							OR = {
								province_id = 490 #Santo Domingo (Barahonas)
								province_id = 816 #Lima
								province_id = 1471 #Mexico City
							}
							is_year = 1546
						}
						AND = {
							province_id = 2178 #Baltimore - potential
							is_year = 1808
						}
						AND = {
							province_id = 993 #Quebec City (Stadacona)
							is_year = 1819
						}
					}
				}
				set_province_flag = catholic_archbishopric
			}
			every_province = { #Catholic prelates
				limit = {
					OR = {
						province_id = 6 #Lund (Skane)
						province_id = 1350 #Magdeburg
						province_id = 2756 #Mainz
						province_id = 80 #Trier
						province_id = 112 #Venice
						province_id = 2530 #Rome (Roma)
						province_id = 125 #Palermo (Palermu)
						province_id = 2242 #Cagliari (Casteddu)
						AND = {
							province_id = 1335 #Sens (Brye)
							NOT = { owned_by = FRA }
						}
						province_id = 976 #Lyons (Liyonnes)
						province_id = 232 #Braga (Braganca)
						province_id = 235 #Canterbury (Kent)
						province_id = 251 #St. Andrews (Athall)
						province_id = 3756 #Gnesen (Kaliskie)
						province_id = 268 #Prague (Praha)
						province_id = 372 #Armagh (Ulster)
						AND = {
							is_year = 1560
							province_id = 92 #Brussels
						}
						AND = {
							is_year = 1716
							province_id = 230 #Lisboa (Vale do Tejo e Sado)
						}
					}
					religion = catholic
				}
				add_province_modifier = { name = catholic_prelate duration = -1 }
			}
			every_province = { #Catholic patriarchates
				limit = {
					OR = {
						province_id = 2530 #Rome (Roma)
						province_id = 1402 #Constantinople
						province_id = 358 #Alexandria
						province_id = 332 #Antioch (Aleppo)
						province_id = 379 #Jerusalem (Judea)
						AND = {
							province_id = 1355 #Grado (Gorz)
							NOT = { is_year = 1451 }
						}
						AND = {
							province_id = 111 #Aquiela (Friuz)
							NOT = { is_year = 1751 }
						}
						AND = {
							province_id = 112 #Grado is merged with Venice and moved there
							is_year = 1451
						}
						AND = {
							province_id = 223 #West Indies (Granada, yes I know that's not in the West Indies)
							is_year = 1524
							NOT = { is_year = 1602 }
						}
						AND = {
							province_id = 230 #Lisboa (Vale do Tejo e Sado)
							is_year = 1716
						}
						AND = {
							province_id = 531 #East Indies (Goa)
							is_year = 1886
						}
					}
				}
				set_province_flag = catholic_patriarchate
			}
			#Christian relics
			every_province = { #Minor
				limit = {
					OR = {
						#Nails
						province_id = 2530 #Rome
						province_id = 112 #Venice
						province_id = 4009 #Aachen
						province_id = 182 #Escurial (Caceres)
						province_id = 81 #Nuremburg
						province_id = 268 #Prague
						#Swaddling Clothes
						province_id = 137 #Dubrovnik
						#Gifts of the Magi
						province_id = 147 #Mount Athos
					}
				}
				change_variable = { which = christian_relics value = 1 }
			}
			every_province = { #Minor
				limit = {
					OR = {
						#Fragments
						province_id = 2530 #Rome
						province_id = 183 #Paris
						province_id = 1380 #Pisa
						province_id = 116 #Florence
						province_id = 147 #Mount Athos
						province_id = 92 #Brussels
						province_id = 112 #Venice
						province_id = 2363 #Ghent
						province_id = 1409 #Cantabria
					}
				}
				change_variable = { which = christian_relics value = 1 }
			}
			every_province = { #Significant
				limit = {
					OR = {
						#Bloodstained cloth
						province_id = 207 #Oviedo (Asturias)
						#Mandylion
						province_id = 2530 #Rome
						province_id = 101 #Genoa
						#Vial of Christ's Blood
						province_id = 90 #Bruges
						#Holy Coat
						province_id = 183 #Paris
						province_id = 1363 #Trier
					}
				}
				change_variable = { which = christian_relics value = 2 }
			}
			every_province = { #Significant
				limit = {
					OR = {
						#Large fragment of the True Cross
						province_id = 183 #Paris
						#Poitiers
						province_id = 2530 #Rome
					}
				}
				change_variable = { which = christian_relics value = 2 }
			}
			every_province = { #Significant
				limit = {
					OR = {
						#Holy Sponge
						province_id = 2530 #Rome
					}
				}
				change_variable = { which = christian_relics value = 2 }
			}
			every_province = { #Unique
				limit = {
					OR = {
						#Shroud of Turin
						province_id = 2354 #Aube (Champagne)
						#Holy Grail
						province_id = 379 #Jerusalem
						province_id = 101 #Genoa
						province_id = 220 #Valencia
						province_id = 332 #Antioch
						#Crown of Thorns
						province_id = 183 #Paris
					}
				}
				change_variable = { which = christian_relics value = 3 }
			}
			2530 = {
				set_province_flag = catholic_holy_land
				every_neighbor_province = { set_province_flag = catholic_holy_land }
			}
			#Orthodox Patriarchates
			332 = {
				set_province_flag = orthodox_patriarchate_of_antioch
				set_province_flag = orthodox_holy_land
			}
			if = {
				limit = { NOT = { is_year = 1342 } }
				332 = {
					set_province_flag = orthodox_patriarch_of_antioch
					set_province_flag = orthodox_patriarchate
					set_province_flag = orthodox_pentarchy
				}
			}
			if = {
				limit = { is_year = 1342 } #Ignatius II moves to Damascus
				382 = {
					set_province_flag = orthodox_patriarch_of_antioch
					set_province_flag = orthodox_patriarchate
					set_province_flag = orthodox_pentarchy
				}
			}
			2530 = {
				set_province_flag = orthodox_patriarchate_of_rome
				set_province_flag = orthodox_holy_land
			}
			2530 = {
				set_province_flag = orthodox_patriarch_of_rome
				set_province_flag = orthodox_patriarchate
				set_province_flag = orthodox_pentarchy
				#Not an active patriarchate
			}
			1402 = {
				set_province_flag = orthodox_patriarchate_of_constantinople
				set_province_flag = orthodox_holy_land
			}
			1402 = {
				set_province_flag = orthodox_patriarch_of_constantinople
				set_province_flag = orthodox_patriarchate
				set_province_flag = orthodox_pentarchy
			}
			358 = {
				set_province_flag = orthodox_patriarchate_of_alexandria
				set_province_flag = orthodox_holy_land
			}
			358 = {
				set_province_flag = orthodox_patriarch_of_alexandria
				set_province_flag = orthodox_patriarchate
				set_province_flag = orthodox_pentarchy
			}
			379 = {
				set_province_flag = orthodox_patriarchate_of_jerusalem
				set_province_flag = orthodox_holy_land
			}
			379 = {
				set_province_flag = orthodox_patriarch_of_jerusalem
				set_province_flag = orthodox_patriarchate
				set_province_flag = orthodox_pentarchy
			}
			every_province = { #Orthodox Patriarchates
				limit = {
					OR = {
						has_province_flag = orthodox_pentarchy
						#Autocephalous Patriarchates
						AND = {
							is_year = 478
							province_id = 321 #Nicosia and All Cyprus (Lefkosia)
						}
						AND = {
							is_year = 486
							province_id = 423 #Tblisi and All Georgia (Kartli)
						}
						AND = {
							OR = {
								AND = {
									is_year = 1219
									NOT = { is_year = 1766 }
								}
								is_year = 1879
							}
							province_id = 140 #Pec and All Serbia (Kosovo)
						}
						AND = {
							is_year = 1245
							province_id = 1426 #Sofia and All Bulgaria (Serdica)
						}
						AND = {
							is_year = 1470
							province_id = 295 #Moscow and All Russia (Moskva)
						}
						AND = {
							is_year = 1833
							province_id = 146 #Athens and All Greece (Attica)
						}
						AND = {
							is_year = 1865
							province_id = 161 #Bucharest and All Romania (Vlasia)
						}
					}
				}
				set_province_flag = orthodox_patriarchate
				if = {
					limit = {
						OR = {
							NOT = { owner = { religion = catholic } }
							NOT = { has_province_flag = catholic_patriarchate }
						}
					}
					change_variable = { which = orthodox value = 2 }
					change_variable = { which = province_religion value = -2 }
				}
			}
			#Miaphysite Catholicates
			358 = {
				set_province_flag = miaphysite_catholicate_of_alexandria
				set_province_flag = coptic_holy_land
			}
			if = {
				limit = { NOT = { is_year = 1047 } }
				358 = { #Alexandria
					set_province_flag = miaphysite_catholicos_of_alexandria
					set_province_flag = coptic_patriarchate
					set_province_flag = coptic_pentarchy
				}
			}
			if = {
				limit = { is_year = 1047 }
				361 = { #Cairo
					set_province_flag = miaphysite_catholicos_of_alexandria
					set_province_flag = coptic_patriarchate
					set_province_flag = coptic_pentarchy
				}
			}
			332 = {
				set_province_flag = miaphysite_catholicate_of_antioch
				set_province_flag = coptic_holy_land
			}
			if = {
				limit = { NOT = { is_year = 1160 } }
				332 = { #Antioch
					set_province_flag = miaphysite_catholicos_of_antioch
					set_province_flag = coptic_patriarchate
					set_province_flag = coptic_pentarchy
				}
			}
			if = {
				limit = { is_year = 1160 }
				3093 = { #Diyarbakir
					set_province_flag = miaphysite_catholicos_of_antioch
					set_province_flag = coptic_patriarchate
					set_province_flag = coptic_pentarchy
				}
			}
			if = {
				limit = { is_year = 451 }
				379 = {
					set_province_flag = miaphysite_catholicate_of_jerusalem
					set_province_flag = coptic_holy_land
				}
				379 = {
					set_province_flag = miaphysite_catholicos_of_jerusalem
					set_province_flag = coptic_patriarchate
					set_province_flag = coptic_pentarchy
				}
			}
			every_province = { #Miaphysite Patriarchates
				limit = {
					OR = {
						has_province_flag = coptic_pentarchy
						#Autocephalous Patriarchates
						AND = {
							province_id = 1755 #Catholicos of the Great House of Cilicia - remained in Cilicia despite following entries
							is_year = 1071
							NOT = { is_year = 1930 }
						}
						AND = {
							province_id = 3805 #Catholicos of Aghtamar in Van
							is_year = 1113
							NOT = { is_year = 1461 } #Moved to Armenia by the Ottomans
							NOT = { is_year = 1895 } #Dissolved and discredited after corruption and massacres of Armenians
						}
						AND = {
							province_id = 2577 #the See of the Caucasian Albanian Catholicosate, fled from Partav/Barda in Azerbaijan
							is_year = 1216
							NOT = { is_year = 1828 } #Closed down by Russian authorities
						}
						AND = {
							province_id = 419 #Catholicos of Armenia (The Mother See - Ejmiasin/Etchmiadzin in Vagharshapat, near Yerevan)
							is_year = 1441
						}
						AND = {
							province_id = 1402 #Armenian patriarch moved to Constantinople from Armenia after election in 1441
							is_year = 1461
						}
					}
				}
				set_province_flag = coptic_patriarchate
				change_variable = { which = coptic value = 2 }
				change_variable = { which = province_religion value = -2 }
			}
			#The Ark of the Covenant
			random_province = {
				limit = { province_id = 1570 } #Aksum, Tigray, Ethiopia
				save_global_event_target_as = ark_of_the_covenant
				if = {
					limit = { owner = { religion = coptic } }
					add_province_modifier = { name = coptic_pilgrimage duration = -1 }
					if = {
						limit = {
							NOT = { temple_trigger = yes }
							NOT = { cathedral_trigger = yes }
							num_free_building_slots = 1
						}
						add_building = temple
					}
				}
			}
			#The Legendary Great Fires of Zoroastrianism
			random_province = {
				limit = { province_id = 442 } #Khiva
				save_global_event_target_as = zoroastrian_great_fire_priests
			}
			random_province = {
				limit = { province_id = 2219 } #Urmieh
				save_global_event_target_as = zoroastrian_great_fire_warriors
			}
			random_province = {
				limit = { province_id = 433 } #Sabzevar
				save_global_event_target_as = zoroastrian_great_fire_farmers
			}
			random_province = {	#Israel
				limit = { province_id = 379 } # Al Quds
				set_province_flag = jewish_holy_land
				every_neighbor_province = { set_province_flag = jewish_holy_land }
			}
			random_province = {
				limit = {
					is_year = 1518
					province_id = 59 #Wittenburg
				}
				set_province_flag = protestant_holy_land
				set_global_flag = reformation_ninety_five_theses
				set_province_flag = reformation_origins
				save_global_event_target_as = reformation_origins
				1350 = { #Mainz or Magdeburg
					save_global_event_target_as = reformation_origins_archbishop
					set_province_flag = reformation_origins_archbishop
				}
				1373 = { #Leipzig
					set_province_flag = protestant_disputation
					save_global_event_target_as = reformation_origins_disputation
				}
			}
			if = {
				limit = { is_year = 1520 }
				set_global_flag = reformation_leipzig_disputation
				3741 = { #Erfurt
					set_province_flag = debate_verdict
				}
				183 = { #Paris
					set_province_flag = debate_verdict
				}
				ENG = {
					if = { limit = { religion = catholic } set_country_flag = rebuttal_of_ninety_five_theses }
				}
			}
			if = {
				limit = { is_year = 1521 }
				set_global_flag = reformation_exsurge_domine
			}
			if = {
				limit = { is_year = 1522 }
				event_target:reformation_origins = {
					owner = {
						set_country_flag = demands_for_heresy_trial
						set_country_flag = hiding_luther
					}
				}
				78 = { #Worms
					save_global_event_target_as = imperial_diet_of_worms set_province_flag = diet_of_worms
				}
				HAB = {
					save_global_event_target_as = imperial_edict_of_worms
					set_country_flag = edict_of_worms
					set_country_flag = luther_safe_passage_promised
					set_country_flag = luther_at_trial
				}
				ENG = { clr_country_flag = rebuttal_of_ninety_five_theses set_country_flag = fidei_defensor }
				set_global_flag = reformation_luther_wartburg
				71 = { #Thuringia
					set_province_flag = wartburg
				}
				set_global_flag = reformation_lutheran_doctrines
				set_global_flag = reformation_september_testament
				set_global_flag = reformation_zwickau_prophets
				3739 = { #Zwickau
					save_global_event_target_as = zwickau_prophets
					set_province_flag = zwickau
				}
			}
			if = {
				limit = { is_year = 1523 }
				set_global_flag = reformation_luther_returned
				event_target:reformation_origins = { owner = { set_country_flag = luther_advisor } }
				set_global_flag = reformation_knights_revolt
			}
			if = {
				limit = { is_year = 1525 }
				set_global_flag = reformation_peasants_war
				every_province = {
					limit = {
						continent = europe
						OR = {
							event_target:imperial_diet_of_worms = { culture = PREV }
							event_target:reformation_origins = { culture = PREV }
						}
					}
					owner = { set_country_flag = reformation_peasants_war }
				}
			}
			every_province = {
				limit = {
					has_province_flag = orthodox_patriarchate
					owner = { NOT = { religion = orthodox } }
					owner = {
						OR = {
							religion_group = muslim
							religion_group = christian
							religion_group = jewish_group
						}
					}
					NOT = {
						AND = {
							owner = { religion = catholic }
							has_province_flag = catholic_patriarchate
						}
					}
				}
				add_province_modifier = { name = orthodox_patriarchate_captive duration = -1 }
			}
			every_province = {
				limit = {
					has_province_flag = coptic_patriarchate
					owner = { NOT = { religion = coptic } }
					owner = {
						OR = {
							religion_group = muslim
							religion_group = christian
							religion_group = jewish_group
						}
					}
					NOT = {
						AND = {
							owner = { religion = catholic }
							has_province_flag = catholic_patriarchate
						}
					}
				}
				add_province_modifier = { name = coptic_patriarchate_captive duration = -1 }
			}
			every_province = {
				limit = {
					has_province_flag = orthodox_patriarchate
					owner = { NOT = { religion = orthodox } }
					owner = {
						NOT = {
							OR = {
								religion_group = muslim
								religion_group = christian
								religion_group = jewish_group
							}
						}
					}
				}
				add_permanent_province_modifier = { name = orthodox_patriarchate_vacant duration = -1 }
			}
			every_province = {
				limit = {
					has_province_flag = coptic_patriarchate
					owner = { NOT = { religion = coptic } }
					owner = {
						NOT = {
							OR = {
								religion_group = muslim
								religion_group = christian
								religion_group = jewish_group
							}
						}
					}
				}
				add_permanent_province_modifier = { name = coptic_patriarchate_vacant duration = -1 }
			}
			every_province = {
				limit = {
					OR = {
						AND = {
							is_year = 325
							province_id = 318 #Ephesus, Pergamon and Philadelphia (Manisa)
						}
						AND = {
							is_year = 451
							province_id = 1402 #Chalcedon (Constantinople)
						}
						AND = {
							is_year = 620
							province_id = 1570 #Axum (Tigray)
						}
						AND = {
							is_year = 988
							province_id = 280 #Kiev
						}
						AND = {
							is_year = 1359
							province_id = 161 #Ungro-Walachia (Bucharest)
						}
						AND = {
							is_year = 1405
							province_id = 2237 #Zeta
						}
						AND = {
							is_year = 1461
							province_id = 295 #Moscow
						}
					}
				}
				set_province_flag = orthodox_metropolitan
			}
			random_province = {
				limit = {
					province_id = 147 # Chalcidiki
					is_year = 963
				}
				set_province_flag = mount_athos
				set_province_flag = orthodox_holy_land
				if = {
					limit = { owner = { orthodox = -2 } }
					add_province_modifier = { name = lavra duration = -1 }
				}
				if = {
					limit = { owner = { religion = orthodox } }
					add_province_modifier = { name = pilgrimage_route duration = -1 }
				}
			}
			random_province = {
				limit = { province_id = 419 } # Hayastan
				set_province_flag = coptic_holy_land
				set_province_flag = armenian_catholicos
			}
			random_province = {
				limit = { province_id = 410 } # Baghdad
				set_province_flag = chaldean_holy_land
				set_province_flag = chaldean_catholicos
				every_neighbor_province = { set_province_flag = chaldean_holy_land }
				if = {
					limit = { owner = { religion = chaldean } }
					add_province_modifier = { name = chaldean_patriarchate duration = -1 }
				}
				if = {
					limit = {
						owner = { NOT = { religion = chaldean } }
						OR = {
							owner = { religion_group = muslim }
							owner = { religion_group = christian }
							owner = { religion_group = jewish_group }
						}
					}
					add_province_modifier = { name = chaldean_patriarchate_captive duration = -1 }
				}
				if = {
					limit = {
						owner = { NOT = { religion = chaldean } }
						NOT = {
							OR = {
								owner = { religion_group = muslim }
								owner = { religion_group = christian }
								owner = { religion_group = jewish_group }
							}
						}
					}
					add_province_modifier = { name = chaldean_patriarchate_vacant duration = -1 }
				}
			}
			every_province = {
				limit = {
					OR = {
						province_id = 385 #Mecca
						province_id = 384 #Medina
					}
				}
				set_province_flag = sunni_holy_land
				set_province_flag = shiite_holy_land
				set_province_flag = ibadi_holy_land
				set_province_flag = wahhabi_holy_land
			}
			every_country = {
				limit = {
					religion = orthodox
					any_owned_province = { has_province_flag = orthodox_patriarchate }
				}
				if = {
					limit = { NOT = { num_of_owned_provinces_with = { has_province_flag = orthodox_patriarchate value = 2 } } }
					random_owned_province = {
						limit = { has_province_flag = orthodox_patriarchate }
						add_province_modifier = { name = orthodox_patriarchate duration = -1 }
						add_province_modifier = { name = stavropegic_monastery duration = -1 }
					}
				}
				if = {
					limit = { num_of_owned_provinces_with = { has_province_flag = orthodox_patriarchate value = 2 } }
					if = {
						limit = {
							capital_scope = {
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
						}
						random_owned_province = {
							limit = {
								is_capital = yes
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
							add_province_modifier = { name = orthodox_patriarchate duration = -1 }
							add_province_modifier = { name = stavropegic_monastery duration = -1 }
						}
						every_owned_province = {
							limit = {
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
							}
							add_province_modifier = { name = orthodox_archbishopric duration = -1 }
						}
					}
					if = {
						limit = {
							any_owned_province = {
								has_owner_culture = yes
								has_province_flag = orthodox_pentarchy
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
						}
						random_owned_province = {
							limit = {
								has_owner_culture = yes
								has_province_flag = orthodox_pentarchy
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
							add_province_modifier = { name = orthodox_patriarchate duration = -1 }
							add_province_modifier = { name = stavropegic_monastery duration = -1 }
						}
						every_owned_province = {
							limit = {
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
							}
							add_province_modifier = { name = orthodox_archbishopric duration = -1 }
						}
					}
					if = {
						limit = {
							any_owned_province = {
								has_owner_culture = yes
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
						}
						random_owned_province = {
							limit = {
								has_owner_culture = yes
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
							add_province_modifier = { name = orthodox_patriarchate duration = -1 }
							add_province_modifier = { name = stavropegic_monastery duration = -1 }
						}
						every_owned_province = {
							limit = {
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
							}
							add_province_modifier = { name = orthodox_archbishopric duration = -1 }
						}
					}
					if = {
						limit = {
							any_owned_province = {
								culture_group = owner
								has_province_flag = orthodox_pentarchy
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
						}
						random_owned_province = {
							limit = {
								culture_group = owner
								has_province_flag = orthodox_pentarchy
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
							add_province_modifier = { name = orthodox_patriarchate duration = -1 }
							add_province_modifier = { name = stavropegic_monastery duration = -1 }
						}
						every_owned_province = {
							limit = {
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
							}
							add_province_modifier = { name = orthodox_archbishopric duration = -1 }
						}
					}
					if = {
						limit = {
							any_owned_province = {
								culture_group = owner
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
						}
						random_owned_province = {
							limit = {
								culture_group = owner
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
							add_province_modifier = { name = orthodox_patriarchate duration = -1 }
							add_province_modifier = { name = stavropegic_monastery duration = -1 }
						}
						every_owned_province = {
							limit = {
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
							}
							add_province_modifier = { name = orthodox_archbishopric duration = -1 }
						}
					}
					if = {
						limit = {
							any_owned_province = {
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
						}
						random_owned_province = {
							limit = {
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
							add_province_modifier = { name = orthodox_patriarchate duration = -1 }
							add_province_modifier = { name = stavropegic_monastery duration = -1 }
						}
						every_owned_province = {
							limit = {
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
							}
							add_province_modifier = { name = orthodox_archbishopric duration = -1 }
						}
					}
					if = {
						limit = {
							any_owned_province = {
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
						}
						random_owned_province = {
							limit = {
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
							add_province_modifier = { name = orthodox_patriarchate duration = -1 }
							add_province_modifier = { name = stavropegic_monastery duration = -1 }
						}
						every_owned_province = {
							limit = {
								has_province_flag = orthodox_patriarchate
								NOT = { has_province_modifier = orthodox_patriarchate }
							}
							add_province_modifier = { name = orthodox_archbishopric duration = -1 }
						}
					}
					every_owned_province = {
						limit = {
							has_province_flag = orthodox_pentarchy
							has_province_modifier = orthodox_archbishopric
						}
						remove_province_modifier = orthodox_archbishopric
						add_province_modifier = { name = orthodox_pentarchy duration = -1 }
					}
				}
			}
			every_country = { #Miaphysite Catholicos
				limit = {
					religion = coptic
					any_owned_province = { has_province_flag = coptic_patriarchate }
				}
				if = {
					limit = { NOT = { num_of_owned_provinces_with = { has_province_flag = coptic_patriarchate value = 2 } } }
					random_owned_province = {
						limit = { has_province_flag = coptic_patriarchate }
						add_province_modifier = { name = coptic_patriarchate duration = -1 }
					}
				}
				if = {
					limit = { num_of_owned_provinces_with = { has_province_flag = coptic_patriarchate value = 2 } }
					if = {
						limit = {
							capital_scope = {
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
						}
						random_owned_province = {
							limit = {
								is_capital = yes
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
							add_province_modifier = { name = coptic_patriarchate duration = -1 }
						}
						every_owned_province = {
							limit = {
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
							}
							add_province_modifier = { name = orthodox_archbishopric duration = -1 }
						}
					}
					if = {
						limit = {
							any_owned_province = {
								has_owner_culture = yes
								has_province_flag = orthodox_pentarchy
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
						}
						random_owned_province = {
							limit = {
								has_owner_culture = yes
								has_province_flag = orthodox_pentarchy
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
							add_province_modifier = { name = coptic_patriarchate duration = -1 }
						}
						every_owned_province = {
							limit = {
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
							}
							add_province_modifier = { name = orthodox_archbishopric duration = -1 }
						}
					}
					if = {
						limit = {
							any_owned_province = {
								has_owner_culture = yes
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
						}
						random_owned_province = {
							limit = {
								has_owner_culture = yes
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
							add_province_modifier = { name = coptic_patriarchate duration = -1 }
						}
						every_owned_province = {
							limit = {
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
							}
							add_province_modifier = { name = orthodox_archbishopric duration = -1 }
						}
					}
					if = {
						limit = {
							any_owned_province = {
								culture_group = owner
								has_province_flag = orthodox_pentarchy
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
						}
						random_owned_province = {
							limit = {
								culture_group = owner
								has_province_flag = orthodox_pentarchy
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
							add_province_modifier = { name = coptic_patriarchate duration = -1 }
						}
						every_owned_province = {
							limit = {
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
							}
							add_province_modifier = { name = orthodox_archbishopric duration = -1 }
						}
					}
					if = {
						limit = {
							any_owned_province = {
								culture_group = owner
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
						}
						random_owned_province = {
							limit = {
								culture_group = owner
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
							add_province_modifier = { name = coptic_patriarchate duration = -1 }
						}
						every_owned_province = {
							limit = {
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
							}
							add_province_modifier = { name = orthodox_archbishopric duration = -1 }
						}
					}
					if = {
						limit = {
							any_owned_province = {
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
						}
						random_owned_province = {
							limit = {
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
							add_province_modifier = { name = coptic_patriarchate duration = -1 }
						}
						every_owned_province = {
							limit = {
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
							}
							add_province_modifier = { name = orthodox_archbishopric duration = -1 }
						}
					}
					if = {
						limit = {
							any_owned_province = {
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
						}
						random_owned_province = {
							limit = {
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
								NOT = { has_province_modifier = orthodox_archbishopric }
							}
							add_province_modifier = { name = coptic_patriarchate duration = -1 }
						}
						every_owned_province = {
							limit = {
								has_province_flag = coptic_patriarchate
								NOT = { has_province_modifier = coptic_patriarchate }
							}
							add_province_modifier = { name = orthodox_archbishopric duration = -1 }
						}
					}
					every_owned_province = {
						limit = {
							has_province_flag = orthodox_pentarchy
							has_province_modifier = orthodox_archbishopric
						}
						remove_province_modifier = orthodox_archbishopric
						add_province_modifier = { name = orthodox_pentarchy duration = -1 }
					}
				}
			}
			every_province = { #Chaldean Patriarchates
				limit = {
					province_id = 410 #Baghdad
				}
				set_province_flag = chaldean_catholicos_of_ctesiphon
				set_province_flag = chaldean_patriarchate
				change_variable = { which = chaldean value = 2 }
				change_variable = { which = province_religion value = -2 }
			}
			every_country = {
				limit = { religion = hinduism }
				every_province = {
					limit = {
						is_core = PREV
						religion = hinduism
						has_province_flag = hindu_pilgrimage
						NOT = { has_province_modifier = hindu_pilgrimage }
					}
					add_province_modifier = { name = hindu_pilgrimage duration = -1 }
				}
			} #End every country
			###Finish defining metropolitans and bishoprics
			###ADD RELIGIOUS MINORITIES
			if = {
				limit = { NOT = { has_global_flag = religious_minority_system } }
				set_global_flag = religious_minority_system
				every_province = {
					limit = { is_city = yes }
					change_variable = { which = province_religion value = 21 } #21 populations per province (odd numbered to avoid ties)
					dg_add_minorities = {
						religion = buddhism
					}
					dg_add_minorities = {
						religion = shinto
					}
					dg_add_minorities = {
						religion = mahayana
					}
					dg_add_minorities = {
						religion = confucianism
					}
					dg_add_minorities = {
						religion = vajrayana
					}
					dg_add_minorities = {
						religion = shiite
					}
					dg_add_minorities = {
						religion = sunni
					}
					dg_add_minorities = {
						religion = wahhabi
					}
					dg_add_minorities = {
						religion = ibadi
					}
					dg_add_minorities = {
						religion = hinduism
					}
					dg_add_minorities = {
						religion = sikhism
					}
					dg_add_minorities = {
						religion = jain
					}
					dg_add_minorities = {
						religion = zoroastrian
					}
					dg_add_minorities = {
						religion = adi_dharam
					}
					dg_add_minorities_colonial = {
						religion = catholic
					}
					dg_add_minorities_colonial = {
						religion = orthodox
					}
					dg_add_minorities_colonial = {
						religion = protestant
					}
					dg_add_minorities_colonial = {
						religion = reformed
					}
					dg_add_minorities_colonial = {
						religion = hussite
					}
					dg_add_minorities_colonial = {
						religion = coptic
					}
					dg_add_minorities_colonial = {
						religion = gnostic
					}
					dg_add_minorities_colonial = {
						religion = chaldean
					}
					dg_add_minorities = {
						religion = druze
					}
					dg_add_minorities = {
						religion = jewish
					}
					dg_add_minorities = {
						religion = totemism
					}
					dg_add_minorities = {
						religion = west_african_pagan_reformed
					}
					dg_add_minorities = {
						religion = animism
					}
					dg_add_minorities = {
						religion = inti
					}
					dg_add_minorities = {
						religion = nahuatl
					}
					dg_add_minorities = {
						religion = mesoamerican_religion
					}
					dg_add_minorities = {
						religion = shamanism
					}
					dg_add_minorities = {
						religion = tengri_pagan_reformed
					}
					dg_add_minorities = {
						religion = pantheism
					}
					dg_add_minorities = {
						religion = polynesian_religion
					}
					dg_add_minorities = {
						religion = hellenic_pagan
					}
					dg_add_minorities = {
						religion = norse_pagan_reformed
					}
					dg_add_minorities = {
						religion = finnish_pagan_reformed
					}
					dg_add_minorities = {
						religion = baltic_pagan_reformed
					}
					dg_add_minorities = {
						religion = slavic_pagan_reformed
					}
				}
				###Specific historical minorities (historical populations in areas that were not dominated by that faith)
				every_province = {
					limit = {
						is_city = yes
					}
					###CHRISTIANS
					##MIAPHYSITE ##COPTIC
					#Surviving Copts
					if = {#10% of Egyptians were still Copts by 1300, as well as some Sudanese and Libyans
						limit = {
							OR = {
								region = egypt_region
								region = sudan_region
							}
							NOT = { religion = coptic }
							NOT = { urban_province_trigger_start = yes }
						}
						change_variable = { which = coptic value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = { #Copts continued to have a bishop and churches in Cyprus until the Ottomans exterminated them
						limit = {
							OR = {
								province_id = 321 # Lefkosia
								province_id = 2750 # Famagusta
							}
							NOT = { religion = coptic }
							owner = { religion_group = christian }
							urban_province_trigger_start = yes
						}
						change_variable = { which = coptic value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					#Ethiopian Christians in Arabia
					if = {
						limit = {
							OR = {
								area = hadramut_area
								area = yemen_area
							}
							has_port = yes
							NOT = { religion_group = christian }
						}
						change_variable = { which = coptic value = 2 }
						change_variable = { which = province_religion value = 2 }
					}
					if = { #Jerusalem Miaphysites
						limit = {
							area = palestine_area
							NOT = { religion = coptic }
						}
						change_variable = { which = coptic value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = { #Armenian legacy
						limit = {
							culture_group = armenian
							NOT = { religion = coptic }
						}
						change_variable = { which = coptic value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					##GNOSTIC
					#Mandaeans in the Strait of Hormuz (met by Jesuits in 1559)
					if = {
						limit = {
							OR = {
								area = basra_area
								area = luristan_area #Khuzestan, Persia
							}
							NOT = { religion = gnostic }
						}
						change_variable = { which = gnostic value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					#Bogomils in the Balkans
					if = {
						limit = {
							culture = croatian
							religion = catholic #Bogomil heretics in Dalmatia and Patarenes in Ragusa
							NOT = { is_year = 1699 }
						}
						change_variable = { which = gnostic value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = {
						limit = {
							culture = bosnian
							religion = catholic #Babuni/Bogomil heretics in Bosnia
							NOT = { is_year = 1699 }
						}
						change_variable = { which = gnostic value = 6 }
						change_variable = { which = province_religion value = -6 }
					}
					if = {
						limit = {
							culture = serbian
							religion = orthodox #Bogomil heretics in Zeta and Serbia
							NOT = { is_year = 1699 }
						}
						change_variable = { which = gnostic value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							culture = bulgarian
							religion = orthodox #Bogomil heretics in the Second Bulgarian Empire
							NOT = { is_year = 1360 } #Bogomils anathemized and banished from Bulgaria
						}
						change_variable = { which = gnostic value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							OR = {
								culture = bulgarian #faint Bogomil presence in Macedonia and Bulgaria
								AND = {
									culture = greek
									any_neighbor_province = { culture = bulgarian }
								}
							}
							religion = orthodox
							NOT = { is_year = 1400 } #Ottoman conquest exterminated the Bogomils in Rumelia
						}
						change_variable = { which = gnostic value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					#Paulicians
					if = {
						limit = {
							OR = { #Paulician heretics as late as 1828
								culture = owm_armenian
								culture = ge_armenian
							}
							religion_group = christian
						}
						change_variable = { which = gnostic value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					##ASSYRIAN CHURCH OF THE EAST ##CHALDEAN
					if = { #Chaldeans strongest in northern Mesopotamia
						limit = {
							area = mosul_area
						}
						change_variable = { which = chaldean value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Chaldeans in Mesopotamia
						limit = {
							OR = {
								area = mosul_area
								#area = al_jazira_area
								area = iraq_arabi_area
							}
							NOT = { is_year = 1500 } #Mostly disappeared
						}
						change_variable = { which = chaldean value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Chaldeans in Mesopotamia
						limit = {
							OR = {
								area = mosul_area
								#area = al_jazira_area
								area = iraq_arabi_area
							}
						}
						change_variable = { which = chaldean value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Chaldeans in Persia
						limit = {
							region = persia_region
							urban_province_trigger_start = yes #notable populations in Bukhara, Herat, Kashgar and Samarkand
							NOT = { area = luristan_area } #Mandaeans
						}
						change_variable = { which = chaldean value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Chaldeans in Persia
						limit = {
							region = persia_region
							NOT = { area = luristan_area } #Mandaeans
							NOT = { is_year = 1318 } #Widespread persecution after the Ilkhans converted to Islam
						}
						change_variable = { which = chaldean value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Chaldeans in Persia
						limit = {
							region = persia_region
							NOT = { area = luristan_area } #Mandaeans
							NOT = { is_year = 1370 } #Largely wiped out by Tamerlane
						}
						change_variable = { which = chaldean value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #St. Thomas Christians in Malabar (Nasrani)
						limit = {
							OR = {
								area = kanara_area
								area = north_kerala_area #Especially concentrated here
								area = south_kerala_area #Especially concentrated here
							}
							urban_province_trigger_start = yes
						}
						if = {
							limit = { owner = { NOT = { religion = catholic } } }
							change_variable = { which = chaldean value = 2 }
							change_variable = { which = province_religion value = -2 }
						}
						if = { #Converted to Catholicism
							limit = { owner = { religion = catholic } }
							change_variable = { which = catholic value = 2 }
							change_variable = { which = province_religion value = -2 }
						}
					}
					if = { #St. Thomas Christians in Malabar (Nasrani)
						limit = {
							OR = {
								area = madura_area
								area = north_kerala_area #Especially concentrated here
								area = south_kerala_area #Especially concentrated here
							}
							NOT = { religion = chaldean }
							NOT = { religion = catholic }
						}
						if = {
							limit = { owner = { NOT = { religion = catholic } } }
							change_variable = { which = chaldean value = 2 }
							change_variable = { which = province_religion value = -2 }
						}
						if = { #Converted to Catholicism
							limit = { owner = { religion = catholic } }
							change_variable = { which = catholic value = 2 }
							change_variable = { which = province_religion value = -2 }
						}
					}
					if = { #Chaldean churches in China (Yuan Dynasty)
						limit = {
							OR = {
								province_id = 695 #Beijing?
								province_id = 2252 #X'ian (Shaanxi)
							}
							NOT = { religion = chaldean }
							NOT = { is_year = 1368 } #Went underground when the Ming came in
						}
						change_variable = { which = chaldean value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Chaldean churches in China (Ming Dynasty)
						limit = {
							OR = {
								province_id = 1816 #Beijing?
								province_id = 2252 #X'ian (Shaanxi)
							}
							NOT = { religion = chaldean }
							NOT = { is_year = 1550 } #Reported to have largely disappeared by then
						}
						change_variable = { which = chaldean value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Assyrian Church
						limit = {
							area = syria_area
							NOT = { religion = chaldean }
						}
						change_variable = { which = chaldean value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					##ORTHODOX
					#Byzantine and Russian influence in Lithuania
					if = {
						limit = {
							OR = {
								culture_group = baltic
								culture_group = east_slavic
							}
							NOT = { religion = orthodox }
							NOT = { has_global_flag = fantasy_scenario_lithuania }
							NOT = { has_global_flag = fantasy_scenario_hellenic }
						}
						change_variable = { which = orthodox value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					#Byzantine legacy in Greece
					if = {
						limit = {
							culture = greek
							NOT = { religion = orthodox }
							NOT = { has_global_flag = fantasy_scenario_hellenic }
						}
						change_variable = { which = orthodox value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					#Byzantine legacy in Anatolia
					if = {
						limit = {
							OR = {
								region = north_anatolia_region
								region = south_anatolia_region
								region = armenia_region
								near_east_region_trigger = yes
							}
							OR = {
								culture = turkish
								culture = greek
								culture = pontic
								culture = yorouk
							}
							NOT = { has_global_flag = fantasy_scenario_hellenic }
						}
						if = {
							limit = { NOT = { religion = orthodox } }
							change_variable = { which = orthodox value = 2 }
							change_variable = { which = province_religion value = -2 }
						}
						if = {
							limit = { religion = orthodox has_owner_religion = yes }
							change_variable = { which = converted_heathens value = 2 }
						}
					}
					if = {
						limit = {
							OR = {
								region = north_anatolia_region
								region = south_anatolia_region
								region = armenia_region
								near_east_region_trigger = yes
							}
							OR = {
								culture = turkish
								culture = greek
								culture = pontic
								culture = yorouk
							}
							OR = {
								has_port = yes
								owner = { religion = orthodox }
							}
							NOT = { is_year = 1400 }
							NOT = { has_global_flag = fantasy_scenario_hellenic }
						}
						if = {
							limit = { NOT = { religion = orthodox } }
							change_variable = { which = orthodox value = 2 }
							change_variable = { which = province_religion value = -2 }
						}
						if = {
							limit = { religion = orthodox has_owner_religion = yes }
							change_variable = { which = converted_heathens value = 2 }
						}
					}
					if = {
						limit = {
							OR = {
								region = north_anatolia_region
								region = south_anatolia_region
								region = armenia_region
								near_east_region_trigger = yes
							}
							has_port = yes
							OR = {
								culture = turkish
								culture = greek
								culture = pontic
								culture = yorouk
							}
							OR = {
								religion = sunni
								religion = orthodox
							}
							NOT = { has_global_flag = fantasy_scenario_hellenic }
						}
						if = {
							limit = { NOT = { religion = orthodox } }
							change_variable = { which = orthodox value = 2 }
							change_variable = { which = province_religion value = -2 }
						}
						if = {
							limit = {
								religion = orthodox
								has_owner_religion = no
								any_neighbor_province = { religion = orthodox has_owner_religion = yes }
							}
							change_variable = { which = orthodox value = 2 }
							change_variable = { which = converts value = -2 }
						}
					}
					#Specific province adjustments in Anatolia #MODTHIS
					if = { #Orthodox +4
						limit = {
							OR = {
								province_id = 317 #Bergama
								province_id = 318 #Manisa
								province_id = 1441 #Amasya
							}
							owner = { NOT = { religion = orthodox } }
							NOT = { is_year = 1400 }
							NOT = { has_global_flag = fantasy_scenario_hellenic }
						}
						change_variable = { which = orthodox value = 4 }
						change_variable = { which = converts value = -4 }
					}
					if = { #Orthodox +3
						limit = {
							always = no #Replace as shown in +4
							owner = { NOT = { religion = orthodox } }
							NOT = { is_year = 1400 }
							NOT = { has_global_flag = fantasy_scenario_hellenic }
						}
						change_variable = { which = orthodox value = 3 }
						change_variable = { which = converts value = -3 }
					}
					if = { #Orthodox +2
						limit = {
							always = no #Replace as shown in +4
							owner = { NOT = { religion = orthodox } }
							NOT = { is_year = 1400 }
							NOT = { has_global_flag = fantasy_scenario_hellenic }
						}
						change_variable = { which = orthodox value = 2 }
						change_variable = { which = converts value = -2 }
					}
					if = { #Orthodox +1
						limit = {
							always = no #Replace as shown in +4
							owner = { NOT = { religion = orthodox } }
							NOT = { is_year = 1400 }
							NOT = { has_global_flag = fantasy_scenario_hellenic }
						}
						change_variable = { which = orthodox value = 1 }
						change_variable = { which = converts value = -1 }
					}
					#Specific provinces in Anatolia
					if = { #Sunni +3
						limit = {
							OR = {
								province_id = 316 # Bolu
								province_id = 328 # Sinop
								province_id = 329 # Karaman
								province_id = 1438 # Aydin
								province_id = 1439 # Mentese
								province_id = 1440 # Silifke
								province_id = 1443 # Zulkadriye
								province_id = 1447 # Kastamonu
								province_id = 2541 # Cankiri
								province_id = 3391 # Finike
							}
							owner = { religion = sunni }
						}
						change_variable = { which = converted_heathens value = 3 }
					}
					if = { #Sunni +2
						limit = {
							always = no
							owner = { religion = sunni }
						}
						change_variable = { which = converted_heathens value = 2 }
					}
					if = { #Sunni +1
						limit = {
							always = no
							owner = { religion = sunni }
						}
						change_variable = { which = converted_heathens value = 1 }
					}
					#Orthodox Christians in Southern Italy (Grikos, dominant in parts of Calabria and Salento until the 16th century)
					if = {
						limit = {
							OR = {
								region = sicily_region
								AND = {
									province_id = 123 #Calabria (Diocese of Bova held out past 1585, Reggio to 1609)
									NOT = { is_year = 1609 }
								}
								AND = {
									province_id = 1285 #Gallipoli in Puglia; Otranto held out to at least 1583
									NOT = { is_year = 1583 }
								}
							}
						}
						if = {
							limit = { NOT = { is_year = 1400 } }
							change_variable = { which = orthodox value = 2 }
							change_variable = { which = province_religion value = -2 }
						}
						change_variable = { which = orthodox value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					#Orthodox Metropolitan in Venice
					random_province = {
						limit = {
							province_id = 112 #Venice
							is_year = 1537 #Metropolitan founded
						}
						change_variable = { which = orthodox value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					#Orthodox Christians in Bosnia
					if = {
						limit = {
							culture = bosnian
							religion_group = christian
							NOT = { religion = orthodox }
						}
						change_variable = { which = orthodox value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					##CATHOLIC
					#Visigothic legacy in Spain
					if = {
						limit = {
							culture_group = iberian
							continent = europe
							religion_group = muslim
						}
						change_variable = { which = catholic value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					#Jesuits in Asia
					if = { #Chinese Catholics, brought by Europeans, mostly Jesuits
						limit = {
							religion = confucianism
							has_port = yes
							is_year = 1600
						}
						change_variable = { which = catholic value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					#Creation of the Eastern Catholic Churches
					if = {
						limit = {
							province_id = 1334 #Maronite Christians in Lebanon
						}
						change_variable = { which = catholic value = 2 } #Without this, the Sunnis end up dominating
						change_variable = { which = sunni value = -2 }
					}
					##REFORMED
					##PROTESTANT
					##HUSSITE
					if = {
						limit = {
							religion_group = christian
							province_id = 268 #Prague (Bohemia)
							NOT = { religion = hussite }
							is_year = 1403 #Jan Hus teaches Wycliffian heresy at Prague university
							is_religion_enabled = hussite
						}
						change_variable = { which = hussite value = 2 }
						change_variable = { which = province_religion value = -2 }
						PAP = { change_variable = { which = lollard_preaching value = 1 } }
					}
					if = {
						limit = {
							culture = czech
							religion_group = christian
							NOT = { religion = hussite }
							is_year = 1407 #Jan Hus' teachings spread throughout Bohemia slowly
							NOT = { is_year = 1620 } #After the battle of White Mountain the Hussites lose serious ground
							is_religion_enabled = hussite
						}
						change_variable = { which = hussite value = 2 }
						change_variable = { which = province_religion value = -2 }
						PAP = { change_variable = { which = lollard_preaching value = 3 } }
					}
					if = {
						limit = {
							culture = czech
							religion_group = christian
							NOT = { religion = hussite }
							is_year = 1411 #Jan Hus excommunicated but Bohemia defends him
							NOT = { is_year = 1520 } #Some Hussites returned to the Catholic Church in defiance of Luther
							is_religion_enabled = hussite
						}
						change_variable = { which = hussite value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							culture = czech
							religion_group = christian
							NOT = { religion = hussite }
							is_year = 1415 #The Martyrdom of Jan Hus spreads his beliefs throughout Bohemia
							NOT = { is_year = 1457 } #Some Hussites return to the Catholic Church
							is_religion_enabled = hussite
						}
						change_variable = { which = hussite value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							owned_by = MOL
							has_owner_culture = yes
							has_owner_religion = yes
							religion_group = christian
							NOT = { religion = hussite }
							is_religion_enabled = hussite
							is_year = 1430 #The Hussite Wars; some Hussites flee to Moldavia
							NOT = { is_religion_enabled = protestant }
						}
						change_variable = { which = hussite value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					###JEWS #JEWISH
					#Jewish ghettos in major cities.
					if = {
						limit = {
							OR = {
								rich_province_trigger_start = yes
								trade_center_trigger_start = yes
								germany_cities_trigger_start = yes #they are so low pop compared to the medium
							}
							OR = {
								owner = { religion_group = christian }
								owner = { religion_group = muslim }
							}
							OR = {
								continent = europe
								persia_region_trigger = yes
								near_east_region_trigger = yes
							}
							NOT = { has_global_flag = fantasy_scenario_israel }
						}
						change_variable = { which = jewish value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					#Jews in trade -> Removed for now, because I think that's it's redundant with jewish ghettos which just need a 4 urban pop ( I extended it a bit )
					#if = {
					#	limit = {
					#		trade_center_trigger_start = yes
					#		urban_province_trigger_start = yes
					#		OR = {
					#			owner = { religion_group = christian }
					#			owner = { religion_group = muslim }
					#			}
					#		continent = europe
					#		#near_east_region_trigger = yes
					#			
					#		NOT = { has_global_flag = fantasy_scenario_israel }
					#		}
					#	change_variable = { which = jewish value = 2 }
					#	change_variable = { which = province_religion value = -2 }
					#	}
					#Historical areas with high concentrations of Jews
					if = {
						limit = {
							OR = {
								culture = georgian
								culture = ge_armenian
								culture = owm_armenian
								culture = cilician
								province_id = 105 #Ancona
								AND = {
									has_province_flag = jewish_holy_land #Many Jews settled around (but not in) Jerusalem
									has_port = yes
								}
								AND = {
									region = greece_region #Sephardic Jews migrate to Greece after the fall of Byzantium
									owner = { religion_group = muslim }
									is_year = 1453
								}
								AND = {
									OR = {
										culture_group = west_slavic
										culture_group = east_slavic
									}
									is_year = 1492 #Russians allow Jews to settle in their Western territories
									continent = europe
								}
								AND = {
									north_africa_region_trigger = yes
									is_year = 1492 #Many Spanish Jews fled to North Africa
								}
								AND = {
									region = andalucia_region #200,000 Sephardic Jews lived in Granada and southern Castille before the expulsion
									NOT = { is_year = 1492 }
								}
								AND = {
									OR = {
										AND = {
											area = maharashtra_area #Bene Israel
											urban_province_trigger_start = yes
										}
										area = north_kerala_area #Cochin Jews of India
										area = multan_area #Punjab (Other Indian Jews)
										area = lower_sindh_area
										area = upper_sindh_area
										area = lahore_area #Lahore (Other Indian Jews)
									}
									urban_province_trigger_start = yes
								}
							}
							town_province_trigger_start = yes
							NOT = { has_global_flag = fantasy_scenario_israel }
						}
						change_variable = { which = jewish value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Portugal and Aragon case
						limit = {
							OR = {
								province_id = 228 # Barlavento Algarvio
								province_id = 230 # Estremadura
								province_id = 1423 # Alentejo Central
								province_id = 1508 # Beira Alta
								province_id = 3349 # Douro
							}
							NOT = { has_global_flag = fantasy_scenario_israel }
						}
						change_variable = { which = jewish value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #6.5% of Crown of Aragon population was jewish before XV century
						limit = {
							AND = {
								OR = {
									province_id = 181 # Tarragona
									province_id = 197 # Rosello
									province_id = 211 # Aragon
									province_id = 212 # Girona
									province_id = 213 # Barcelona
									province_id = 214 # Zaragoza
									province_id = 333 # Mallorca
									province_id = 2369 # Ponent
									province_id = 2473 # Calatayud
									province_id = 3369 # Tarazona
								}
								NOT = { is_year = 1492 }
							}
							NOT = { has_global_flag = fantasy_scenario_israel }
						}
						change_variable = { which = jewish value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Eastern europe case (Polish/Silesian Jews)
						limit = {
							is_year = 1200
							town_province_trigger_start = yes
							OR = {
								culture = polish
								culture = silesian
								culture = ruthenian
								province_id = 2355 #Danzig
							}
							NOT = { has_global_flag = fantasy_scenario_israel }
						}
						change_variable = { which = jewish value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Particularly tolerant societies
						limit = {
							urban_province_trigger_start = yes
							OR = {
								arab_culture_trigger = yes
								AND = {
									owner = { religion = orthodox }
									continent = europe
								}
								owner = { tag = GRA } #Granada before 1492
								owner = { tag = SIC } #Sicily before Spanish rule
								#AND = { #Poland -> Moved to a dedicated trigger because the urban_province_trigger doesn't fit with Poland where they are not any 2 urban pop cities.
								#	is_year = 1200
								#	culture = polish
								#	}
								AND = {
									is_year = 1492
									north_africa_region_trigger = yes #Many Sephardic Jews fled to North Africa from Spain
								}
								AND = {
									is_year = 1492
									region = sicily_region #Jews settle in Naples and Sicily at the invitation of its King
								}
								AND = {
									is_year = 1566 #Selim II allows Marranos fleeing Portugal to settle in the Ottoman Empire
									owner = { tag = TUR }
								}
								AND = { #Holland allows Jews to practice their faith
									culture_group = low_frankish
									is_year = 1579
									continent = europe
								}
								AND = { #England allows Marranos to settle there
									OR = { culture = english culture = northern_e }
									is_year = 1655
									continent = europe
								}
								AND = { #Hapsburg territories
									is_year = 1780
									owner = { tag = HAB }
									continent = europe
								}
								AND = { #French Revolution gives Jews citizenship
									culture_group = langue_d_oil
									is_year = 1792
									continent = europe
								}
							}
							NOT = { has_global_flag = fantasy_scenario_israel }
						}
						change_variable = { which = jewish value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					#Expulsions and Bans
					if = {
						limit = {
							check_variable = { which = jewish value = 1 }
							NOT = { religion_group = jewish_group }
							NOT = { owner = { religion_group = jewish_group } }
							NOT = { owner = { has_country_flag = jews_permitted } }
							NOT = { owner = { has_country_flag = jews_tolerated } }
							OR = {
								owner = { tag = SPA }
								owner = { tag = BYZ }
								AND = {
									owner = { tag = KNP }
									is_year = 1288
									OR = {
										NOT = { is_year = 1492 }
										is_year = 1511
									}
								}
								AND = {
									owner = { tag = CAS }
									is_year = 1389
								}
								AND = {
									owner = { tag = BOH }
									is_year = 1389
								}
								AND = {
									owner = { tag = ARA }
									is_year = 1493
								}
								AND = {
									owner = { tag = LIT }
									is_year = 1495
									NOT = { is_year = 1503 }
								}
								AND = {
									owner = { tag = POR }
									is_year = 1496
								}
								AND = {
									owner = { tag = BAV }
									is_year = 1551
								}
								AND = {
									owner = { tag = PAP }
									is_year = 1569
								}
								AND = {
									owner = { tag = BRA }
									is_year = 1572
									NOT = { is_year = 1671 } #50 Jewish families allowed to immigrate
								}
								AND = {
									owner = { tag = FRA }
									NOT = { is_year = 1675 } #Letters of patent to Jews in Alsace and Lorraine
								}
								AND = {
									owner = { tag = ENG }
									NOT = { is_year = 1655 }
									is_year = 1290
								}
							}
						}
						owner = { set_country_flag = jewish_expulsion }
						change_variable = { which = province_religion which = jewish }
						set_variable = { which = jewish value = 0 }
					}
					###MUSLIMS
					##SUNNIS
					if = {
						limit = {
							OR = {
								culture_group = chinese_group
								culture = korean
							}
							any_neighbor_province = { culture_group = altaic }
							NOT = { religion_group = muslim }
						}
						change_variable = { which = province_religion value = -2 }
						change_variable = { which = sunni value = 2 }
					}
					if = { #The Yuan import Arabs to Yunnan
						limit = {
							region = yunnan_region
							base_tax = 7
							NOT = { religion_group = muslim }
						}
						change_variable = { which = province_religion value = -4 }
						change_variable = { which = sunni value = 4 }
					}
					if = {
						limit = {
							culture_group = chinese_group
							base_production = 1 #Change for 2.0 'was 10'
							OR = {
								has_port = yes
								is_capital = yes
							}
							NOT = { religion_group = muslim }
						}
						if = {
							limit = {
								is_year = 1356
								NOT = { is_year = 1366 }
								OR = {
									province_id = 1053 # Quanzhou
									province_id = 5418 # Xinghua
									province_id = 5419 # Yongchun
								}
							} #Actually 1357-66. but modified for M&T start date
							set_province_flag = sunni_rebel_victory
							owner = { set_country_flag = religious_rebel_victory }
						}
						if = {
							limit = { NOT = { is_year = 1366 } } #Ispah Rebellion
							change_variable = { which = province_religion value = -2 }
							change_variable = { which = sunni value = 2 }
						}
					}
					if = {
						limit = {
							culture_group = malay
							NOT = { culture = polynesian }
							has_port = yes
							NOT = { religion = sunni }
						}
						change_variable = { which = sunni value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							culture_group = malay
							NOT = { culture = polynesian }
							has_port = yes
							NOT = { religion = sunni }
						}
						change_variable = { which = sunni value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							culture = cham
							NOT = { religion = sunni }
						}
						change_variable = { which = sunni value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							OR = { #Muslim missionaries and traders in East Africa
								culture_group = somali_group
								culture_group = swahili_group
							}
							has_port = yes
							NOT = { religion_group = muslim }
						}
						change_variable = { which = shiite value = 2 }
						change_variable = { which = sunni value = 2 }
						change_variable = { which = ibadi value = 2 }
						change_variable = { which = province_religion value = -6 }
					}
					if = {
						limit = {
							OR = { #Muslim converts in Northwest India and Bengal - as much as 20% of Indian population at its height
								culture_group = rajput
								culture = bengali
							}
							OR = {
								religion = hinduism
								religion = buddhism
							}
							base_tax = 6
						}
						change_variable = { which = sunni value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Muslim elites in India, especially in urban areas and Bengal
						limit = {
							indian_region_trigger = yes
							owner = { religion = sunni }
							NOT = { religion = sunni }
							base_production = 3
						}
						change_variable = { which = sunni value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Muslims in Madagascar and Ceylon
						limit = {
							area = indian_ocean_islands_area
							has_port = yes
							NOT = { religion = sunni }
						}
						change_variable = { which = sunni value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Muslims gradually take over Java from the end of the 14th to end of the 16th century
						limit = {
							culture = sulawesi
							is_year = 1400
						}
						change_variable = { which = sunni value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = { #Muslims gradually take over Java from the end of the 14th to end of the 16th century
						limit = {
							culture = sulawesi
							is_year = 1500
						}
						change_variable = { which = sunni value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = { #Muslims gradually take over Java from the end of the 14th to end of the 16th century
						limit = {
							culture = sulawesi
							is_year = 1600
						}
						change_variable = { which = sunni value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = {
						limit = { #Christians did not convert all the Muslims
							OR = {
								province_id = 1845 #Orihuela
								province_id = 3366 #Marina
								province_id = 1408 #Teruel
								province_id = 1284 #Castello
							}
							religion_group = christian
						}
						change_variable = { which = sunni value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = { #Christians did not convert all the Muslims
							OR = {
								province_id = 220 #Valencia
								province_id = 2565 #Alicante
							}
							religion_group = christian
						}
						change_variable = { which = sunni value = 6 }
						change_variable = { which = province_religion value = -6 }
					}
					if = {
						limit = { #Last moors in Portugal Kingdom
							OR = {
								province_id = 230 #Lisboa
								province_id = 228 #Faro
							}
							religion_group = christian
						}
						change_variable = { which = sunni value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Ottoman census of 1510-20 showed 20% of Rumelia was Muslim (concentrated in cities, esp. Thessaly, Thrace, Silistria and Bosnia)
						limit = {
							OR = {
								region = west_balkan_region
								region = east_balkan_region
							}
							is_year = 1500
							NOT = { religion = sunni }
							owner = { religion_group = muslim }
						}
						change_variable = { which = sunni value = 1 }
						change_variable = { which = province_religion value = -1 }
					}
					#Bogomil conversions to Islam in the Balkans
					if = {
						limit = { #Many Bogomils converted to Islam
							check_variable = { which = gnostic value = 1 }
							owner = { religion = sunni }
							is_year = 1500
						}
						change_variable = { which = sunni value = 1 }
						change_variable = { which = gnostic value = -1 }
					}
					if = {
						limit = { #Many Bogomils converted to Islam
							check_variable = { which = gnostic value = 1 }
							owner = { religion = sunni }
							is_year = 1600
						}
						change_variable = { which = sunni value = 1 }
						change_variable = { which = gnostic value = -1 }
					}
					if = {
						limit = { #Many Bogomils converted to Islam
							check_variable = { which = gnostic value = 1 }
							owner = { religion = sunni }
							is_year = 1700
						}
						change_variable = { which = sunni value = 1 }
						change_variable = { which = gnostic value = -1 }
					}
					##SHIITES
					if = { #Alevis made up as much as 25% of the population of Anatolia
						limit = {
							religion = sunni
							OR = {
								culture = kurdish
								culture = yorouk
							}
							NOT = { urban_province_trigger_start = yes }
						}
						change_variable = { which = province_religion value = -4 }
						change_variable = { which = shiite value = 4 }
					}
					if = {
						limit = {
							culture_group = persian_group #Before the Safavid conquest, even Tabriz was said to have been two-thirds Sunni, with the Ottomans requesting Sunni Ulama from Persia
							NOT = { culture = kurdish } #Covered above
							NOT = { religion = shiite }
						}
						change_variable = { which = province_religion value = -3 }
						change_variable = { which = shiite value = 3 }
					}
					if = {
						limit = {
							has_global_flag = fantasy_scenario_imamates
							culture_group = iberian
							any_neighbor_province = { religion = shiite }
							NOT = { religion = shiite }
						}
						change_variable = { which = province_religion value = -3 }
						change_variable = { which = shiite value = 3 }
					}
					if = { #Alawites
						limit = { culture = shami }
						change_variable = { which = shiite value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Alawites
						limit = { culture = shami has_port = yes }
						change_variable = { which = shiite value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Muslim elites in India, especially in urban areas and Bengal
						limit = {
							indian_region_trigger = yes
							owner = { religion = shiite }
							NOT = { religion = shiite }
							rich_province_trigger_start = yes
						}
						change_variable = { which = shiite value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							OR = {
								culture_group = somali_group #Persian influence in East Africa
								culture_group = swahili_group #Persian influence in East Africa
							}
							religion = sunni
						}
						change_variable = { which = shiite value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Zayyids/Zadiyyah
						limit = {
							OR = {
								area = hejaz_area
								area = sanaa_area
								area = yemen_area
							}
							religion = sunni
							NOT = { has_port = yes }
						}
						change_variable = { which = shiite value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					##IBADIS
					##WAHHABIS
					##DRUZE
					###TAOICS
					if = {
						limit = {
							korean_culture_trigger = yes
							religion = mahayana
						}
						change_variable = { which = confucianism value = 6 }
						change_variable = { which = province_religion value = -6 }
					}
					#DHARMICS
					#PAGANS
					##ANIMISTS
					if = { #Ethiopia is still 15% pagan today
						limit = {
							religion = coptic
							superregion = east_africa_superregion
						}
						change_variable = { which = animism value = 4 }
						change_variable = { which = province_religion value = -4 }
						add_province_modifier = { name = syncretism duration = -1 }
					}
					#EUROPEAN PAGANS
					#NEW WORLD PAGANS
					if = { #Adivasi in eastern India
						limit = {
							culture_group = eastern_aryan
							NOT = { religion = adi_dharam }
							NOT = { base_tax = 4 } #Largely isolated areas such as farmland
						}
						change_variable = { which = adi_dharam value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = { #Rodnovers in Russia
						limit = {
							culture = russian
							continent = europe
							NOT = { religion = slavic_pagan_reformed }
							base_tax = 7 #Only in a few provinces
							NOT = { is_year = 1500 }
						}
						change_variable = { which = slavic_pagan_reformed value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Lithuanian pagans before the conversion of Jogaila
						limit = {
							culture = lithuanian
							NOT = { religion_group = european_pagan }
							NOT = { is_year = 1387 }
						}
						change_variable = { which = baltic_pagan_reformed value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Some Lithuanian nobles openly resisted Christianization
						limit = {
							culture = lithuanian
							NOT = { religion_group = european_pagan }
							NOT = { is_year = 1413 }
						}
						change_variable = { which = baltic_pagan_reformed value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Lithuanian peasants resisted Christianization
						limit = {
							culture = lithuanian
							NOT = { religion_group = european_pagan }
							NOT = { is_year = 1550 }
						}
						change_variable = { which = baltic_pagan_reformed value = 2 }
						change_variable = { which = province_religion value = -2 }
						add_province_modifier = { name = syncretism duration = -1 }
					}
					if = { #Slavic people accepted some Paganism during Lithuanian rule
						limit = {
							owned_by = LIT
							OR = {
								culture = polish
								culture = byelorussian
								culture = ruthenian
								culture = ukrainian
							}
							NOT = { religion_group = european_pagan }
							NOT = { is_year = 1550 }
						}
						change_variable = { which = slavic_pagan_reformed value = 2 }
						change_variable = { which = baltic_pagan_reformed value = 1 }
						change_variable = { which = province_religion value = -3 }
					}
					if = { #Some reports of paganism in Prussia
						limit = {
							OR = {
								culture = estonian
								culture = latvian
								culture = old_prussian
								culture = samogitian
							}
							NOT = { religion_group = european_pagan }
							NOT = { is_year = 1550 }
						}
						change_variable = { which = baltic_pagan_reformed value = 2 }
						change_variable = { which = province_religion value = -2 }
						add_province_modifier = { name = syncretism duration = -1 }
					}
					if = { #Natives in the Andes
						limit = {
							region = peru_region
							NOT = { religion_group = new_world_pagan }
							has_owner_religion = yes
						}
						change_variable = { which = inti value = 4 }
						change_variable = { which = province_religion value = -4 }
						add_province_modifier = { name = syncretism duration = -1 }
					}
					if = { #Natives in Mexico
						limit = {
							OR = {
								region = mexico_region #MEIOU
								region = central_america_region
							}
							NOT = { religion_group = new_world_pagan }
							has_owner_religion = yes
						}
						change_variable = { which = nahuatl value = 4 }
						change_variable = { which = province_religion value = -4 }
						add_province_modifier = { name = syncretism duration = -1 }
					}
					if = { #Natives in Latin America
						limit = {
							continent = south_america
							NOT = { region = peru_region }
							NOT = { region = central_america_region }
							NOT = { region = mexico_region } #MEIOU
							NOT = { trade_goods = coffee }
							NOT = { trade_goods = cotton }
							NOT = { trade_goods = sugar }
							NOT = { trade_goods = tobacco }
							NOT = { religion_group = new_world_pagan }
							has_owner_religion = yes
						}
						change_variable = { which = pantheism value = 4 }
						change_variable = { which = province_religion value = -4 }
						add_province_modifier = { name = syncretism duration = -1 }
					}
					if = { #African slaves in the Americas
						limit = {
							OR = {
								continent = north_america
								continent = south_america
							}
							NOT = { region = peru_region }
							OR = {
								region = carribeans_region
								trade_goods = coffee
								trade_goods = cotton
								trade_goods = sugar
								trade_goods = tobacco
							}
							NOT = { religion_group = new_world_pagan }
							has_owner_religion = yes
						}
						change_variable = { which = west_african_pagan_reformed value = 4 }
						change_variable = { which = province_religion value = -4 }
						add_province_modifier = { name = syncretism duration = -1 }
					}
					if = { #Timur seeks out and destroys many Buddhist monasteries in India
						limit = {
							OR = {
								culture_group = rajput
								culture_group = hindusthani
							}
							base_tax = 3
							OR = {
								NOT = { is_year = 1400 }
								has_global_flag = fantasy_scenario_theravada
							}
						}
						change_variable = { which = buddhism value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Buddhists in India decline over time
						limit = {
							OR = {
								culture_group = dravidian
								culture_group = eastern_aryan
							}
							base_tax = 3
							OR = {
								NOT = { is_year = 1500 } #Muslim persecution of Buddhism increases after initial tolerance
								AND = {
									owner = { religion_group = dharmic }
									NOT = { is_year = 1600 } #The last Buddhist monasteries are abandoned in Hindu areas
								}
								owner = { religion_group = taoic }
								has_global_flag = fantasy_scenario_theravada
							}
						}
						change_variable = { which = buddhism value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #The fountain-head of Buddhism
						limit = {
							culture = sinhala
							NOT = { religion = buddhism }
						}
						change_variable = { which = buddhism value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Nepalese Buddhists
						limit = {
							culture_group = pahari_group
							is_year = 1000 #Monks move north to escape Muslim persecution
							NOT = { is_year = 1800 } #Buddhist traditions decay nearly completely
							owner = { religion_group = dharmic }
						}
						change_variable = { which = buddhism value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							culture_group = pahari_group
							is_year = 1000
							NOT = { is_year = 1600 } #Buddhist traditions start to decay as royal favor weakens
							owner = { religion_group = dharmic }
						}
						change_variable = { which = buddhism value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							culture_group = pahari_group
							is_year = 1000 #Monks move north to escape Muslim persecution
							NOT = { is_year = 1300 } #Buddhist monks in Nepal convert to Hinduism and become the banras
							owner = { religion_group = dharmic }
						}
						change_variable = { which = buddhism value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Hindus in Cambodia (left over from the 12th century
						limit = {
							culture = khmer
							NOT = { is_year = 1400 } #Gradually converted to Buddhism
						}
						change_variable = { which = hinduism value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Hindus in Cambodia (left over from the 12th century
						limit = {
							culture = khmer
							NOT = { is_year = 1500 } #Gradually converted to Buddhism
						}
						change_variable = { which = hinduism value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Hindus in Cambodia (left over from the 12th century
						limit = {
							culture = khmer
							NOT = { is_year = 1600 } #Gradually converted to Buddhism
						}
						change_variable = { which = hinduism value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Mahayana Buddhists in Cambodia (left over from the 12th century
						limit = {
							culture = khmer
							NOT = { is_year = 1400 } #Gradually converted to Buddhism
						}
						change_variable = { which = mahayana value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Mahayana Buddhists in Cambodia (left over from the 12th century
						limit = {
							culture = khmer
							NOT = { is_year = 1500 } #Gradually converted to Buddhism
						}
						change_variable = { which = mahayana value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Muslim elites in India, especially in urban areas and Bengal
						limit = {
							indian_region_trigger = yes
							owner = { religion = shiite }
							NOT = { religion = shiite }
							base_production = 1
						}
						change_variable = { which = shiite value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					#		if = { #Hindus remain important even in Muslim India
					#			limit = { indian_region_trigger = yes religion_group = muslim }
					#			change_variable = { which = hinduism value = 6 }
					#			change_variable = { which = province_religion value = -6 }
					#			}
					if = { #Hindus remain a major influence in Bali and Sumatra
						limit = { culture = malayan }
						change_variable = { which = hinduism value = 5 }
						change_variable = { which = province_religion value = -5 }
					}
					if = {
						limit = {
							OR = {
								culture_group = maghreb #remnants of anti-Arab Khariji dynasties
								culture_group = abyssinian_group
								culture_group = somali_group #Ibadi influence in East Africa
								culture_group = swahili_group #Ibadi influence in East Africa
								owner = { religion = ibadi }
							}
							religion = sunni
						}
						change_variable = { which = ibadi value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							OR = { #Syncretic elements in East African Islam
								culture_group = somali_group
								culture_group = swahili_group
							}
							has_port = yes
							religion = sunni
						}
						change_variable = { which = animism value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Fraticelli heretics
						limit = {
							NOT = { is_year = 1428 }
							is_year = 1314 #Fraticelli monks under interdict, refuse to give up monasteries
							religion = catholic
							OR = {
								AND = {
									province_id = 116 #Florence
									NOT = { is_year = 1415 } #Fraticelli banished from Florence
								}
								AND = {
									province_id = 119 #Ancona
									is_year = 1318 #Founder defies excommunication
								}
								AND = {
									OR = {
										province_id = 121 #Napoli
										province_id = 123 #Calabria
									}
									is_year = 1322 #King Robert gives protection to the Fraticelli
									NOT = { is_year = 1363 } #Franciscans take possession of Fraticelli monasteries
								}
							}
						}
						change_variable = { which = heretics value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Fraticelli heretics - strongest in Florence
						limit = {
							province_id = 116 #Florence
							religion = catholic
							NOT = { is_year = 1378 } #First statute against Fraticelli in Florence
							is_year = 1337 #Fraticelli split and form greater opposition to papacy
						}
						change_variable = { which = heretics value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Yazidis near Mosul, Baghdad and Diyarbakir
						limit = {
							OR = {
								culture = kurdish
								culture = iraqi
							}
							base_production = 3
						}
						if = {
							limit = { NOT = { is_year = 1600 } } #Increased conversion to Islam; persecution under the Ottomans
							change_variable = { which = heretics value = 2 }
							change_variable = { which = province_religion value = -2 }
						}
						change_variable = { which = heretics value = 4 } #A Yaziki emir in charge of Soran in 1530; battle vs Yazidis in 1514
						change_variable = { which = province_religion value = -4 }
					}
					if = {
						limit = {
							culture = cham
							NOT = { religion = mahayana }
						}
						change_variable = { which = mahayana value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					random_province = {
						limit = {
							province_id = 2635 #Southern Lebanon
							NOT = { religion = druze }
						}
						change_variable = { which = druze value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = { #Druze
						limit = {
							culture = shami
							has_port = yes
							NOT = { religion = druze }
							NOT = { has_province_flag = jewish_holy_land } #Not southern Palestine
						}
						change_variable = { which = druze value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = {
						limit = {
							culture = shami
							has_port = yes
							NOT = { religion = druze }
							NOT = { is_year = 1305 } #Mamelukes defeat the Druze in Syria and force compliance to Sunni Islam
						}
						change_variable = { which = druze value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							OR = {
								culture = amhara #Ethiopian Orthodox
								culture = owm_armenian #Armenian Orthodox
								culture = ge_armenian
								culture = cilician
							}
							NOT = { religion = coptic }
							NOT = { religion = jewish }
						}
						change_variable = { which = coptic value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = {
						limit = {
							culture = shami
							NOT = { religion = chaldean }
						}
						change_variable = { which = chaldean value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = {
						limit = {
							OR = {
								culture = sapmi
								culture = karelian
							}
							NOT = { religion = finnish_pagan_reformed }
						}
						change_variable = { which = finnish_pagan_reformed value = 6 }
						change_variable = { which = province_religion value = -6 }
					}
					if = {
						limit = {
							OR = { #Suomi in Northern Scandinavia
								culture = sapmi
								any_neighbor_province = { culture = sapmi }
							}
							NOT = { religion = finnish_pagan_reformed }
							NOT = { is_year = 1700 }
						}
						change_variable = { which = finnish_pagan_reformed value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Correction
						limit = { superregion = scandinavian_superregion }
						change_variable = { which = finnish_pagan_reformed which = tengri_pagan_reformed }
						set_variable = { which = tengri_pagan_reformed value = 0 }
					}
					if = {
						limit = { #Waldensians in Dauphin and Savoy
							culture = occitain
							religion_group = christian
							any_neighbor_province = { culture_group = latin }
							NOT = { has_port = yes }
							NOT = { religion = reformed } #The Waldensian heresy converted to Huguenots later
							NOT = { is_year = 1685 } #Revocation of the Edict of Nantes
						}
						change_variable = { which = heretics value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = {
						limit = { #Waldensians in Piedmonte
							culture_group = latin
							religion_group = christian
							any_neighbor_province = { OR = { culture_group = langue_d_oil culture_group = langue_d_oc } }
							NOT = { has_port = yes }
							NOT = { religion = reformed } #The Waldensian heresy converted to Huguenots later
							NOT = { is_year = 1487 } #Crusade against the Waldenses
						}
						change_variable = { which = heretics value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							culture_group = malay
							NOT = { culture = polynesian }
							NOT = { religion = animism }
						}
						change_variable = { which = animism value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							culture_group = malay
							NOT = { culture = polynesian }
							NOT = { religion = buddhism }
						}
						change_variable = { which = buddhism value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							culture_group = malay
							NOT = { culture = polynesian }
							NOT = { religion = hinduism }
						}
						change_variable = { which = hinduism value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = { #Zoroastrians fleeing Persia after the fall of the Sassanid dynasty
						limit = {
							area = gujarat_area
							has_port = yes
							NOT = { religion = zoroastrian }
							NOT = { has_global_flag = fantasy_scenario_persia }
							is_year = 785 #Traditional date
						}
						change_variable = { which = zoroastrian value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = { #by the beginning of the Safavid dynasty, nearly one-fifth of Persians remained Zoroastrians
						limit = {
							culture_group = persian_group
							NOT = { culture = kurdish }
							NOT = { religion = zoroastrian }
							NOT = { is_year = 1500 } #Safavid persecution of Zoroastrians
							NOT = { has_global_flag = fantasy_scenario_persia }
						}
						change_variable = { which = zoroastrian value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							OR = {
								culture_group = rajput #Parsees
								culture_group = hindusthani #Parsees
							}
							base_production = 2 #Tended to be concentrated in cities
							NOT = { religion = zoroastrian }
							is_year = 1500 #Another wave of Zoroastrians fled to India during the Safavid persecutions
							NOT = { has_global_flag = fantasy_scenario_persia }
						}
						change_variable = { which = zoroastrian value = 1 }
						change_variable = { which = province_religion value = -1 }
					}
					if = {
						limit = {
							culture_group = persian_group
							NOT = { culture = kurdish }
							NOT = { religion = zoroastrian }
							OR = {
								province_id = 432 #Kerman - center of Zoroastrianism even after the Safavid persecution
								province_id = 433 #Yazd (many Zoroastrians fled south there during the Mongol invasions)
							}
							NOT = { has_global_flag = fantasy_scenario_persia }
						}
						change_variable = { which = zoroastrian value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = {
						limit = {
							culture_group = persian_group
							NOT = { culture = kurdish }
							NOT = { religion = zoroastrian }
							NOT = { is_year = 1700 } #Shah Sultan Hossein's slaughter of Zoroastrians in Ifsahan, Gabrabad, Nayin and Anarak
							NOT = { has_global_flag = fantasy_scenario_persia }
						}
						change_variable = { which = zoroastrian value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							OR = {
								culture = gujarati #Parsees
								culture_group = rajput #Parsees
								culture_group = hindusthani #Parsees
							}
							base_production = 2 #Tended to be concentrated in large cities
							NOT = { religion = zoroastrian }
							NOT = { has_global_flag = fantasy_scenario_persia }
						}
						change_variable = { which = zoroastrian value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					#Hindus in Sindh
					if = {
						limit = {
							OR = { area = lower_sindh_area area = upper_sindh_area }
							NOT = { religion = hinduism }
						}
						change_variable = { which = hinduism value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					#Jains in India
					if = {
						limit = {
							OR = { #30% of modern-day Maharashtra is Jain today
								area = maharashtra_area
								area = daulatabad_area
							}
							NOT = { religion = jain }
						}
						change_variable = { which = jain value = 4 }
						change_variable = { which = province_religion value = -4 }
					}
					if = {
						limit = {
							OR = { #All parts of India with 10-15% Jain populations today (as well as overlap with last section)
								region = rajputana_region
								region = gujarat_region
								region = east_deccan_region
								region = west_deccan_region
								region = western_ghats_region
								region = central_india_region
								region = konkan_region
							}
							NOT = { religion = jain }
						}
						change_variable = { which = jain value = 2 }
						change_variable = { which = province_religion value = -2 }
					}
					if = {
						limit = {
							OR = {
								culture_group = chinese_group
								culture = korean
							}
							NOT = {
								OR = {
									any_neighbor_province = { culture_group = altaic }
									any_neighbor_province = { culture_group = tartar_group }
									any_neighbor_province = { culture_group = burman }
									any_neighbor_province = { any_neighbor_province = { culture_group = altaic } }
									any_neighbor_province = { any_neighbor_province = { culture_group = burman } }
									any_neighbor_province = { any_neighbor_province = { culture_group = tartar_group } }
								}
							}
							NOT = {
								OR = {
									any_neighbor_province = { religion = buddhism }
									any_neighbor_province = { any_neighbor_province = { religion = buddhism } }
								}
							}
							NOT = { religion = mahayana }
							NOT = { religion = buddhism }
							NOT = { religion = vajrayana }
						}
						change_variable = { which = province_religion value = -5 }
						change_variable = { which = mahayana value = 5 }
					}
					if = {
						limit = {
							OR = {
								culture_group = chinese_group
								culture = korean
							}
							OR = {
								any_neighbor_province = { culture_group = altaic }
								any_neighbor_province = { culture_group = tartar_group }
								any_neighbor_province = { culture_group = burman }
								any_neighbor_province = { any_neighbor_province = { culture_group = altaic } }
								any_neighbor_province = { any_neighbor_province = { culture_group = tartar_group } }
								any_neighbor_province = { any_neighbor_province = { culture_group = burman } }
							}
							NOT = {
								OR = {
									any_neighbor_province = { religion = buddhism }
									any_neighbor_province = { any_neighbor_province = { religion = buddhism } }
								}
							}
							NOT = { religion = mahayana }
							NOT = { religion = buddhism }
							NOT = { religion = vajrayana }
						}
						change_variable = { which = province_religion value = -5 }
						change_variable = { which = vajrayana value = 5 }
					}
					if = {
						limit = {
							OR = {
								culture_group = chinese_group
								culture = korean
							}
							OR = {
								any_neighbor_province = { religion = buddhism }
								any_neighbor_province = { any_neighbor_province = { religion = buddhism } }
							}
							NOT = { religion = mahayana }
							NOT = { religion = buddhism }
							NOT = { religion = vajrayana }
						}
						change_variable = { which = province_religion value = -5 }
						change_variable = { which = buddhism value = 5 }
					}
					if = {
						limit = {
							OR = {
								culture_group = chinese_group
								culture = korean
							}
							OR = {
								any_neighbor_province = { religion = mahayana }
								any_neighbor_province = { any_neighbor_province = { religion = shinto } }
							}
							NOT = { religion = mahayana }
							NOT = { religion = buddhism }
							NOT = { religion = vajrayana }
						}
						change_variable = { which = province_religion value = -5 }
						change_variable = { which = mahayana value = 5 }
					}
					if = {
						limit = {
							OR = {
								culture_group = chinese_group
								culture = korean
							}
							OR = {
								any_neighbor_province = { religion = vajrayana }
								any_neighbor_province = { any_neighbor_province = { religion = vajrayana } }
							}
							NOT = { religion = mahayana }
							NOT = { religion = buddhism }
							NOT = { religion = vajrayana }
						}
						change_variable = { which = province_religion value = -5 }
						change_variable = { which = vajrayana value = 5 }
					}
					if = {
						limit = {
							OR = {
								culture_group = chinese_group
								culture = korean
								culture = vietnamese
							}
							NOT = { religion = confucianism }
						}
						change_variable = { which = province_religion value = -3 }
						change_variable = { which = confucianism value = 3 }
					}
					if = {
						limit = {
							culture = korean
							NOT = { religion = tengri_pagan_reformed }
						}
						change_variable = { which = province_religion value = -4 }
						change_variable = { which = tengri_pagan_reformed value = 4 }
					}
					if = {
						limit = {
							japanese_culture_trigger = yes
							NOT = { religion = confucianism }
						}
						change_variable = { which = province_religion value = -1 }
						change_variable = { which = confucianism value = 1 }
					}
					if = {
						limit = {
							japanese_culture_trigger = yes
							religion = mahayana
						}
						change_variable = { which = province_religion value = -6 }
						change_variable = { which = shinto value = 6 }
					}
					if = {
						limit = {
							has_port = yes
							religion = hinduism
						}
						change_variable = { which = province_religion value = -2 }
						change_variable = { which = sunni value = 2 }
					}
					if = {
						limit = {
							culture_group = iberian
							any_neighbor_province = { religion = sunni }
							NOT = { religion = sunni }
						}
						change_variable = { which = province_religion value = -3 }
						change_variable = { which = sunni value = 3 }
					}
					if = {
						limit = {
							culture_group = tartar_group
							NOT = { religion = tengri_pagan_reformed }
						}
						change_variable = { which = province_religion value = -4 }
						change_variable = { which = tengri_pagan_reformed value = 4 }
					}
					if = {
						limit = {
							culture = hlai
							NOT = { religion = buddhism }
						}
						change_variable = { which = province_religion value = -6 }
						change_variable = { which = buddhism value = 6 }
					}
				}
				every_province = {
					limit = {
						has_owner_religion = yes
						NOT = { check_variable = { which = province_religion value = 10 } }
					}
					change_variable = { which = converted_heathens value = 2 }
				}
				every_province = {
					limit = {
						is_capital = yes
						has_owner_religion = yes
						NOT = { check_variable = { which = province_religion value = 12 } }
					}
					change_variable = { which = converted_heathens value = 3 }
				}
				every_province = {
					limit = { NOT = { check_variable = { which = province_religion value = 7 } } }
					set_province_flag = religious_change
				}
				every_province = {
					limit = {
						check_variable = { which = province_religion value = 1 }
					}
					trigger_switch = {
						on_trigger = religion
						catholic = {
							change_variable = { which = catholic which = province_religion }
						}
						orthodox = {
							change_variable = { which = orthodox which = province_religion }
						}
						coptic = {
							change_variable = { which = coptic which = province_religion }
						}
						chaldean = {
							change_variable = { which = chaldean which = province_religion }
						}
						hussite = {
							change_variable = { which = hussite which = province_religion }
						}
						protestant = {
							change_variable = { which = protestant which = province_religion }
						}
						reformed = {
							change_variable = { which = reformed which = province_religion }
						}
						gnostic = {
							change_variable = { which = gnostic which = province_religion }
						}
						jewish = {
							change_variable = { which = jewish which = province_religion }
						}
						sunni = {
							change_variable = { which = sunni which = province_religion }
						}
						shiite = {
							change_variable = { which = shiite which = province_religion }
						}
						ibadi = {
							change_variable = { which = ibadi which = province_religion }
						}
						wahhabi = {
							change_variable = { which = wahhabi which = province_religion }
						}
						druze = {
							change_variable = { which = druze which = province_religion }
						}
						hinduism = {
							change_variable = { which = hinduism which = province_religion }
						}
						sikhism = {
							change_variable = { which = sikhism which = province_religion }
						}
						jain = {
							change_variable = { which = jain which = province_religion }
						}
						zoroastrian = {
							change_variable = { which = zoroastrian which = province_religion }
						}
						adi_dharam = {
							change_variable = { which = adi_dharam which = province_religion }
						}
						confucianism = {
							change_variable = { which = confucianism which = province_religion }
						}
						buddhism = {
							change_variable = { which = buddhism which = province_religion }
						}
						shinto = {
							change_variable = { which = shinto which = province_religion }
						}
						mahayana = {
							change_variable = { which = mahayana which = province_religion }
						}
						vajrayana = {
							change_variable = { which = vajrayana which = province_religion }
						}
						nahuatl = {
							change_variable = { which = nahuatl which = province_religion }
						}
						mesoamerican_religion = {
							change_variable = { which = mesoamerican_religion which = province_religion }
						}
						inti = {
							change_variable = { which = inti which = province_religion }
						}
						pantheism = {
							change_variable = { which = pantheism which = province_religion }
						}
						totemism = {
							change_variable = { which = totemism which = province_religion }
						}
						polynesian_religion = {
							change_variable = { which = polynesian_religion which = province_religion }
						}
						animism = {
							change_variable = { which = animism which = province_religion }
						}
						shamanism = {
							change_variable = { which = shamanism which = province_religion }
						}
						tengri_pagan_reformed = {
							change_variable = { which = tengri_pagan_reformed which = province_religion }
						}
						west_african_pagan_reformed = {
							change_variable = { which = west_african_pagan_reformed which = province_religion }
						}
						hellenic_pagan = {
							change_variable = { which = hellenic_pagan which = province_religion }
						}
						norse_pagan_reformed = {
							change_variable = { which = norse_pagan_reformed which = province_religion }
						}
						slavic_pagan_reformed = {
							change_variable = { which = slavic_pagan_reformed which = province_religion }
						}
						finnish_pagan_reformed = {
							change_variable = { which = finnish_pagan_reformed which = province_religion }
						}
						baltic_pagan_reformed = {
							change_variable = { which = baltic_pagan_reformed which = province_religion }
						}
					}
					set_variable = { which = province_religion value = 0 }
				}
				every_province = {
					limit = { NOT = { is_city = yes } }
					set_variable = { which = province_religion value = 0 }
					set_variable = { which = catholic value = 0 }
					set_variable = { which = protestant value = 0 }
					set_variable = { which = reformed value = 0 }
					set_variable = { which = gnostic value = 0 }
					set_variable = { which = chaldean value = 0 }
					set_variable = { which = hussite value = 0 }
					set_variable = { which = coptic value = 0 }
					set_variable = { which = orthodox value = 0 }
					set_variable = { which = jewish value = 0 }
					set_variable = { which = sunni value = 0 }
					set_variable = { which = shiite value = 0 }
					set_variable = { which = druze value = 0 }
					set_variable = { which = ibadi value = 0 }
					set_variable = { which = wahhabi value = 0 }
					set_variable = { which = hinduism value = 0 }
					set_variable = { which = sikhism value = 0 }
					set_variable = { which = jain value = 0 }
					set_variable = { which = adi_dharam value = 0 }
					set_variable = { which = zoroastrian value = 0 }
					set_variable = { which = confucianism value = 0 }
					set_variable = { which = buddhism value = 0 }
					set_variable = { which = shinto value = 0 }
					set_variable = { which = mahayana value = 0 }
					set_variable = { which = vajrayana value = 0 }
					set_variable = { which = nahuatl value = 0 }
					set_variable = { which = mesoamerican_religion value = 0 }
					set_variable = { which = inti value = 0 }
					set_variable = { which = totemism value = 0 }
					set_variable = { which = pantheism value = 0 }
					set_variable = { which = hellenic_pagan value = 0 }
					set_variable = { which = polynesian_religion value = 0 }
					set_variable = { which = norse_pagan_reformed value = 0 }
					set_variable = { which = slavic_pagan_reformed value = 0 }
					set_variable = { which = finnish_pagan_reformed value = 0 }
					set_variable = { which = baltic_pagan_reformed value = 0 }
					set_variable = { which = animism value = 0 }
					set_variable = { which = shamanism value = 0 }
					set_variable = { which = tengri_pagan_reformed value = 0 }
					set_variable = { which = west_african_pagan_reformed value = 0 }
				}
			} #End if
			#Set province plurality flags
			every_province = {
				limit = {
					is_city = yes
				}
				trigger_switch = {
					on_trigger = religion
					catholic = {
						set_province_flag = catholic_province
					}
					orthodox = {
						set_province_flag = orthodox_province
					}
					coptic = {
						set_province_flag = coptic_province
					}
					chaldean = {
						set_province_flag = chaldean_province
					}
					hussite = {
						set_province_flag = hussite_province
					}
					protestant = {
						set_province_flag = protestant_province
					}
					reformed = {
						set_province_flag = reformed_province
					}
					gnostic = {
						set_province_flag = gnostic_province
					}
					jewish = {
						set_province_flag = jewish_province
					}
					sunni = {
						set_province_flag = sunni_province
					}
					shiite = {
						set_province_flag = shiite_province
					}
					ibadi = {
						set_province_flag = ibadi_province
					}
					wahhabi = {
						set_province_flag = wahhabi_province
					}
					druze = {
						set_province_flag = druze_province
					}
					hinduism = {
						set_province_flag = hinduism_province
					}
					sikhism = {
						set_province_flag = sikhism_province
					}
					jain = {
						set_province_flag = jain_province
					}
					zoroastrian = {
						set_province_flag = zoroastrian_province
					}
					adi_dharam = {
						set_province_flag = adi_dharam_province
					}
					confucianism = {
						set_province_flag = confucianism_province
					}
					buddhism = {
						set_province_flag = buddhism_province
					}
					shinto = {
						set_province_flag = shinto_province
					}
					mahayana = {
						set_province_flag = mahayana_province
					}
					vajrayana = {
						set_province_flag = vajrayana_province
					}
					nahuatl = {
						set_province_flag = nahuatl_province
					}
					mesoamerican_religion = {
						set_province_flag = mesoamerican_religion_province
					}
					inti = {
						set_province_flag = inti_province
					}
					pantheism = {
						set_province_flag = pantheism_province
					}
					totemism = {
						set_province_flag = totemism_province
					}
					polynesian_religion = {
						set_province_flag = polynesian_religion_province
					}
					animism = {
						set_province_flag = animism_province
					}
					shamanism = {
						set_province_flag = shamanism_province
					}
					tengri_pagan_reformed = {
						set_province_flag = tengri_pagan_reformed_province
					}
					west_african_pagan_reformed = {
						set_province_flag = west_african_pagan_reformed_province
					}
					hellenic_pagan = {
						set_province_flag = hellenic_pagan_province
					}
					norse_pagan_reformed = {
						set_province_flag = norse_pagan_reformed_province
					}
					slavic_pagan_reformed = {
						set_province_flag = slavic_pagan_reformed_province
					}
					finnish_pagan_reformed = {
						set_province_flag = finnish_pagan_reformed_province
					}
					baltic_pagan_reformed = {
						set_province_flag = baltic_pagan_reformed_province
					}
				}
			}
			###END historical setup
			every_country = {
				every_owned_province = {
					#Jewish cultures
					if = {
						limit = { check_variable = { which = jewish value = 2 } }
						if = {
							limit = {
								OR = {
									near_east_region_trigger = yes
									region = egypt_region
									persia_region_trigger = yes
									indian_region_trigger = yes
									continent = east_asia
									continent = southeast_asia
								}
							}
							set_province_flag = mizrahi_jews
						}
						if = {
							limit = {
								OR = {
									region = aragon_region
									region = castille_region
									region = leon_region
									region = andalucia_region
									region = portugal_region
									area = macaronesia_area
									region = north_anatolia_region
									region = south_anatolia_region
									region = armenia_region
									region = caucasia_region
									region = west_balkan_region
									region = east_balkan_region
									north_africa_region_trigger = yes
									continent = sub_sahara
								}
								NOT = { has_province_flag = mizrahi_jews }
							}
							set_province_flag = sephardic_jews
						}
						if = {
							limit = {
								continent = europe
								NOT = { has_province_flag = sephardic_jews }
								NOT = { has_province_flag = mizrahi_jews }
							}
							set_province_flag = ashkenazi_jews
						}
					}
				}
				
				#Applying religious minority modifiers
				every_owned_province = {
					limit = {
						is_city = yes
					}
					province_event = { id = dg_conversion.99 }
				}
				
				#Final adjustment
				every_owned_province = {
					limit = { is_capital = yes has_owner_religion = no }
					every_neighbor_province = {
						limit = { owned_by = ROOT has_owner_religion = yes }
						PREV = { change_variable = { which = converted_heathens value = 1 } }
					}
				}
			}
		} #END HIDDEN EFFECT AND RELIGIOUS MINORITY SETUP
		#Religious history setup event
		random_country = {
			limit = {
				ai = yes
				religion = catholic
			}
			country_event = { id = dg_setup.004 days = 0 }
		}
		#Starting Religious leadership
		set_global_flag = dei_gratia
		set_global_flag = religious_minority_system
		set_global_flag = speed_over_religion #Defaults to this, but player can change it
	} #End immediate
	
	option = {
		name = dg_setup.001.a
	}
}

country_event = { #A new $MONARCH$
	
	id = dg_setup.003
	title = dg_setup.003.t
	desc = dg_setup.003.d
	picture = DEATH_OF_HEIR_eventPicture
	
	is_triggered_only = yes
	
	hidden = yes
	
	trigger = {
		OR = { has_regency = no has_consort_regency = yes }
	}
	
	immediate = {
		hidden_effect = {
			if = {
				limit = { religion = zoroastrian }
				if = {
					limit = { piety = -0.60 }
					random = { chance = 10 set_country_flag = zoroastrian_philanthropy }
					if = {
						limit = { piety = -0.20 }
						random = { chance = 10 set_country_flag = zoroastrian_philanthropy }
						if = {
							limit = { piety = 0.20 }
							random = { chance = 10 set_country_flag = zoroastrian_philanthropy }
							if = {
								limit = { piety = 0.60 }
								random = { chance = 10 set_country_flag = zoroastrian_philanthropy }
							}
						}
					}
					if = {
						limit = { has_country_flag = zoroastrian_philanthropy }
						if = {
							limit = { OR = { has_country_flag = last_ruler_fanatical has_country_flag = last_ruler_pious } }
							set_country_flag = zoroastrian_philanthropy_closed
						}
						clr_country_flag = zoroastrian_philanthropy
						country_event = { id = dg_zoroastrian.026 days = 30 random = 180 }
					}
				}
			}
			clr_country_flag = last_ruler_fanatical
			clr_country_flag = last_ruler_pious
			clr_country_flag = last_ruler_observant
			clr_country_flag = last_ruler_cynical
			clr_country_flag = last_ruler_unbeliever
			if = {
				limit = { has_country_flag = ruler_piety_fanatical }
				clr_country_flag = ruler_piety_fanatical
				set_country_flag = last_ruler_fanatical
				add_piety = -0.20
			}
			if = {
				limit = { has_country_flag = ruler_piety_pious }
				clr_country_flag = ruler_piety_pious
				set_country_flag = last_ruler_pious
				add_piety = -0.10
			}
			if = {
				limit = { has_country_flag = ruler_piety_observant }
				clr_country_flag = ruler_piety_observant
				set_country_flag = last_ruler_observant
			}
			if = {
				limit = { has_country_flag = ruler_piety_cynical }
				clr_country_flag = ruler_piety_cynical
				set_country_flag = last_ruler_cynical
				add_piety = 0.10
			}
			if = {
				limit = { has_country_flag = ruler_piety_unbeliever }
				clr_country_flag = ruler_piety_unbeliever
				set_country_flag = last_ruler_unbeliever
				add_piety = 0.20
			}
			random_list = {
				10 = { set_country_flag = ruler_piety_fanatical }
				10 = { set_country_flag = ruler_piety_pious }
				10 = { set_country_flag = ruler_piety_observant }
				10 = { set_country_flag = ruler_piety_cynical }
				10 = { set_country_flag = ruler_piety_unbeliever }
				20 = { #Appropriate for the country
					if = {
						limit = { piety = 0.60 }
						set_country_flag = ruler_piety_fanatical
					}
					if = {
						limit = { piety = 0.20 NOT = { piety = 0.60 } }
						set_country_flag = ruler_piety_pious
					}
					if = {
						limit = { piety = -0.20 NOT = { piety = 0.20 } }
						set_country_flag = ruler_piety_observant
					}
					if = {
						limit = { piety = -0.60 NOT = { piety = -0.20 } }
						set_country_flag = ruler_piety_cynical
					}
					if = {
						limit = { NOT = { piety = -0.60 } }
						set_country_flag = ruler_piety_unbeliever
					}
				}
				15 = { #More religious than the norm
					if = {
						limit = { piety = 0.20 }
						set_country_flag = ruler_piety_fanatical
					}
					if = {
						limit = { piety = -0.20 NOT = { piety = 0.20 } }
						set_country_flag = ruler_piety_pious
					}
					if = {
						limit = { piety = -0.60 NOT = { piety = -0.20 } }
						set_country_flag = ruler_piety_observant
					}
					if = {
						limit = { NOT = { piety = -0.60 } }
						set_country_flag = ruler_piety_cynical
					}
				}
				15 = { #Less religious than the norm
					if = {
						limit = { piety = 0.60 }
						set_country_flag = ruler_piety_pious
					}
					if = {
						limit = { piety = 0.20 NOT = { piety = 0.60 } }
						set_country_flag = ruler_piety_observant
					}
					if = {
						limit = { piety = -0.20 NOT = { piety = 0.20 } }
						set_country_flag = ruler_piety_cynical
					}
					if = {
						limit = { NOT = { piety = -0.20 } }
						set_country_flag = ruler_piety_unbeliever
					}
				}
			}
			
			#country_event = { id = dg_piety.044 }
		}
		
		if = {
			limit = {
				religion_group = muslim
				NOT = { religion = druze }
			}
			if = {
				limit = {
					NOT = { has_country_flag = christians_tolerated }
					any_owned_province = { religion_group = christian }
				}
				country_event = { id = dg_islam.081 days = 30 }
			}
			if = {
				limit = {
					NOT = { has_country_flag = jews_tolerated }
					any_owned_province = { religion_group = jewish_group }
				}
				country_event = { id = dg_islam.082 days = 30 }
			}
			if = {
				limit = {
					NOT = { has_country_flag = dharmics_tolerated }
					any_owned_province = { religion_group = dharmic }
				}
				country_event = { id = dg_islam.083 days = 30 }
			}
			if = {
				limit = {
					NOT = { has_country_flag = buddhists_tolerated }
					any_owned_province = { religion_group = taoic }
				}
				country_event = { id = dg_islam.084 days = 30 }
			}
			if = {
				limit = {
					NOT = { has_country_flag = pagans_tolerated }
					any_owned_province = { religion_group = pagan }
				}
				country_event = { id = dg_islam.085 days = 30 }
			}
			if = {
				limit = {
					NOT = { has_country_flag = european_pagans_tolerated }
					any_owned_province = { religion_group = european_pagan }
				}
				country_event = { id = dg_islam.086 days = 30 }
			}
			if = {
				limit = {
					NOT = { has_country_flag = new_world_pagans_tolerated }
					any_owned_province = { religion_group = new_world_pagan }
				}
				country_event = { id = dg_islam.087 days = 30 }
			}
		}
		if = {
			limit = {
				religion = vajrayana
				government = theocracy
				OR = { has_regency = no has_consort_regency = yes }
			}
			set_country_flag = supreme_lama
		}
		if = {
			limit = { tag = PAP }
			hidden_effect = {
				random_list = {
					20 = { PAP = { set_variable = { which = papal_election_result value = -2 } } }
					20 = { PAP = { set_variable = { which = papal_election_result value = -1 } } }
					20 = { PAP = { set_variable = { which = papal_election_result value = 0 } } }
					20 = { PAP = { set_variable = { which = papal_election_result value = 1 } } }
					20 = { PAP = { set_variable = { which = papal_election_result value = 2 } } }
				}
				if = {
					limit = { PAP = { has_country_flag = conclave_reform } }
					change_variable = { which = papal_election_result value = -1 }
				}
				if = {
					limit = { PAP = { has_country_flag = last_pope_reformer } }
					change_variable = { which = papal_election_result value = 1 }
				}
				if = {
					limit = { PAP = { has_country_flag = last_pope_corrupt } }
					change_variable = { which = papal_election_result value = -1 }
				}
				if = {
					limit = {
						any_country = {
							is_papal_controller = yes
							overlord_of = PAP
						}
					}
					change_variable = { which = papal_election_result value = 1 }
				}
				if = {
					limit = {
						any_country = {
							is_papal_controller = yes
							has_country_flag = constantine_donation_cf
						}
					}
					change_variable = { which = papal_election_result value = 1 }
				}
				if = {
					limit = {
						any_country = {
							is_papal_controller = yes
							piety = 0.60
						}
					}
					change_variable = { which = papal_election_result value = -0.5 }
				}
				if = {
					limit = {
						any_country = {
							is_papal_controller = yes
							piety = 0.20
						}
					}
					change_variable = { which = papal_election_result value = -0.5 }
				}
				if = {
					limit = {
						any_country = {
							is_papal_controller = yes
							NOT = { piety = -0.20 }
						}
					}
					change_variable = { which = papal_election_result value = 0.5 }
				}
				if = {
					limit = {
						any_country = {
							is_papal_controller = yes
							NOT = { piety = -0.60 }
						}
					}
					change_variable = { which = papal_election_result value = 0.5 }
				}
				if = {
					limit = { NOT = { is_religion_enabled = protestant } }
					change_variable = { which = papal_election_result value = 0.5 }
				}
				if = {
					limit = { is_religion_enabled = reformed }
					change_variable = { which = papal_election_result value = -0.5 }
				}
			}
			if = {
				limit = { PAP = { is_papal_controller = yes } }
				if = {
					limit = { check_variable = { which = papal_election_result value = 0 } }
					country_event = { id = dg_pope.004 days = 0 }
				}
				if = {
					limit = { NOT = { check_variable = { which = papal_election_result value = 0 } } }
					country_event = { id = dg_pope.005 days = 0 }
				}
			}
			if = {
				limit = { PAP = { NOT = { is_papal_controller = yes } } }
				if = {
					limit = { check_variable = { which = papal_election_result value = 0 } }
					random_country = {
						limit = { is_papal_controller = yes }
						country_event = { id = dg_pope.004 days = 0 }
					}
				}
				if = {
					limit = { NOT = { check_variable = { which = papal_election_result value = 0 } } }
					random_country = {
						limit = { is_papal_controller = yes }
						country_event = { id = dg_pope.005 days = 0 }
					}
				}
			}
			hidden_effect = { set_variable = { which = papal_election_result value = 0 } }
		}
		hidden_effect = {
			#Personality of religious leader
			if = {
				limit = {
					OR = {
						government = theocracy
						AND = {
							has_country_flag = ruler_as_caliph
							religion = sunni
						}
					}
				}
				clr_country_flag = clerical_advisor
				clr_country_flag = patriarch_zealous
				clr_country_flag = patriarch_theologian
				clr_country_flag = patriarch_obedient
				clr_country_flag = patriarch_controversial
				clr_country_flag = patriarch_corrupt
				clr_country_flag = patriarch_hostile
				clr_country_flag = patriarch_appointed
				clr_country_flag = holy_synod
				if = {
					limit = {
						tag = PAP
						has_country_flag = corrupt_pope
					}
					random = {
						chance = 50
						set_country_flag = patriarch_corrupt
						set_country_flag = patriarch_personality
					}
				}
				if = {
					limit = {
						MIL = 6
						NOT = { has_country_flag = patriarch_personality }
					}
					random = { chance = 15 set_country_flag = patriarch_zealous set_country_flag = patriarch_personality }
				}
				if = {
					limit = {
						ADM = 6
						NOT = { has_country_flag = patriarch_personality }
					}
					random = { chance = 15 set_country_flag = patriarch_theologian set_country_flag = patriarch_personality }
				}
				if = {
					limit = {
						MIL = 5
						NOT = { has_country_flag = patriarch_personality }
					}
					random = { chance = 15 set_country_flag = patriarch_zealous set_country_flag = patriarch_personality }
				}
				if = {
					limit = {
						ADM = 5
						NOT = { has_country_flag = patriarch_personality }
					}
					random = { chance = 15 set_country_flag = patriarch_theologian set_country_flag = patriarch_personality }
				}
				if = {
					limit = {
						MIL = 4
						NOT = { has_country_flag = patriarch_personality }
					}
					random = { chance = 12 set_country_flag = patriarch_zealous set_country_flag = patriarch_personality }
				}
				if = {
					limit = {
						ADM = 4
						NOT = { has_country_flag = patriarch_personality }
					}
					random = { chance = 12 set_country_flag = patriarch_theologian set_country_flag = patriarch_personality }
				}
				if = {
					limit = {
						MIL = 3
						NOT = { has_country_flag = patriarch_personality }
					}
					random = { chance = 12 set_country_flag = patriarch_zealous set_country_flag = patriarch_personality }
				}
				if = {
					limit = {
						ADM = 3
						NOT = { has_country_flag = patriarch_personality }
					}
					random = { chance = 12 set_country_flag = patriarch_theologian set_country_flag = patriarch_personality }
				}
				if = {
					limit = {
						MIL = 2
						NOT = { has_country_flag = patriarch_personality }
					}
					random = { chance = 10 set_country_flag = patriarch_zealous set_country_flag = patriarch_personality }
				}
				if = {
					limit = {
						ADM = 2
						NOT = { has_country_flag = patriarch_personality }
					}
					random = { chance = 10 set_country_flag = patriarch_theologian set_country_flag = patriarch_personality }
				}
				if = {
					limit = {
						NOT = { ADM = 4 }
						NOT = { DIP = 4 }
						NOT = { MIL = 4 }
						NOT = { has_country_flag = patriarch_personality }
					}
					random = { chance = 12 set_country_flag = patriarch_corrupt set_country_flag = patriarch_personality }
				}
				if = {
					limit = {
						NOT = { ADM = 3 }
						NOT = { DIP = 3 }
						NOT = { MIL = 3 }
						NOT = { has_country_flag = patriarch_personality }
					}
					random = { chance = 12 set_country_flag = patriarch_corrupt set_country_flag = patriarch_personality }
				}
				if = {
					limit = {
						NOT = { ADM = 2 }
						NOT = { DIP = 2 }
						NOT = { MIL = 2 }
						NOT = { has_country_flag = patriarch_personality }
					}
					random = { chance = 15 set_country_flag = patriarch_corrupt set_country_flag = patriarch_personality }
				}
				if = {
					limit = {
						NOT = { ADM = 1 }
						NOT = { DIP = 1 }
						NOT = { MIL = 1 }
						NOT = { has_country_flag = patriarch_personality }
					}
					random = { chance = 15 set_country_flag = patriarch_corrupt set_country_flag = patriarch_personality }
				}
				if = {
					limit = { NOT = { has_country_flag = patriarch_personality } }
					set_country_flag = patriarch_controversial
				}
				clr_country_flag = patriarch_personality
				dg_patriarch_triggers = yes
			}
			###CLEAR RULER-SPECIFIC FLAGS
			#All religion events
			clr_country_flag = reconsidered_expulsion
			clr_country_flag = emergency_tithe_offered
			clr_country_flag = policy_of_intolerance
			clr_country_flag = great_temple_workers
			clr_country_flag = apostate_ruler
			clr_country_flag = defender_of_the_faith_choice
			clr_country_flag = blasphemy_reaction_impious
			clr_country_flag = blasphemy_reaction_pious
			clr_country_flag = ruler_versus_church
			clr_country_flag = minority_scapegoat
			clr_country_flag = donated_land_to_church
			clr_country_flag = divorced_ruler
			clr_country_flag = holy_war_declared
			clr_country_flag = omens_read
			clr_country_flag = divine_right_of_kings
			clr_country_flag = endowed_churches
			every_country = {
				limit = {
					exists = yes
					OR = {
						has_opinion_modifier = { who = ROOT modifier = intermarriage_refused }
						reverse_has_opinion_modifier = { who = ROOT modifier = intermarriage_refused }
					}
				}
				remove_opinion = { who = ROOT modifier = intermarriage_refused }
				reverse_remove_opinion = { who = ROOT modifier = intermarriage_refused }
			}
			every_country = {
				limit = {
					exists = yes
					has_opinion_modifier = { who = ROOT modifier = same_doctrine_fanatical }
				}
				remove_opinion = { who = ROOT modifier = same_doctrine_fanatical }
			}
			every_country = {
				limit = {
					exists = yes
					has_opinion_modifier = { who = ROOT modifier = same_doctrine_pious }
				}
				remove_opinion = { who = ROOT modifier = same_doctrine_pious }
			}
			every_country = {
				limit = {
					exists = yes
					has_opinion_modifier = { who = ROOT modifier = same_doctrine_observant }
				}
				remove_opinion = { who = ROOT modifier = same_doctrine_observant }
			}
			#Succession Crises
			clr_country_flag = co_rulers
			clr_country_flag = co_ruler_adm
			clr_country_flag = co_ruler_dip
			clr_country_flag = co_ruler_mil
			clr_country_flag = co_ruler_all
			if = {
				limit = { had_country_flag = { flag = ruler_fled days = 1000 } }
				clr_country_flag = ruler_fled
			}
			if = {
				limit = { had_country_flag = { flag = rival_claimnant days = 1000 } }
				clr_country_flag = rival_claimnant
			}
			if = {
				limit = {
					has_new_dynasty = yes
					OR = {
						has_country_flag = ruler_fled
						has_country_flag = rival_claimnant
					}
				}
				country_event = { id = dg_succession.014 days = 0 }
			}
			#Muslim events
			clr_country_flag = ordered_destruction_of_kaaba
			clr_country_flag = hajj_undertaken
			clr_country_flag = hajj_refused
			clr_country_flag = hajj_promised
			clr_country_flag = madhhab_neutral
			clr_country_flag = strict_dhimmi
			clr_country_flag = supported_sikhisms
			clr_country_flag = sharia
			clr_country_flag = dervish_warriors
			clr_country_flag = caliph_investiture
			clr_country_flag = jihad_called
			clr_country_flag = jihad_vow
			clr_country_flag = ports_closed_to_islam
			clr_country_flag = limited_sharia
			remove_country_modifier = hajj_timer
			if = {
				limit = { religion_group = muslim }
				clr_country_flag = christians_permitted
				clr_country_flag = jews_permitted
				clr_country_flag = dharmics_permitted
				clr_country_flag = buddhists_permitted
				clr_country_flag = pagans_permitted
				clr_country_flag = new_world_pagans_permitted
				clr_country_flag = european_pagans_permitted
			}
			clr_country_flag = muslim_diploma_of_investiture
			#Ibadi events
			clr_country_flag = elected_imam
			clr_country_flag = imam_elected_defence
			#Confucian events
			clr_country_flag = taoist_alchemist
			clr_country_flag = buddhist_presence
			clr_country_flag = christian_presence
			clr_country_flag = muslim_presence
			clr_country_flag = pagan_presence
			clr_country_flag = jewish_presence
			clr_country_flag = dharmic_presence
			clr_country_flag = buddhist_population
			clr_country_flag = christian_population
			clr_country_flag = muslim_population
			clr_country_flag = pagan_population
			clr_country_flag = jewish_population
			clr_country_flag = dharmic_population
			clr_country_flag = confucianism_reformed_examinations
			#Buddhist events
			clr_country_flag = buddhist_purification
			#Mahayana events
			clr_country_flag = shinto_pilgrimage
			#Vajrayana events
			clr_country_flag = yellow_hats_resisted
			clr_country_flag = red_hats_resisted
			clr_country_flag = black_hats_resisted
			clr_country_flag = red_hat_sects
			if = {
				limit = {
					religion = vajrayana
					has_country_flag = red_hat_reincarnation
				}
				set_country_flag = red_hat_ruler
			}
			if = {
				limit = {
					religion = vajrayana
					government = theocracy
					has_country_flag = black_hat_buddhism
				}
				add_ruler_modifier = { name = black_hat_buddhism duration = -1 }
			}
			if = {
				limit = {
					religion = vajrayana
					government = theocracy
					has_country_flag = red_hat_buddhism
				}
				add_ruler_modifier = { name = red_hat_buddhism duration = -1 }
			}
			if = {
				limit = {
					religion = vajrayana
					government = theocracy
					has_country_flag = yellow_hat_buddhism
				}
				add_ruler_modifier = { name = yellow_hat_buddhism duration = -1 }
			}
			#Hindu events
			clr_country_flag = hindu_denominations_neutral
			clr_country_flag = brahmin_supported
			clr_country_flag = tantrism_reined_in
			clr_country_flag = sati_decision
			clr_country_flag = caste_system_decision
			clr_country_flag = patronize_jains
			clr_country_flag = brahmin_coronation
			clr_country_flag = sampradaya_founded
			#Sikh events
			clr_country_flag = gurus_blessing
			#Hellenic events
			clr_country_flag = consulted_oracle
			clr_country_flag = hellenistic_philosophy
			clr_country_flag = oracle_war
			clr_country_flag = oracle_general
			clr_country_flag = oracle_heir
			clr_country_flag = oracle_invest
			clr_country_flag = oracle_peace
			clr_country_flag = oracle_good_advice
			clr_country_flag = oracle_bad_advice
			clr_country_flag = oracle_first_option
			clr_country_flag = oracle_second_option
			#Pagan events
			clr_country_flag = denounced_folk_religion
			clr_country_flag = sacred_space_law
			#Reformation events
			if = {
				limit = {
					ai = no
					has_country_flag = protestant_reaction
					NOT = { has_country_flag = refused_reformation }
					NOT = { has_country_flag = luther_verdict_guilty }
					religion = catholic
					NOT = { religion_years = { protestant = 60 } }
				}
				clr_country_flag = protestant_reaction
				clr_country_flag = spread_reformation
			}
			clr_country_flag = secularized_theocracy
			#Catholic events
			if = {
				limit = {
					has_country_flag = former_excommunication_target
					OR = {
						NOT = { government = republic }
						had_country_flag = { flag = former_excommunication_target days = 9000 }
					}
				}
				clr_country_flag = former_excommunication_target
				clr_country_flag = excommunication_rome
				clr_country_flag = excommunication_church
				clr_country_flag = excommunication_heathen_ally
				clr_country_flag = excommunication_papal_states
				clr_country_flag = excommunication_unjust_war
				clr_country_flag = excommunication_blasphemy
			}
			if = {
				limit = { had_country_flag = { flag = ruler_called_council days = 3600 } }
				clr_country_flag = ruler_called_council
			}
			clr_country_flag = conciliarism_reaffirmed
			clr_country_flag = dispensation_denied
			clr_country_flag = dispensation_consideration
			clr_country_flag = rulers_ambitions_thwarted
			clr_country_flag = landless_pope_turned_away
			clr_country_flag = papacy_rejected
			clr_country_flag = dispensation_bribe
			clr_country_flag = royal_scandal
			clr_country_flag = italian_ambitions
			clr_country_flag = great_matter
			clr_country_flag = conciliarism_ignored
			clr_country_flag = chosen_sides_in_schism
			clr_country_flag = begged_for_dispensation
			clr_country_flag = donated_land_to_pope
			clr_country_flag = papal_indulgence
			clr_country_flag = papal_blessing
			if = {
				limit = { had_country_flag = { flag = papal_canonization days = 3600 } }
				clr_country_flag = papal_canonization
			}
			if = {
				limit = { had_country_flag = { flag = papal_crusade days = 3600 } }
				clr_country_flag = papal_crusade
			}
			clr_country_flag = papal_advisor
			if = {
				limit = { had_country_flag = { flag = papal_monopoly days = 3600 } }
				clr_country_flag = papal_monopoly
			}
			if = {
				limit = { tag = PAP }
				every_country = {
					limit = {
						exists = yes
						has_opinion_modifier = { who = ROOT modifier = papal_relations }
					}
					remove_opinion = { who = ROOT modifier = papal_relations }
				}
				every_country = {
					limit = {
						exists = yes
						has_opinion_modifier = { who = ROOT modifier = papal_relations_warm }
					}
					remove_opinion = { who = ROOT modifier = papal_relations_warm }
				}
			}
			#Papacy/Papal Controller events
			clr_country_flag = hussite_compacta_considered
			clr_country_flag = papal_reforms_planned
			clr_country_flag = papal_finances
			clr_country_flag = papal_reconquest
			#Orthodox events
			clr_country_flag = autonomy_attempt
			clr_country_flag = autocephaly_denied
			clr_country_flag = elders_blessing_sought
			clr_country_flag = seeking_elders_blessing
			clr_country_flag = byzantine_princess_spurned
			clr_country_flag = holy_fool
			remove_country_modifier = ruler_pilgrimage
			#Miaphysite events
			clr_country_flag = miaphysite_union_attempted
			clr_country_flag = miaphysite_expedition_imprisoned
			clr_country_flag = jerusalem_pilgrimage
			clr_country_flag = crowned_by_ark
			if = {
				limit = { has_country_flag = pious_ruler }
				if = {
					limit = { has_country_flag = sainted_ruler }
					if = {
						limit = { has_new_dynasty = no }
						if = {
							limit = { has_country_flag = patriarch_corrupt }
							random = {
								chance = 40
								country_event = { id = dg_miaphysite.107 days = 0 }
							}
						}
						if = {
							limit = { has_country_flag = patriarch_obedient }
							random = {
								chance = 30
								country_event = { id = dg_miaphysite.107 days = 0 }
							}
						}
						if = {
							limit = { has_country_flag = patriarch_zealous }
							random = {
								chance = 20
								country_event = { id = dg_miaphysite.107 days = 0 }
							}
						}
						if = {
							limit = { has_country_flag = patriarch_theologian }
							random = {
								chance = 10
								country_event = { id = dg_miaphysite.107 days = 0 }
							}
						}
					}
				}
			}
			clr_country_flag = sainted_ruler
			clr_country_flag = uprooted_paganism_at_court
			clr_country_flag = pagan_assassination_target
			clr_country_flag = pagan_assassination_plot
			clr_country_flag = pagan_assassination_reprisals
			clr_country_flag = pagan_assassination_estrangement
			clr_country_flag = educated_heir_debera
			clr_country_flag = estranged_heir
			if = {
				limit = { religion = coptic }
				if = {
					limit = { has_country_flag = miaphysite_heir_exiled }
					add_legitimacy = -10
					random = {
						chance = 50
						country_event = { id = dg_miaphysite.149 days = 30 }
					}
				}
				if = {
					limit = {
						OR = {
							has_country_flag = miaphysite_unity_exiled
							has_country_flag = miaphysite_zakristos_exiled
							has_country_flag = miaphysite_unctionist_exiled
							has_country_flag = miaphysite_stephanite_exiled
							has_country_flag = miaphysite_sonsofgrace_exiled
						}
					}
					country_event = { id = dg_miaphysite.129 days = 60 }
				}
			}
			clr_country_flag = miaphysite_heir_exiled
			if = {
				limit = {
					religion = coptic
					piety = 0.20
				}
				set_country_flag = pious_ruler
			}
			if = {
				limit = {
					has_country_flag = major_changes_to_church_structure
					OR = {
						NOT = { government = republic }
						had_country_flag = { flag = major_changes_to_church_structure days = 9000 }
					}
				}
				clr_country_flag = major_changes_to_church_structure
			}
			#Jewish events
			clr_country_flag = kabbalah_rejected
			#Toltecayotl events
			clr_country_flag = promised_sacrifice
			if = {
				limit = { NOT = { check_variable = { which = captured_icons value = 0 } } }
				set_variable = { which = captured_icons value = 0 }
			}
			#Pagan events
			clr_country_flag = sacred_order_of_priestesses
			#Asatru events
			clr_country_flag = althing_banned
			clr_country_flag = ruler_confirmed
			clr_country_flag = heir_seer
		} #End hidden effect
		#Religious civil wars end
		if = {
			limit = { has_disaster = religious_civil_war }
			set_country_flag = religious_civil_war_intermission
			if = {
				limit = {
					any_owned_province = { has_province_flag = heretic_bastion NOT = { has_province_modifier = heretic_bastion } }
					NOT = { any_owned_province = { has_province_flag = church_bastion NOT = { has_province_modifier = church_bastion } } }
				}
				country_event = { id = dg_turmoil.045 days = 0 }
			}
			if = {
				limit = {
					any_owned_province = { has_province_flag = church_bastion NOT = { has_province_modifier = church_bastion } }
					NOT = { any_owned_province = { has_province_flag = heretic_bastion NOT = { has_province_modifier = heretic_bastion } } }
				}
				country_event = { id = dg_turmoil.047 days = 0 }
			}
			if = {
				limit = {
					NOT = {
						OR = {
							AND = {
								any_owned_province = { has_province_flag = heretic_bastion NOT = { has_province_modifier = heretic_bastion } }
								NOT = { any_owned_province = { has_province_flag = church_bastion NOT = { has_province_modifier = church_bastion } } }
							}
							AND = {
								any_owned_province = { has_province_flag = church_bastion NOT = { has_province_modifier = church_bastion } }
								NOT = { any_owned_province = { has_province_flag = heretic_bastion NOT = { has_province_modifier = heretic_bastion } } }
							}
						}
					}
				}
				country_event = { id = dg_turmoil.046 days = 0 }
			}
		}
	} #End immediate
	
	option = {
		name = dg_setup.003.a
		hidden_effect = {
			###APOSTASY EVENTS
			if = {
				limit = {
					check_variable = { which = sympathy_to_old_religion value = 1 }
					OR = {
						religion_group = pagan
						religion_group = european_pagan
						religion_group = new_world_pagan
					}
				}
				random = { chance = 10 set_country_flag = apostate_ruler }
			}
			if = {
				limit = { check_variable = { which = sympathy_to_old_religion value = 10 } }
				random = { chance = 10 set_country_flag = apostate_ruler }
			}
			if = {
				limit = { check_variable = { which = sympathy_to_old_religion value = 20 } }
				random = { chance = 10 set_country_flag = apostate_ruler }
			}
			if = {
				limit = { check_variable = { which = sympathy_to_old_religion value = 30 } }
				random = { chance = 10 set_country_flag = apostate_ruler }
			}
			if = {
				limit = { check_variable = { which = sympathy_to_old_religion value = 40 } }
				random = { chance = 10 set_country_flag = apostate_ruler }
			}
			if = {
				limit = { check_variable = { which = sympathy_to_old_religion value = 50 } }
				random = { chance = 10 set_country_flag = apostate_ruler }
			}
			if = {
				limit = { check_variable = { which = sympathy_to_old_religion value = 60 } }
				random = { chance = 10 set_country_flag = apostate_ruler }
			}
			if = {
				limit = { check_variable = { which = sympathy_to_old_religion value = 70 } }
				random = { chance = 10 set_country_flag = apostate_ruler }
			}
			if = {
				limit = { check_variable = { which = sympathy_to_old_religion value = 80 } }
				random = { chance = 10 set_country_flag = apostate_ruler }
			}
			if = {
				limit = { check_variable = { which = sympathy_to_old_religion value = 90 } }
				random = { chance = 10 set_country_flag = apostate_ruler }
			}
			if = {
				limit = { check_variable = { which = sympathy_to_old_religion value = 100 } }
				random = { chance = 10 set_country_flag = apostate_ruler }
			}
			change_variable = { which = sympathy_to_old_religion value = -15 }
			if = {
				limit = { NOT = { check_variable = { which = sympathy_to_old_religion value = 0 } } }
				set_variable = { which = sympathy_to_old_religion value = 0 }
			}
			###CHRISTIAN EVENTS
			if = {
				limit = {
					has_global_flag = dei_gratia
					NOT = { is_religion_enabled = hussite }
					religion_group = christian
					any_owned_province = {
						check_variable = { which = hussite value = 6 }
						is_core = owner
					}
					NOT = { has_country_flag = hussite_crusade }
					NOT = { has_country_flag = hussite_compacta }
				}
				country_event = { id = dg_hussite.014 days = 30 } #The Defenestration of Prague
			}
			#Excommunication is lifted
			if = {
				limit = {
					has_country_flag = excommunicated
					religion = catholic
				}
				set_variable = { which = dispensation_consideration value = 0 }
				clr_country_flag = dispensation_denied
				clr_country_flag = dispensation_process
				clr_country_flag = dispensation_consideration
				clr_country_flag = dispensation_granted
				clr_country_flag = excommunicated
				clr_country_flag = royal_scandal
				clr_country_flag = dispensation_bribe
				clr_country_flag = unfair_excommunication
				clr_country_flag = excommunication_heathen_ally
				clr_country_flag = excommunication_sponsoring_schism
				clr_country_flag = excommunication_unjust_war
				clr_country_flag = excommunication_secular_Rome
				clr_country_flag = excommunication_rome
				clr_country_flag = excommunication_reformation
				clr_country_flag = excommunication_usurp_church
			}
			###SUCCESSION CRISES
			if = {
				limit = {
					has_country_modifier = obstacle_succession
					NOT = { has_spawned_rebels = pretender_rebels }
					NOT = { has_disaster = succession_crisis }
					NOT = { has_disaster = interregnum }
					government = monarchy
				}
				random = {
					chance = 30
					set_country_flag = war_between_brothers
				}
				if = {
					limit = { is_female = yes }
					random = {
						chance = 20
						set_country_flag = war_between_brothers
					}
				}
				if = {
					limit = { has_regency = yes }
					random = {
						chance = 20
						set_country_flag = war_between_brothers
					}
				}
				if = {
					limit = { is_tribal = yes }
					random = {
						chance = 20
						set_country_flag = war_between_brothers
					}
				}
				if = {
					limit = { NOT = { legitimacy = 50 } }
					random = {
						chance = 20
						set_country_flag = war_between_brothers
					}
				}
			}
			if = {
				limit = { has_country_flag = war_between_brothers }
				clr_country_flag = war_between_brothers
				every_owned_province = {
					limit = { religion = ROOT }
					change_variable = { which = rebel_possibility value = 1 }
				}
				capital_scope = {
					change_variable = { which = rebel_possibility value = 2 }
				}
				every_owned_province = {
					limit = { any_neighbor_province = { is_capital = yes } }
					change_variable = { which = rebel_possibility value = 1 }
				}
				every_owned_province = {
					limit = { controlled_by = ROOT }
					change_variable = { which = rebel_possibility value = 1 }
				}
				every_owned_province = {
					limit = { has_siege = yes }
					change_variable = { which = rebel_possibility value = -1 }
				}
				every_owned_province = {
					limit = { units_in_province = 1 }
					change_variable = { which = rebel_possibility value = -2 }
				}
				every_owned_province = {
					limit = { unrest = 2 }
					change_variable = { which = rebel_possibility value = 1 }
				}
				every_owned_province = {
					limit = { unrest = 4 }
					change_variable = { which = rebel_possibility value = 1 }
				}
				every_owned_province = {
					limit = { unrest = 6 }
					change_variable = { which = rebel_possibility value = 1 }
				}
				every_owned_province = {
					limit = { unrest = 8 }
					change_variable = { which = rebel_possibility value = 1 }
				}
				every_owned_province = {
					limit = { has_province_modifier = center_of_trade_modifier }
					change_variable = { which = rebel_possibility value = 2 }
				}
				every_owned_province = {
					limit = { culture = ROOT }
					change_variable = { which = rebel_possibility value = 1 }
				}
				every_owned_province = {
					limit = { is_core = owner }
					change_variable = { which = rebel_possibility value = 1 }
				}
				every_owned_province = {
					limit = { any_neighbor_province = { NOT = { owned_by = ROOT } } }
					change_variable = { which = rebel_possibility value = -1 }
				}
				every_owned_province = {
					limit = { development = 9 }
					change_variable = { which = rebel_possibility value = 1 }
				}
				every_owned_province = {
					limit = { development = 18 }
					change_variable = { which = rebel_possibility value = 1 }
				}
				every_owned_province = {
					limit = { development = 27 }
					change_variable = { which = rebel_possibility value = 1 }
				}
				every_owned_province = {
					limit = { is_city = no }
					set_variable = { which = rebel_possibility value = 0 }
				}
				###Chooses a stronghold
				random_owned_province = {
					limit = {
						all_province = {
							OR = {
								NOT = { check_variable = { which = rebel_possibility which = PREV } }
								is_variable_equal = { which = rebel_possibility which = PREV }
							}
						}
					}
					spawn_rebels = { type = pretender_rebels size = 1 }
					set_province_flag = rebel_stronghold
				}
				if = {
					limit = { num_of_cities = 10 } #Larger countries get larger revolts
					random_owned_province = {
						limit = {
							any_neighbor_province = { owned_by = ROOT OR = { has_province_flag = rebel_stronghold has_province_flag = rebel_support } }
							NOT = { has_province_flag = rebel_support }
						}
						spawn_rebels = { type = pretender_rebels size = 1 }
						hidden_effect = { set_province_flag = rebel_support }
						change_controller = REB
					}
				}
				if = {
					limit = { num_of_cities = 20 } #Larger countries get larger revolts
					random_owned_province = {
						limit = {
							any_neighbor_province = { owned_by = ROOT OR = { has_province_flag = rebel_stronghold has_province_flag = rebel_support } }
							NOT = { has_province_flag = rebel_support }
						}
						spawn_rebels = { type = pretender_rebels size = 1 }
						hidden_effect = { set_province_flag = rebel_support }
						change_controller = REB
					}
				}
				if = {
					limit = { num_of_cities = 30 } #Larger countries get larger revolts
					random_owned_province = {
						limit = {
							any_neighbor_province = { owned_by = ROOT OR = { has_province_flag = rebel_stronghold has_province_flag = rebel_support } }
							NOT = { has_province_flag = rebel_support }
						}
						spawn_rebels = { type = pretender_rebels size = 1 }
						hidden_effect = { set_province_flag = rebel_support }
						change_controller = REB
					}
				}
				if = {
					limit = { num_of_cities = 40 } #Larger countries get larger revolts
					random_owned_province = {
						limit = {
							any_neighbor_province = { owned_by = ROOT OR = { has_province_flag = rebel_stronghold has_province_flag = rebel_support } }
							NOT = { has_province_flag = rebel_support }
						}
						spawn_rebels = { type = pretender_rebels size = 1 }
						hidden_effect = { set_province_flag = rebel_support }
						change_controller = REB
					}
				}
				if = {
					limit = { num_of_cities = 50 } #Larger countries get larger revolts
					random_owned_province = {
						limit = {
							any_neighbor_province = { owned_by = ROOT OR = { has_province_flag = rebel_stronghold has_province_flag = rebel_support } }
							NOT = { has_province_flag = rebel_support }
						}
						spawn_rebels = { type = pretender_rebels size = 1 }
						hidden_effect = { set_province_flag = rebel_support }
						change_controller = REB
					}
				}
				every_owned_province = { set_variable = { which = rebel_possibility value = 0 } clr_province_flag = rebel_stronghold clr_province_flag = rebel_support }
			}
			###ZOROASTRIAN EVENTS
			if = {
				limit = {
					religion = zoroastrian
					government = monarchy
					OR = { has_regency = no has_consort_regency = yes }
					piety = -0.60
					check_variable = { which = dynastic_incest value = -5 }
				}
				country_event = { id = dg_zoroastrian.021 days = 30 random = 180 } #Marriage control event
				if = {
					limit = { NOT = { has_country_flag = zoroastrian_debate_funerals } }
					country_event = { id = dg_zoroastrian.076 days = 30 random = 180 } #Debate over funerary rites
				}
			}
		} #END HIDDEN EFFECT
		#Choosing a favored sect/ruler decisions
		if = {
			limit = { piety = -0.60 }
			if = {
				limit = { religion = confucianism }
				country_event = { id = dg_confucian.001 days = 30 }
			}
			if = {
				limit = { religion = hinduism }
				if = {
					limit = { NOT = { has_country_modifier = universal_hinduism } }
					country_event = { id = dg_hindu.001 days = 30 }
				}
			}
			if = {
				limit = {
					religion = zoroastrian
					NOT = { has_country_flag = zoroastrianism_reformed }
				}
				add_country_modifier = { name = fragmented_scriptures duration = -1 }
				country_event = { id = dg_zoroastrian.062 days = 30 }
			}
			if = {
				limit = {
					religion = mahayana
					#Theocracies don't change sects
					NOT = { has_country_modifier = meditation_buddhism }
					NOT = { has_country_modifier = pure_land_buddhism }
					NOT = { has_country_modifier = nichiren_buddhism }
					NOT = { has_country_modifier = lotus_sutra_buddhism }
				}
				country_event = { id = dg_mahayana.001 days = 30 }
			}
			if = {
				limit = {
					religion = vajrayana
					NOT = { has_global_flag = yellow_hats_founded }
					NOT = { has_ruler_modifier = black_hat_buddhism }
					NOT = { has_ruler_modifier = yellow_hat_buddhism }
					NOT = { has_ruler_modifier = red_hat_buddhism }
				}
				country_event = { id = dg_vajrayana.002 days = 30 }
			}
			if = {
				limit = {
					religion = vajrayana
					has_global_flag = yellow_hats_founded
					NOT = { has_ruler_modifier = black_hat_buddhism }
					NOT = { has_ruler_modifier = yellow_hat_buddhism }
					NOT = { has_ruler_modifier = red_hat_buddhism }
				}
				country_event = { id = dg_vajrayana.004 days = 30 }
			}
			if = {
				limit = { religion = baltic_pagan_reformed }
				country_event = { id = dg_romuva.001 days = 30 }
			}
			if = {
				limit = { religion = norse_pagan_reformed }
				country_event = { id = dg_asatru.001 days = 30 }
			}
			if = {
				limit = { religion = slavic_pagan_reformed }
				country_event = { id = dg_rodnoverie.001 days = 30 }
			}
			if = {
				limit = { religion = finnish_pagan_reformed }
				country_event = { id = dg_ukonusko.001 days = 30 }
			}
			if = {
				limit = { religion = inti }
				country_event = { id = dg_inti.001 days = 30 }
			}
			if = {
				limit = { religion = hussite }
				if = {
					limit = {
						OR = {
							has_country_flag = lollard_faction
							overlord = { has_country_flag = lollard_faction }
							any_owned_province = { has_province_flag = lollard_origins }
						}
						NOT = {
							AND = {
								OR = {
									is_religion_enabled = hussite
									any_owned_province = { has_province_flag = hussite_origins }
									has_country_flag = utraquist_faction
									has_country_flag = taborite_faction
									overlord = { has_country_flag = utraquist_faction }
									overlord = { has_country_flag = taborite_faction }
								}
								OR = {
									advisor = theologian
									has_country_flag = utraquist_faction
									overlord = { has_country_flag = utraquist_faction }
									has_country_flag = taborite_faction
									overlord = { has_country_flag = taborite_faction }
								}
							}
						}
					}
					add_ruler_modifier = { name = lollard duration = -1 }
					set_country_flag = lollard_faction
				}
				if = {
					limit = {
						OR = {
							has_country_flag = lollard_faction
							overlord = { has_country_flag = lollard_faction }
							any_owned_province = { has_province_flag = lollard_origins }
						}
						OR = {
							is_religion_enabled = hussite
							any_owned_province = { has_province_flag = hussite_origins }
							has_country_flag = utraquist_faction
							has_country_flag = taborite_faction
							overlord = { has_country_flag = utraquist_faction }
							overlord = { has_country_flag = taborite_faction }
						}
						OR = {
							advisor = theologian
							has_country_flag = utraquist_faction
							overlord = { has_country_flag = utraquist_faction }
							has_country_flag = taborite_faction
							overlord = { has_country_flag = taborite_faction }
						}
					}
					country_event = { id = dg_hussite.054 days = 30 }
				}
				if = {
					limit = {
						OR = {
							has_country_flag = taborite_faction
							is_religion_enabled = hussite
							overlord = { has_country_flag = taborite_faction }
							any_owned_province = { has_province_flag = hussite_origins }
						}
						NOT = {
							AND = {
								OR = {
									is_religion_enabled = hussite
									any_owned_province = { has_province_flag = hussite_origins }
									has_country_flag = utraquist_faction
									overlord = { has_country_flag = utraquist_faction }
								}
								OR = {
									advisor = theologian
									has_country_flag = utraquist_faction
									overlord = { has_country_flag = utraquist_faction }
								}
							}
						}
						NOT = {
							AND = {
								OR = {
									any_owned_province = { has_province_flag = lollard_origins }
									has_country_flag = lollard_faction
									overlord = { has_country_flag = lollard_faction }
								}
								OR = {
									advisor = theologian
									has_country_flag = lollard_faction
									overlord = { has_country_flag = lollard_faction }
								}
							}
						}
					}
					add_ruler_modifier = { name = taborite duration = -1 }
					set_country_flag = taborite_faction
				}
				if = {
					limit = {
						OR = {
							has_country_flag = taborite_faction
							is_religion_enabled = hussite
							overlord = { has_country_flag = taborite_faction }
							any_owned_province = { has_province_flag = hussite_origins }
						}
						OR = {
							AND = {
								OR = {
									is_religion_enabled = hussite
									any_owned_province = { has_province_flag = hussite_origins }
									has_country_flag = utraquist_faction
									overlord = { has_country_flag = utraquist_faction }
								}
								OR = {
									advisor = theologian
									has_country_flag = utraquist_faction
									overlord = { has_country_flag = utraquist_faction }
								}
							}
							AND = {
								OR = {
									any_owned_province = { has_province_flag = lollard_origins }
									has_country_flag = lollard_faction
									overlord = { has_country_flag = lollard_faction }
								}
								OR = {
									advisor = theologian
									has_country_flag = lollard_faction
									overlord = { has_country_flag = lollard_faction }
								}
							}
						}
					}
					country_event = { id = dg_hussite.054 days = 30 }
				}
				if = {
					limit = {
						OR = {
							has_country_flag = utraquist_faction
							is_religion_enabled = hussite
							overlord = { has_country_flag = utraquist_faction }
							any_owned_province = { has_province_flag = hussite_origins }
						}
						NOT = {
							AND = {
								OR = {
									is_religion_enabled = hussite
									any_owned_province = { has_province_flag = hussite_origins }
									has_country_flag = taborite_faction
									overlord = { has_country_flag = taborite_faction }
								}
								OR = {
									advisor = theologian
									has_country_flag = taborite_faction
									overlord = { has_country_flag = taborite_faction }
								}
							}
						}
						NOT = {
							AND = {
								OR = {
									any_owned_province = { has_province_flag = lollard_origins }
									has_country_flag = lollard_faction
									overlord = { has_country_flag = lollard_faction }
								}
								OR = {
									advisor = theologian
									has_country_flag = lollard_faction
									overlord = { has_country_flag = lollard_faction }
								}
							}
						}
					}
					add_ruler_modifier = { name = utraquist duration = -1 }
					set_country_flag = utraquist_faction
				}
				if = {
					limit = {
						OR = {
							has_country_flag = utraquist_faction
							is_religion_enabled = hussite
							overlord = { has_country_flag = utraquist_faction }
							any_owned_province = { has_province_flag = hussite_origins }
						}
						OR = {
							AND = {
								OR = {
									is_religion_enabled = hussite
									any_owned_province = { has_province_flag = hussite_origins }
									has_country_flag = taborite_faction
									overlord = { has_country_flag = taborite_faction }
								}
								OR = {
									advisor = theologian
									has_country_flag = taborite_faction
									overlord = { has_country_flag = taborite_faction }
								}
							}
							AND = {
								OR = {
									any_owned_province = { has_province_flag = lollard_origins }
									has_country_flag = lollard_faction
									overlord = { has_country_flag = lollard_faction }
								}
								OR = {
									advisor = theologian
									has_country_flag = lollard_faction
									overlord = { has_country_flag = lollard_faction }
								}
							}
						}
					}
					country_event = { id = dg_hussite.054 days = 30 }
				}
				if = {
					limit = {
						NOT = { has_country_flag = taborite_faction }
						NOT = { has_country_flag = lollard_faction }
						NOT = { has_country_flag = utraquist_faction }
					}
					country_event = { id = dg_hussite.054 days = 30 }
				}
			}
		}
	}
} #END EVENT

country_event = {
	
	id = dg_setup.004
	title = dg_setup.004.t
	desc = dg_setup.001.d
	picture = ai_only
	
	is_triggered_only = yes
	
	option = {
		name = dg_setup.001.a
		###Quick and dirty fix for disappearing minority bug
		every_country = {
			limit = {
				exists = yes
			}
			country_event = { id = dg_conversion.105 }
		}
		###Adding Sword of Faith to countries that act as the only bastion of their faith at game start (e.g. Wahhabi Arabia, Romuva Lithuania, etc)
		every_country = {
			limit = {
				NOT = { any_country = { religion = PREV } }
				exists = yes
			}
			add_ruler_modifier = { name = sword_of_faith duration = -1 }
		}
		###Enabling pagan religions if player is pagan or near them
		if = {
			limit = {
				any_country = {
					ai = no
					OR = {
						religion = finnish_pagan_reformed
						any_owned_province = { religion = finnish_pagan_reformed }
						any_neighbor_country = { religion = finnish_pagan_reformed }
					}
				}
			}
			enable_religion = finnish_pagan_reformed
		}
		if = {
			limit = {
				any_country = {
					ai = no
					OR = {
						religion = baltic_pagan_reformed
						any_owned_province = { religion = baltic_pagan_reformed }
						any_neighbor_country = { religion = baltic_pagan_reformed }
					}
				}
			}
			enable_religion = baltic_pagan_reformed
		}
		if = {
			limit = {
				any_country = {
					ai = no
					OR = {
						religion = slavic_pagan_reformed
						any_owned_province = { religion = slavic_pagan_reformed }
						any_neighbor_country = { religion = slavic_pagan_reformed }
					}
				}
			}
			enable_religion = slavic_pagan_reformed
		}
		if = {
			limit = {
				any_country = {
					ai = no
					OR = {
						religion = norse_pagan_reformed
						any_owned_province = { religion = norse_pagan_reformed }
						any_neighbor_country = { religion = norse_pagan_reformed }
					}
				}
			}
			enable_religion = norse_pagan_reformed
		}
		###Adding Roman Territories fix
		if = {
			limit = { PA2 = { overlord = { tag = PAP } } }
			PA2 = { add_liberty_desire = -100 }
		}
		###Great Temples
		##Catholic
		every_province = { #Incomplete
			limit = {
				OR = {
					AND = {
						province_id = 112 #St. Mark's Cathedral in Venice
						is_year = 1093
					}
					AND = {
						province_id = 85 #Cologne Cathedral
						is_year = 1248
					}
					AND = {
						province_id = 116 #Santa Maria del Fiore, Florence
						is_year = 1296
					}
					AND = {
						province_id = 266 #St Vitus Cathedral in Prague
						is_year = 1344 #Not finished until 1929 due to Hussite Wars and other interruptions
					}
					AND = {
						province_id = 774 #St Stephens Cathedral in Vienna
						is_year = 1359
					}
					AND = {
						province_id = 104 #Milan's Duomo di Milano (Catholic)
						is_year = 1386
					}
					AND = {
						province_id = 2311 #Seville Cathedral, Andalucia
						is_year = 1401
					}
					AND = {
						province_id = 227 #Mosteiro dos Jer??os, Belem (Portugal)
						is_year = 1502
					}
				}
			}
			if = {
				limit = { owner = { religion = catholic } }
				set_variable = { which = great_temple_progress value = 50 }
			}
		}
		every_province = { #Complete
			limit = {
				OR = {
					AND = {
						province_id = 379 #Churches of the Nativity and the Holy Sepulchre, Bethlehem and Jerusalem (Orthodox)
						is_year = 327
					}
					AND = {
						province_id = 1402 #Hagia Sophia, Constantinople
						is_year = 537
					}
					AND = {
						province_id = 235 #Canterbury Cathedral, Kent
						is_year = 1174
					}
					AND = {
						province_id = 186 #Reims Cathedral, France (Catholic)
						is_year = 1299
					}
					AND = {
						province_id = 236 #St Paul's Cathedral, London (Protestant)
						is_year = 1314
					}
					AND = {
						province_id = 183 #Notre Dame in Paris (Catholic) as well as Cathedral of Our Lady of Chartres (1250)
						is_year = 1345
					}
					AND = {
						province_id = 116 #Santa Maria del Fiore, Florence (Catholic)
						is_year = 1436
					}
					AND = {
						province_id = 774 #St Stephens Cathedral in Vienna
						is_year = 1511
					}
					AND = {
						province_id = 2311 #Seville Cathedral, Andalucia
						is_year = 1520
					}
					AND = {
						province_id = 295 #Red Square Cathedral of the Intercession, Moscow
						is_year = 1552
					}
					AND = {
						province_id = 227 #Mosteiro dos Jer??os, Belem (Portugal)
						is_year = 1571
					}
					AND = {
						province_id = 2530 #St Peter's Basilica, Rome
						is_year = 1626
					}
					AND = {
						province_id = 112 #St. Mark's Cathedral in Venice (Catholic)
						is_year = 1650
					}
					AND = {
						province_id = 236 #St Paul's Cathedral, London (Protestant)
						is_year = 1710
					}
					AND = {
						province_id = 104 #Milan's Duomo di Milano (Catholic)
						is_year = 1805
					}
				}
			}
			set_province_flag = great_temple_built
			if = {
				limit = { owner = { religion = catholic } }
				#add_province_modifier = { name = great_cathedral duration = -1 }
				add_building = great_temple
				set_province_flag = great_cathedral
				set_variable = { which = great_temple_progress value = 100 }
			}
		}
		##Orthodox
		random_province = { #Incomplete
			limit = {
				province_id = 280 #Saint Sophia Cathedral, Kiev
				is_year = 1011
			}
			if = {
				limit = { owner = { religion = orthodox } }
				set_variable = { which = great_temple_progress value = 50 }
			}
		}
		every_province = { #Complete
			limit = {
				OR = {
					AND = {
						province_id = 379 #Churches of the Nativity and the Holy Sepulchre, Bethlehem and Jerusalem
						is_year = 327
					}
					AND = {
						province_id = 1402 #Hagia Sophia, Constantinople
						is_year = 537
					}
					AND = {
						province_id = 295 #Red Square Cathedral of the Intercession, Moscow
						is_year = 1555 #Built very quickly
					}
					AND = {
						province_id = 280 #Saint Sophia Cathedral, Kiev
						is_year = 1767 #Fell into disrepair for centuries
					}
				}
			}
			set_province_flag = great_temple_built
			set_province_flag = great_temple_orthodox
			if = {
				limit = { owner = { religion = orthodox } }
				#add_province_modifier = { name = great_cathedral duration = -1 }
				add_building = great_temple
				set_province_flag = great_cathedral
				set_variable = { which = great_temple_progress value = 100 }
			}
		}
		##Protestant
		random_province = { #Incomplete
			limit = {
				province_id = 85 #Cologne Cathedral
				is_year = 1248
			}
			if = {
				limit = { owner = { religion = protestant } }
				set_variable = { which = great_temple_progress value = 50 }
			}
		}
		every_province = {
			limit = {
				OR = {
					AND = {
						province_id = 236 #St Paul's Cathedral, London (Protestant)
						is_year = 1314
						owner = { religion = protestant }
					}
					AND = {
						province_id = 85 #Cologne Cathedral
						is_year = 1880
					}
				}
			}
			set_province_flag = great_temple_built
			set_province_flag = great_temple_protestant
			if = {
				limit = { owner = { religion = protestant } }
				#add_province_modifier = { name = great_cathedral duration = -1 }
				add_building = great_temple
				set_province_flag = great_cathedral
				set_variable = { which = great_temple_progress value = 100 }
			}
		}
		##Muslim
		every_province = {
			limit = {
				OR = {
					AND = {
						province_id = 385 #The Sacred Mosque, Mecca
						is_year = 644
					}
					AND = {
						province_id = 379 #Al Aqsa Mosque in Jerusalem
						is_year = 705
					}
					AND = {
						province_id = 382 #Great Mosque of Damascus
						is_year = 715
					}
					AND = {
						province_id = 361 #Al-Azhar Mosque in Cairo
						is_year = 972
					}
					AND = {
						province_id = 2220 #Imam Reza shrine in Masshad (Khorasan)
						is_year = 1150
					}
					AND = {
						province_id = 1402 #Blue Mosque in Constantinople
						is_year = 1453
					}
					AND = {
						province_id = 2437 #Qol Sharif Mosque in Kazan
						is_year = 1500 #ca
						NOT = { is_year = 1552 } #Destroyed by Russians
					}
					AND = {
						province_id = 2163 #Great Reflecting Mosque (Jama Masjid) in Delhi
						is_year = 1656 #built between 1644-1656
					}
					AND = {
						province_id = 2113 #Imperial Mosque (Badshadhi Mosque) in Lahore
						is_year = 1673 #built between 1671-1673
					}
				}
			}
			set_province_flag = great_temple_built
			set_province_flag = great_temple_sunni
			set_province_flag = great_temple_shiite
			set_province_flag = great_temple_ibadi
			set_province_flag = great_temple_wahhabi
			if = {
				limit = { owner = { OR = { religion = sunni religion = shiite religion = wahhabi religion = ibadi } } }
				#add_province_modifier = { name = great_mosque duration = -1 }
				add_building = great_temple
				set_province_flag = great_mosque
				set_variable = { which = great_temple_progress value = 100 }
			}
		}
		##Theravada
		every_province = {
			limit = {
				OR = {
					province_id = 586 #The Golden Pagoda in Yangdon, Burma (Theravada)
					AND = {
						is_year = 250 #3rd century
						province_id = 2336 #Jetavanaramaya in Anuradhapura, Ceylon (Theravada)
					}
					AND = {
						is_year = 1200 #ca
						province_id = 2428 #Pagan and its thousands of temples (Theravada)
					}
					AND = {
						is_year = 1656 #ca
						province_id = 2306 #Wat Arun in Bangkok, Thailand (might be #600, Ayutthaya?) (Buddhism)
					}
					AND = {
						is_year = 1150 #ca
						NOT = { is_year = 1500 }
						province_id = 609 #Angkor Wat in Cambodia (Hinduism, later Theravada)
					}
					AND = {
						is_year = 1566
						province_id = 614 #Pha That Luang in Ventiane (Buddhism)
					}
				}
			}
			set_province_flag = great_temple_built
			set_province_flag = great_temple_buddhism
			if = {
				limit = { owner = { religion = buddhism } }
				add_building = great_temple
				#add_province_modifier = { name = great_temple duration = -1 }
				set_province_flag = great_temple
				set_variable = { which = great_temple_progress value = 100 }
			}
		}
		##Mahayana
		every_province = {
			limit = {
				OR = {
					AND = {
						is_year = 741
						province_id = 2280 #Todai-ji in Nara, Japan (Mahayana - Lotus Sutra)
					}
					AND = {
						is_year = 778
						province_id = 2283 #Kiyomizu-deru in Kyoto, along with its other thousands of shrines and temples (Mahayana)
					}
					AND = {
						is_year = 802
						province_id = 736 #Two of the Three Jewel Temples of Korea, southern Gyeongsang (Mahayana)
					}
					AND = {
						is_year = 1252
						province_id = 2277 #the Daibutsu in Kamakura, Japan (Mahayana)
					}
					AND = {
						is_year = 850 #9th century
						#NOT = { is_year = 1400 } #Abandoned - but Prambanan (Hinduism) is next door
						province_id = 626 #Borobudur in Yogyakarta, Java (Mataram)
					}
				}
			}
			set_province_flag = great_temple_built
			set_province_flag = great_temple_mahayana
			if = {
				limit = { owner = { religion = mahayana } }
				add_building = great_temple
				#add_province_modifier = { name = great_temple duration = -1 }
				set_province_flag = great_temple
				set_variable = { which = great_temple_progress value = 100 }
			}
		}
		##Vajrayana
		every_province = {
			limit = {
				OR = {
					AND = {
						province_id = 2263 #Jokhang Temple in Lhasa, Tibet (Vajrayana)
						is_year = 642
					}
					AND = {
						province_id = 557 #Boudhanath in Nepal (Vajrayana)
						is_year = 755
					}
				}
			}
			set_province_flag = great_temple_built
			set_province_flag = great_temple_vajrayana
			if = {
				limit = { owner = { religion = vajrayana } }
				add_building = great_temple
				#add_province_modifier = { name = great_temple duration = -1 }
				set_province_flag = great_temple
				set_variable = { which = great_temple_progress value = 100 }
			}
		}
		##Hinduism
		every_province = {
			limit = {
				OR = {
					AND = {
						is_year = 650 #7th century
						province_id = 536 #Meenakshi Amman in Madurai (Hinduism)
					}
					AND = {
						is_year = 950 #10th century
						province_id = 539 #Sri Ranganathaswamy in Srirangam, India (Hinduism)
					}
					AND = {
						is_year = 1010
						province_id = 2673 #Brihadishwara Temple in Thanjavur, India (Hinduism)
					}
					AND = {
						is_year = 1053
						province_id = 541 #Varadharaja Peruma and the thousand other temples of Kanchipuram (Hinduism)
					}
					AND = {
						is_year = 1150
						NOT = { is_year = 1500 }
						province_id = 609 #Angkor Wat in Cambodia (Hinduism, later Theravada)
					}
				}
			}
			set_province_flag = great_temple_built
			set_province_flag = great_temple_hinduism
			if = {
				limit = { owner = { religion = hinduism } }
				#add_province_modifier = { name = great_temple duration = -1 }
				set_province_flag = great_temple
				add_building = great_temple
				set_variable = { which = great_temple_progress value = 100 }
			}
		}
		##Sikhism
		random_province = {
			limit = {
				province_id = 2113 #Harmandir Sahib - the Golden Temple of Amritsar (Sikh)
				is_year = 1604
			}
			set_province_flag = great_temple_built
			set_province_flag = great_temple_sikhism
			if = {
				limit = { owner = { religion = sikhism } }
				#add_province_modifier = { name = great_temple duration = -1 }
				set_province_flag = great_temple
				add_building = great_temple
				set_variable = { which = great_temple_progress value = 100 }
			}
		}
		##Rodnoverie
		random_province = {
			limit = {
				province_id = 280 #Idol of Perun in Kiev (Rodnoverie)
				is_year = 945
				religion_group = european_pagan #Destroyed/converted later in our history
			}
			set_province_flag = great_temple_built
			set_province_flag = great_temple_slavic_pagan_reformed
			if = {
				limit = { owner = { religion = slavic_pagan_reformed } }
				#add_province_modifier = { name = great_temple duration = -1 }
				add_building = great_temple
				set_province_flag = great_temple
				set_variable = { which = great_temple_progress value = 100 }
			}
		}
		##Mayan
		random_province = {
			limit = {
				province_id = 842 #Temple-Pyramid IV, Tikal/Peten (Mayan)
				is_year = 720
			}
			set_province_flag = great_temple_built
			set_province_flag = great_temple_mesoamerican_religion
			if = {
				limit = { owner = { religion = mesoamerican_religion } }
				#add_province_modifier = { name = great_temple duration = -1 }
				add_building = great_temple
				set_province_flag = great_temple
				set_variable = { which = great_temple_progress value = 100 }
			}
		}
		##Romuva
		random_province = {
			limit = {
				province_id = 272 #Temple of Perkunas in Vilnius (Pagan)
				religion_group = european_pagan
				is_year = 1300
			}
			set_province_flag = great_temple_built
			set_province_flag = great_temple_baltic_pagan_reformed
			if = {
				limit = { owner = { religion = baltic_pagan_reformed } }
				#add_province_modifier = { name = great_temple duration = -1 }
				add_building = great_temple
				set_province_flag = great_temple
				set_variable = { which = great_temple_progress value = 100 }
			}
		}
		##Inti
		random_province = {
			limit = {
				province_id = 2068 #Temple of the Sun, Cuzco
				is_year = 1438
				religion_group = new_world_pagan #Converted by Conquistadors
			}
			set_province_flag = great_temple_built
			set_province_flag = great_temple_inti
			if = {
				limit = { owner = { religion = inti } }
				#add_province_modifier = { name = great_temple duration = -1 }
				add_building = great_temple
				set_province_flag = great_temple
				set_variable = { which = great_temple_progress value = 100 }
			}
		}
		##Toltecayotl
		random_province = {
			limit = {
				province_id = 852 #Templo Mayor in Tenochtitlan (Mexico City)
				is_year = 1325
			}
			if = {
				limit = { owner = { religion = inti } }
				set_variable = { which = great_temple_progress value = 50 }
			}
		}
		random_province = {
			limit = {
				province_id = 852 #Templo Mayor in Tenochtitlan (Mexico City)
				is_year = 1440 #Greatest height under Moctezuma
				NOT = { is_year = 1521 } #Destroyed by Spanish
			}
			set_province_flag = great_temple_built
			set_province_flag = great_temple_inti
			if = {
				limit = { owner = { religion = inti } }
				#add_province_modifier = { name = great_temple duration = -1 }
				add_building = great_temple
				set_province_flag = great_temple
				set_variable = { which = great_temple_progress value = 100 }
			}
		}
		every_province = {
			limit = {
				check_variable = { which = great_temple_progress value = 50 }
				NOT = { owner = { any_owned_province = { has_province_modifier = great_temple_progress } } }
				NOT = { owner = { any_owned_province = { has_building = great_temple } } }
				#NOT = { owner = { any_owned_province = { has_province_modifier = great_temple } } }
				#NOT = { owner = { any_owned_province = { has_province_modifier = great_cathedral } } }
				#NOT = { owner = { any_owned_province = { has_province_modifier = great_mosque } } }
				#NOT = { owner = { any_owned_province = { has_province_modifier = great_synagogue } } }
			}
			add_province_modifier = { name = great_temple_progress duration = -1 }
		}
		#every_province = { # It should not be necessary anymore (khardinal)
		#	limit = {
		#		has_province_flag = great_temple_built
		#		num_free_building_slots = 1
		#		NOT = { temple_trigger = yes }
		#		NOT = { cathedral_trigger = yes }
		#	}
		#	add_building = great_temple
		#}
		#Mahayana Head Temples
		every_province = { #Lotus Sutra
			limit = {
				OR = {
					AND = {
						is_year = 741
						province_id = 2280 #Todai-ji in Nara, Japan
					}
					AND = {
						is_year = 807
						province_id = 2283 #Enrakyu-ji and Mt. Hiei in Kyoto
					}
				}
			}
			set_province_flag = head_temple_lotus_sutra
			add_province_modifier = { name = temple_town_lotus_sutra duration = -1 }
			every_neighbor_province = { add_province_modifier = { name = temple_town_lotus_sutra duration = -1 } }
		}
		every_province = { #Meditation Buddhism
			limit = {
				OR = {
					AND = {
						is_year = 1244
						province_id = 2284 #Eihei-ji in Fukui (Echizen)
					}
					AND = {
						is_year = 1339
						province_id = 2283 #Tenryu-ji in Kyoto
					}
				}
			}
			set_province_flag = head_temple_meditation
			add_province_modifier = { name = temple_town_meditation duration = -1 }
			every_neighbor_province = {
				limit = { NOT = { has_province_modifier = temple_town_lotus_sutra } }
				add_province_modifier = { name = temple_town_meditation duration = -1 }
			}
		}
		every_province = { #Pure Land Buddhism
			limit = {
				OR = {
					AND = {
						is_year = 1321
						NOT = { is_year = 1471 }
						province_id = 2283 #Hongan-ji in Kyoto
					}
					AND = {
						is_year = 1476
						NOT = { is_year = 1506 }
						province_id = 2284 #Yoshizaki-gobo in Fukui (Echizen)
					}
					AND = {
						is_year = 1506
						NOT = { is_year = 1580 }
						province_id = 2279 #Ishiyama Hongan-ji in Osaka (Settsu)
					}
				}
			}
			set_province_flag = head_temple_pure_land
			add_province_modifier = { name = temple_town_pure_land duration = -1 }
			every_neighbor_province = {
				limit = {
					NOT = { has_province_modifier = temple_town_lotus_sutra }
					NOT = { has_province_modifier = temple_town_meditation }
				}
				add_province_modifier = { name = temple_town_pure_land duration = -1 }
			}
		}
		if = {
			limit = { is_year = 1457 }
			set_global_flag = abbot_rennyo
		}
		if = {
			limit = { is_year = 1488 }
			set_global_flag = ikko_ikki
		}
		every_province = {
			limit = { owned_by = IKK }
			add_province_modifier = { name = temple_town_pure_land duration = -1 }
			every_neighbor_province = {
				add_province_modifier = { name = temple_town_pure_land duration = -1 }
				add_province_modifier = { name = ikki_league duration = 10000 }
			}
		}
		every_province = { #Nichiren Buddhism
			limit = {
				OR = {
					AND = {
						is_year = 1290
						province_id = 2277 #Taiseki-ji, Mt. Fuji, Shizuoka (Musashi)
					}
					AND = { #By the end of the 15th century the majority of townsmen in and around Kyoto were Nichirenshu; great power in Kyoto
						is_year = 1488
						province_id = 2283 # Yamashiro
					}
				}
			}
			set_province_flag = head_temple_nichiren
			add_province_modifier = { name = temple_town_nichiren duration = -1 }
			every_neighbor_province = {
				limit = {
					NOT = { has_province_modifier = temple_town_lotus_sutra }
					NOT = { has_province_modifier = temple_town_meditation }
					NOT = { has_province_modifier = temple_town_pure_land }
				}
				add_province_modifier = { name = temple_town_nichiren duration = -1 }
			}
		}
		#Mahayana sects
		every_country = {
			limit = { religion = mahayana }
			if = {
				limit = { ai = no }
				country_event = { id = dg_mahayana.001 days = 30 }
			}
			if = {
				limit = { ai = yes }
				if = {
					limit = {
						OR = {
							korean_culture_trigger = yes
							primary_culture = vietnamese
						}
					}
					set_country_flag = confucianism_dominates
					add_ruler_modifier = { name = confucianism_dominates }
					add_country_modifier = { name = examination_system_five_studies duration = -1 }
				}
				if = {
					limit = { tag = IKK }
					every_owned_province = {
						remove_province_modifier = temple_town_meditation
						remove_province_modifier = temple_town_nichiren
						remove_province_modifier = temple_town_lotus_sutra
						add_province_modifier = { name = temple_town_pure_land duration = -1 }
					}
					clr_country_flag = meditation_buddhism
					clr_country_flag = lotus_sutra_buddhism
					clr_country_flag = nichiren_buddhism
					set_country_flag = pure_land_buddhism
					add_ruler_modifier = { name = pure_land_buddhism duration = -1 }
				}
				if = {
					limit = {
						NOT = { has_country_modifier = confucianism_dominates }
						any_owned_province = { has_province_modifier = temple_town_meditation }
					}
					set_country_flag = meditation_buddhism
					add_ruler_modifier = { name = meditation_buddhism duration = -1 }
				}
				if = {
					limit = {
						NOT = { has_country_modifier = confucianism_dominates }
						NOT = { has_country_flag = meditation_buddhism }
						any_owned_province = { has_province_modifier = temple_town_lotus_sutra }
						NOT = { tag = IKK }
					}
					set_country_flag = lotus_sutra_buddhism
					add_ruler_modifier = { name = lotus_sutra_buddhism duration = -1 }
				}
				if = {
					limit = {
						NOT = { has_country_modifier = confucianism_dominates }
						NOT = { has_country_flag = meditation_buddhism }
						NOT = { has_country_flag = lotus_sutra_buddhism }
						any_owned_province = { has_province_modifier = temple_town_pure_land }
						NOT = { tag = IKK }
					}
					set_country_flag = pure_land_buddhism
					add_ruler_modifier = { name = pure_land_buddhism duration = -1 }
				}
				if = {
					limit = {
						NOT = { has_country_modifier = confucianism_dominates }
						NOT = { has_country_flag = meditation_buddhism }
						NOT = { has_country_flag = lotus_sutra_buddhism }
						NOT = { has_country_flag = pure_land_buddhism }
						any_owned_province = { has_province_modifier = temple_town_nichiren }
						NOT = { tag = IKK }
					}
					set_country_flag = nichiren_buddhism
					add_ruler_modifier = { name = nichiren_buddhism duration = -1 }
				}
			}
		}
		#Preventing countries from owning more than one Great Temple (e.g. Ottomans, Mamelukes)
		every_country = {
			limit = {
				num_of_owned_provinces_with = {
					has_province_flag = great_temple_built
					value = 2
				}
			}
			every_owned_province = {
				clr_province_flag = great_temple
				clr_province_flag = great_cathedral
				clr_province_flag = great_synagogue
				clr_province_flag = great_mosque
				remove_building = great_temple
				add_building = temple
			}
			random_owned_province = {
				limit = {
					is_capital = yes
					has_province_flag = great_temple_built
				}
				if = {
					limit = { owner = { religion_group = christian } }
					#add_province_modifier = { name = great_cathedral duration = -1 }
					set_province_flag = great_cathedral
					add_building = great_temple
				}
				if = {
					limit = { owner = { religion_group = muslim } }
					#add_province_modifier = { name = great_mosque duration = -1 }
					set_province_flag = great_mosque
					add_building = great_temple
				}
				if = {
					limit = { owner = { religion_group = jewish_group } }
					#add_province_modifier = { name = great_synagogue duration = -1 }
					set_province_flag = great_synagogue
					add_building = great_temple
				}
				if = {
					limit = {
						owner = { NOT = { religion_group = christian } }
						owner = { NOT = { religion_group = muslim } }
						owner = { NOT = { religion_group = jewish_group } }
					}
					#add_province_modifier = { name = great_temple duration = -1 }
					add_building = great_temple
					set_province_flag = great_temple
				}
			}
		}
		if = {
			limit = {
				#NOT = { any_owned_province = { has_province_modifier = great_temple } }
				#NOT = { any_owned_province = { has_province_modifier = great_cathedral } }
				#NOT = { any_owned_province = { has_province_modifier = great_mosque } }
				#NOT = { any_owned_province = { has_province_modifier = great_synagogue } }
				NOT = { any_owned_province = { has_building = great_temple } }
			}
			random_owned_province = {
				limit = { has_province_flag = great_temple_built }
				if = {
					limit = { owner = { religion_group = christian } }
					#add_province_modifier = { name = great_cathedral duration = -1 }
					set_province_flag = great_cathedral
					add_building = great_temple
				}
				if = {
					limit = { owner = { religion_group = muslim } }
					#add_province_modifier = { name = great_mosque duration = -1 }
					add_building = great_temple
					set_province_flag = great_mosque
				}
				if = {
					limit = { owner = { religion_group = jewish_group } }
					#add_province_modifier = { name = great_synagogue duration = -1 }
					add_building = great_temple
					set_province_flag = great_synagogue
				}
				if = {
					limit = {
						owner = { NOT = { religion_group = christian } }
						owner = { NOT = { religion_group = muslim } }
						owner = { NOT = { religion_group = jewish_group } }
					}
					#add_province_modifier = { name = great_temple duration = -1 }
					add_building = great_temple
					set_province_flag = great_temple
				}
			}
		}
		###Shi'ite History
		if = {
			limit = { PER = { num_of_cities = 1 religion = shiite } }
			set_global_flag = safaviyya_dynasty
			set_global_flag = safaviyya_founded
		}
		###Confucian countries
		if = {
			limit = {
				religion = confucianism
			}
			if = {
				limit = { num_of_cities = 8 }
				if = {
					limit = { NOT = { chinese_culture_trigger = yes } }
					if = {
						limit = { is_year = 1661 }
						set_country_flag = confucian_translated_exams_encouraged
						if = {
							limit = { is_year = 1722 }
							set_country_flag = confucian_translated_exams
							add_country_modifier = { name = examination_system_translated_exams duration = -1 }
						}
					}
					if = {
						limit = { NOT = { is_year = 1722 } }
						add_country_modifier = { name = examination_system_quotas duration = -1 }
					}
				}
				if = {
					limit = { chinese_culture_trigger = yes }
					if = {
						limit = { is_year = 1370 }
						set_country_flag = confucian_eight_legged_essay_encouraged
						if = {
							limit = { is_year = 1487 }
							set_country_flag = confucian_eight_legged_essay
							add_country_modifier = { name = examination_system_eight_legged_essay duration = -1 }
						}
					}
					if = {
						limit = { NOT = { is_year = 1487 } }
						add_country_modifier = { name = examination_system_classics duration = -1 }
					}
				}
			}
		}
		###Miaphysite countries
		if = {
			limit = {
				religion = coptic
				any_country = {
					OR = {
						is_neighbor_of = ROOT
						NOT = { border_distance = { who = ROOT distance = 50 } }
						alliance_with = ROOT
						marriage_with = ROOT
					}
					any_owned_province = { NOT = { continent = sub_sahara } NOT = { superregion = north_africa_superregion } NOT = { continent = southeast_asia } NOT = { continent = east_asia } }
					religion_group = christian
					NOT = { religion = ROOT }
				}
			}
			set_country_flag = met_other_christians
		}
		###Catholic centers of pilgrimage
		every_province = { #Catholic centers of pilgrimage
			limit = {
				OR = {
					province_id = 105 #Ancona (the Holy House)
					province_id = 2832 #Czestochowa (the Black Madonna)
					province_id = 22 #Trondheim (Shrine of St. Olaf)
					province_id = 206 #Santiago (the Way of Saint James)
					province_id = 1409 #Cantabria (the Way of Saint James)
					province_id = 2530 #Rome (the Vatican)
					province_id = 1379 #Umbria (the Basilica of St. Francis of Assisi)
					AND = {
						is_year = 1531
						province_id = 1471 #Mexico City (Our Lady of Guadeloupe)
					}
					#Potential and past pilgrimages
					province_id = 318 #Izmir (Ephesus; the House of the Virgin Mary)
					province_id = 379 #Judea (Jerusalem)
					province_id = 364 #Nabulus (Nazareth, the Sea of Galilee)
				}
			}
			set_province_flag = catholic_pilgrimage
		}
		every_province = {
			limit = {
				owner = { religion = catholic }
				owner = { NOT = { has_country_flag = excommunicated } }
				has_province_flag = catholic_pilgrimage
			}
			add_province_modifier = { name = catholic_pilgrimage duration = -1 }
		}
		every_province = {
			limit = {
				owner = { religion = catholic }
				owner = { NOT = { has_country_flag = excommunicated } }
				has_province_flag = catholic_archbishopric
			}
			add_province_modifier = { name = catholic_archbishopric duration = -1 }
		}
		every_province = {
			limit = {
				owner = { religion = catholic }
				owner = { NOT = { has_country_flag = excommunicated } }
				has_province_flag = catholic_patriarchate
			}
			add_province_modifier = { name = catholic_patriarchate duration = -1 }
		}
		every_province = {
			limit = {
				has_cardinal = yes
				has_province_modifier = catholic_archbishopric
			}
			random = {
				chance = 30
				random_list = {
					20 = { set_province_flag = cardinal_1_year }
					20 = { set_province_flag = cardinal_5_years }
					20 = { set_province_flag = cardinal_10_years }
					20 = { set_province_flag = cardinal_20_years }
					20 = { set_province_flag = cardinal_40_years }
				}
			}
			if = {
				limit = { superregion = italy_superregion }
				random = {
					chance = 30
					random_list = {
						20 = { set_province_flag = cardinal_1_year }
						20 = { set_province_flag = cardinal_5_years }
						20 = { set_province_flag = cardinal_10_years }
						20 = { set_province_flag = cardinal_20_years }
						20 = { set_province_flag = cardinal_40_years }
					}
				}
			}
		}
		every_province = {
			limit = {
				has_cardinal = yes
				NOT = { has_province_flag = cardinal_1_year }
				NOT = { has_province_flag = cardinal_5_years }
				NOT = { has_province_flag = cardinal_10_years }
				NOT = { has_province_flag = cardinal_20_years }
				NOT = { has_province_flag = cardinal_40_years }
			}
			remove_cardinal = yes
			set_country_flag = cardinal_dies
		}
		###Pilgrimage routes
		every_country = {
			limit = { religion = catholic }
			hidden_effect = {
				every_owned_province = {
					limit = { has_province_modifier = catholic_pilgrimage }
					every_neighbor_province = {
						change_variable = { which = pilgrimage_route value = -3 } #To avoid one-province loops
						every_neighbor_province = {
							limit = { culture_group = PREV }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { any_neighbor_province = { NOT = { culture_group = PREV } } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { culture = PREV }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { any_neighbor_province = { NOT = { culture = PREV } } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { is_capital = yes }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { has_port = yes }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { base_tax = 4 }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { base_tax = 8 }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { base_tax = 12 }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { base_tax = 16 }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { owner = { num_of_cities = 4 } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { owner = { num_of_cities = 8 } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { owner = { num_of_cities = 16 } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { owner = { num_of_cities = 32 } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { owner = { num_of_cities = 64 } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { has_province_modifier = center_of_trade_modifier }
							change_variable = { which = pilgrimage_route value = 2 }
						}
						every_neighbor_province = {
							limit = { any_neighbor_province = { has_province_modifier = catholic_pilgrimage } }
							set_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { any_neighbor_province = { has_province_modifier = center_of_trade_modifier  } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { any_neighbor_province = { has_province_modifier = pilgrimage_route } } #Connecting pilgrimages
							change_variable = { which = pilgrimage_route value = 3 }
						}
						every_neighbor_province = {
							limit = { NOT = { religion = catholic } }
							set_variable = { which = pilgrimage_route value = 0 }
						}
						every_neighbor_province = {
							limit = { NOT = { owner = { religion = catholic } } }
							set_variable = { which = pilgrimage_route value = 0 }
						}
					}
					random_neighbor_province = {
						limit = {
							religion = catholic
							NOT = { has_province_modifier = catholic_pilgrimage }
							NOT = { has_province_modifier = pilgrimage_route }
							any_neighbor_province = { check_variable = { which = pilgrimage_route value = 12 } }
						}
						add_province_modifier = { name = pilgrimage_route duration = -1 }
						random_neighbor_province = {
							limit = {
								religion = catholic
								NOT = { has_province_modifier = catholic_pilgrimage }
								NOT = { has_province_modifier = pilgrimage_route }
								NOT = { any_neighbor_province = { has_province_modifier = catholic_pilgrimage } }
								check_variable = { which = pilgrimage_route value = 12 }
							}
							add_province_modifier = { name = pilgrimage_route duration = -1 }
						}
						PREV = {
							every_neighbor_province = {
								set_variable = { which = pilgrimage_route value = 0 }
								every_neighbor_province = {
									set_variable = { which = pilgrimage_route value = 0 }
								}
							}
						}
					} #End search
				} #End hidden
				random_neighbor_province = {
					limit = {
						religion = catholic
						NOT = { has_province_modifier = catholic_pilgrimage }
						NOT = { has_province_modifier = pilgrimage_route }
						any_neighbor_province = { check_variable = { which = pilgrimage_route value = 9 } }
					}
					add_province_modifier = { name = pilgrimage_route duration = -1 }
					random_neighbor_province = {
						limit = {
							religion = catholic
							NOT = { has_province_modifier = catholic_pilgrimage }
							NOT = { has_province_modifier = pilgrimage_route }
							check_variable = { which = pilgrimage_route value = 9 }
						}
						add_province_modifier = { name = pilgrimage_route duration = -1 }
						random_neighbor_province = {
							limit = {
								religion = catholic
								NOT = { has_province_modifier = catholic_pilgrimage }
								NOT = { has_province_modifier = pilgrimage_route }
								check_variable = { which = pilgrimage_route value = 9 }
							}
							add_province_modifier = { name = pilgrimage_route duration = -1 }
						}
						PREV = {
							every_neighbor_province = {
								set_variable = { which = pilgrimage_route value = 0 }
								every_neighbor_province = {
									set_variable = { which = pilgrimage_route value = 0 }
								}
							}
						}
					} #End search
					random_neighbor_province = {
						limit = {
							religion = catholic
							NOT = { has_province_modifier = catholic_pilgrimage }
							NOT = { has_province_modifier = pilgrimage_route }
							check_variable = { which = pilgrimage_route value = 6 }
						}
						add_province_modifier = { name = pilgrimage_route duration = -1 }
						random_neighbor_province = {
							limit = {
								religion = catholic
								NOT = { has_province_modifier = catholic_pilgrimage }
								NOT = { has_province_modifier = pilgrimage_route }
								check_variable = { which = pilgrimage_route value = 6 }
							}
							add_province_modifier = { name = pilgrimage_route duration = -1 }
						}
						PREV = {
							every_neighbor_province = {
								set_variable = { which = pilgrimage_route value = 0 }
								every_neighbor_province = {
									set_variable = { which = pilgrimage_route value = 0 }
								}
							}
						}
					} #End search
					random_neighbor_province = {
						limit = {
							religion = catholic
							NOT = { has_province_modifier = catholic_pilgrimage }
							NOT = { has_province_modifier = pilgrimage_route }
							check_variable = { which = pilgrimage_route value = 3 }
						}
						add_province_modifier = { name = pilgrimage_route duration = -1 }
						random_neighbor_province = {
							limit = {
								religion = catholic
								NOT = { has_province_modifier = catholic_pilgrimage }
								NOT = { has_province_modifier = pilgrimage_route }
								check_variable = { which = pilgrimage_route value = 3 }
							}
							add_province_modifier = { name = pilgrimage_route duration = -1 }
						}
						PREV = {
							every_neighbor_province = {
								set_variable = { which = pilgrimage_route value = 0 }
								every_neighbor_province = {
									set_variable = { which = pilgrimage_route value = 0 }
								}
							}
						}
					} #End search
				} #End hidden
			}
		}
		every_country = {
			limit = { religion = hinduism }
			every_owned_province = {
				limit = { has_province_modifier = hindu_pilgrimage }
				every_neighbor_province = {
					hidden_effect = {
						change_variable = { which = pilgrimage_route value = -3 }
						every_neighbor_province = {
							limit = { culture_group = PREV }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { any_neighbor_province = { NOT = { culture_group = PREV } } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { culture = PREV }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { any_neighbor_province = { NOT = { culture = PREV } } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { is_capital = yes }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { has_port = yes }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { base_tax = 4 }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { base_tax = 8 }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { base_tax = 12 }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { base_tax = 16 }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { owner = { num_of_cities = 4 } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { owner = { num_of_cities = 8 } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { owner = { num_of_cities = 16 } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { owner = { num_of_cities = 32 } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { owner = { num_of_cities = 64 } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { has_province_modifier = center_of_trade_modifier }
							change_variable = { which = pilgrimage_route value = 2 }
						}
						every_neighbor_province = {
							limit = { any_neighbor_province = { has_province_modifier = center_of_trade_modifier  } }
							change_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { any_neighbor_province = { has_province_modifier = hindu_pilgrimage } }
							set_variable = { which = pilgrimage_route value = 1 }
						}
						every_neighbor_province = {
							limit = { any_neighbor_province = { has_province_modifier = pilgrimage_route } } #Connecting pilgrimages
							change_variable = { which = pilgrimage_route value = 3 }
						}
						every_neighbor_province = {
							limit = { NOT = { religion = hinduism } }
							set_variable = { which = pilgrimage_route value = 0 }
						}
						every_neighbor_province = {
							limit = { NOT = { owner = { religion = hinduism } } }
							set_variable = { which = pilgrimage_route value = 0 }
						}
					}
				}
				random_neighbor_province = {
					limit = {
						religion = hinduism
						NOT = { has_province_modifier = hindu_pilgrimage }
						NOT = { has_province_modifier = pilgrimage_route }
						any_neighbor_province = { check_variable = { which = pilgrimage_route value = 12 } }
					}
					add_province_modifier = { name = pilgrimage_route duration = -1 }
					random_neighbor_province = {
						limit = {
							religion = hinduism
							NOT = { has_province_modifier = hindu_pilgrimage }
							NOT = { has_province_modifier = pilgrimage_route }
							NOT = { any_neighbor_province = { has_province_modifier = hindu_pilgrimage } }
							check_variable = { which = pilgrimage_route value = 12 }
						}
						add_province_modifier = { name = pilgrimage_route duration = -1 }
					}
					PREV = {
						every_neighbor_province = {
							set_variable = { which = pilgrimage_route value = 0 }
							every_neighbor_province = {
								set_variable = { which = pilgrimage_route value = 0 }
							}
						}
					}
				} #End search
				random_neighbor_province = {
					limit = {
						religion = hinduism
						NOT = { has_province_modifier = hindu_pilgrimage }
						NOT = { has_province_modifier = pilgrimage_route }
						any_neighbor_province = { check_variable = { which = pilgrimage_route value = 9 } }
					}
					add_province_modifier = { name = pilgrimage_route duration = -1 }
					random_neighbor_province = {
						limit = {
							religion = hinduism
							NOT = { has_province_modifier = hindu_pilgrimage }
							NOT = { has_province_modifier = pilgrimage_route }
							check_variable = { which = pilgrimage_route value = 9 }
						}
						add_province_modifier = { name = pilgrimage_route duration = -1 }
					}
					PREV = {
						every_neighbor_province = {
							set_variable = { which = pilgrimage_route value = 0 }
							every_neighbor_province = {
								set_variable = { which = pilgrimage_route value = 0 }
							}
						}
					}
				} #End search
				random_neighbor_province = {
					limit = {
						religion = hinduism
						NOT = { has_province_modifier = hindu_pilgrimage }
						NOT = { has_province_modifier = pilgrimage_route }
						any_neighbor_province = { check_variable = { which = pilgrimage_route value = 6 } }
					}
					add_province_modifier = { name = pilgrimage_route duration = -1 }
					random_neighbor_province = {
						limit = {
							religion = hinduism
							NOT = { has_province_modifier = hindu_pilgrimage }
							NOT = { has_province_modifier = pilgrimage_route }
							check_variable = { which = pilgrimage_route value = 6 }
						}
						add_province_modifier = { name = pilgrimage_route duration = -1 }
					}
					PREV = {
						every_neighbor_province = {
							set_variable = { which = pilgrimage_route value = 0 }
							every_neighbor_province = {
								set_variable = { which = pilgrimage_route value = 0 }
							}
						}
					}
				} #End search
				random_neighbor_province = {
					limit = {
						religion = hinduism
						NOT = { has_province_modifier = hindu_pilgrimage }
						NOT = { has_province_modifier = pilgrimage_route }
						any_neighbor_province = { check_variable = { which = pilgrimage_route value = 3 } }
					}
					add_province_modifier = { name = pilgrimage_route duration = -1 }
					random_neighbor_province = {
						limit = {
							religion = hinduism
							NOT = { has_province_modifier = hindu_pilgrimage }
							NOT = { has_province_modifier = pilgrimage_route }
							check_variable = { which = pilgrimage_route value = 3 }
						}
						add_province_modifier = { name = pilgrimage_route duration = -1 }
					}
					PREV = {
						every_neighbor_province = {
							set_variable = { which = pilgrimage_route value = 0 }
							every_neighbor_province = {
								set_variable = { which = pilgrimage_route value = 0 }
							}
						}
					}
				} #End search
			}
		}
		###Historic decisions and events setup (perform after adding religious minorities)
		hidden_effect = {
			# French wars of religion
			if = {
				limit = { is_year = 1562 NOT = { is_year = 1598 } }
				FRA = {
					every_owned_province = {
						limit = {
							OR = {
								province_id = 2361 #Montpesliers
								province_id = 3373 #Carcin
								province_id = 176 #Bordeaux
								province_id = 172 #La Rochelle
							}
							religion = reformed
						}
						add_province_modifier = { name = heretic_bastion duration = 2200 }
						spawn_rebels = { type = reformed_rebels size = 1 }
						change_controller = REB
					}
					set_country_flag = religious_turmoil_happening
					set_country_flag = religious_turmoil_reformed
					change_variable = { which = religious_intolerance value = 3 }
				}
			}
			# Din i-ilahi
			if = {
				limit = { is_year = 1582 }
				set_global_flag = din_i_ilahi
				if = {
					limit = { NOT = { is_year = 1605 } }
					MUG = { country_event = { id = dg_islam.028 days = 0 } }
				}
			}
			# Ikko-Ikki
			# Founding of Osaka
			if = {
				limit = { is_year = 1457 }
				set_global_flag = abbot_rennyo
			}
			if = {
				limit = { is_year = 1496 }
				2279 = { set_province_flag = ishiyama_honganji }
				set_global_flag = ishiyama_honganji
			}
			if = {
				limit = { is_year = 1506 }
				set_global_flag = ikko_ikki
			}
			if = {
				limit = { is_year = 1511 }
				set_global_flag = yuiitso_shinto
			}
			if = {
				limit = { is_year = 1583 }
				2279 = {
					clr_province_flag = ishiyama_honganji
					#add_base_tax = 1
					#add_base_manpower = 1
					rename_capital = Osaka
				}
			}
			# Swiss Guard
			if = {
				limit = { is_year = 1506 }
				PAP = {
					capital_scope = { add_province_modifier = { name = swiss_guard duration = -1 } }
					set_country_flag = swiss_guards
					set_country_flag = swiss_mercenaries
				}
			}
			# Sufis and Ulama
			# Khmer
			if = {
				limit = {
					NOT = { is_year = 1400 }
					KHM = { NOT = { religion = hinduism } }
				}
				KHM = { set_country_flag = was_hinduism }
			}
			if = {
				limit = {
					NOT = { is_year = 1360 }
					KHM = { NOT = { religion = hinduism } }
				}
				KHM = { set_variable = { which = sympathy_to_old_religion value = 20 } }
			}
			# Lollardy
			if = {
				limit = { is_year = 1373 } #Wycliffe criticizes the church and John of Gaunt protects him
				PAP = { change_variable = { which = lollard_heresy value = 1 } }
				ENG = {
					set_country_flag = lollard_preacher
					set_country_flag = lollard_sympathy
					random_owned_province = {
						limit = {
							NOT = { is_religion_enabled = hussite }
							has_owner_culture = yes
							university_province_trigger = yes
						}
						set_province_flag = lollard_origins
						change_variable = { which = lollard_supporters value = 4 }
						random_neighbor_province = {
							limit = {
								OR = { culture = english culture = northern_e }
								NOT = { check_variable = { which = lollard_supporters value = 1 } }
							}
							change_variable = { which = lollard_supporters value = 3 }
						}
						random_neighbor_province = {
							limit = {
								OR = { culture = english culture = northern_e }
								NOT = { check_variable = { which = lollard_supporters value = 1 } }
							}
							change_variable = { which = lollard_supporters value = 3 }
						}
					}
					random_owned_province = {
						limit = {
							NOT = { is_religion_enabled = hussite }
							OR = { culture = english culture = northern_e }
							NOT = { check_variable = { which = lollard_supporters value = 1 } }
							any_neighbor_province = { check_variable = { which = lollard_supporters value = 1 } }
						}
						change_variable = { which = lollard_supporters value = 2 }
					}
				}
			}
			if = {
				limit = { is_year = 1381 } #Lollard Revolt in England and the Council of Blackfriars
				PAP = { change_variable = { which = lollard_heresy value = 1 } }
				ENG = {
					every_owned_province = {
						limit = {
							NOT = { is_religion_enabled = hussite }
							check_variable = { which = lollard_supporters value = 1 }
						}
						change_variable = { which = lollard_supporters value = 2 }
					}
					random_owned_province = {
						limit = {
							NOT = { is_religion_enabled = hussite }
							OR = { culture = english culture = northern_e }
							NOT = { check_variable = { which = lollard_supporters value = 1 } }
							any_neighbor_province = { check_variable = { which = lollard_supporters value = 1 } }
						}
						change_variable = { which = lollard_supporters value = 2 }
					}
				}
			}
			if = {
				limit = { is_year = 1382 } #Marriage of Richard II to Anne of Bohemia allows Lollardy to spread to Bohemia; Wycliffe dismissed
				PAP = { set_country_flag = hussite_origins_determined }
				random_province = {
					limit = {
						culture = czech
						university_province_trigger = yes
						NOT = { is_religion_enabled = hussite }
					}
					set_province_flag = lollardy_spreads
				}
			}
			if = {
				limit = { is_year = 1384 } #Lollard Bible published in England
				ENG = {
					clr_country_flag = lollard_preacher
					random_owned_province = {
						limit = {
							NOT = { is_religion_enabled = hussite }
							OR = { culture = english culture = northern_e }
							NOT = { check_variable = { which = lollard_supporters value = 1 } }
							any_neighbor_province = { check_variable = { which = lollard_supporters value = 1 } }
						}
						change_variable = { which = lollard_supporters value = 2 }
					}
				}
			}
			if = {
				limit = { is_year = 1395 } #Lollard Petition presented to parliament
				ENG = {
					clr_country_flag = lollard_sympathy
					set_country_flag = lollard_persecution
				}
				PAP = { change_variable = { which = lollard_heresy value = 1 } }
			}
			if = {
				limit = { is_year = 1400 } #Lollardy spreads to Bohemia
				BOH = {
					random_owned_province = {
						limit = { has_province_flag = lollardy_spreads }
						set_province_flag = hussite_origins
						set_province_flag = hussite_holy_land
						every_neighbor_province = { set_province_flag = hussite_holy_land }
						change_variable = { which = lollard_supporters value = 4 }
						random_neighbor_province = {
							limit = {
								culture = czech
								NOT = { check_variable = { which = lollard_supporters value = 2 } }
							}
							change_variable = { which = lollard_supporters value = 4 }
						}
					}
					every_province = {
						limit = {
							culture = czech
							NOT = { base_tax = 8 }
						}
						change_variable = { which = lollard_supporters value = 2 }
					}
				}
			}
			if = {
				limit = {
					is_year = 1401 #Heresy Laws in England
					NOT = { is_year = 1559 } #Heresy Laws repealed
				}
				ENG = { add_country_modifier = { name = heresy_laws duration = -1 } }
			}
			if = {
				limit = { is_year = 1413 } #Oldcastle's Rebellion
				PAP = { change_variable = { which = lollard_heresy value = 1 } }
			}
			if = {
				limit = {
					is_year = 1414 #Sigismund guarantees safe passage for Hus
					NOT = { is_year = 1418 } #Council of Constance ends
				}
				PAP = { set_country_flag = lollard_safe_passage }
				PAP = { set_variable = { which = council_topic_lollardy value = 1 } }
				PAP = { set_variable = { which = council_topic_schism value = 1 } }
				HUN = { set_country_flag = lollard_safe_passage_guarantor }
			}
			if = {
				limit = { is_year = 1415 }
				PAP = { set_country_flag = lollardy_banned }
			}
			if = {
				limit = { is_year = 1419 } #The Hussite Wars begin
				PAP = { set_country_flag = hussite_wars }
				BOH = { set_country_flag = hussite_wars_target }
			}
			if = {
				limit = { is_year = 1419 NOT = { is_year = 1422 } } #Hussite Wars, part 1
				BOH = {
					subtract_stability_2 = yes
					set_country_flag = religious_civil_war
				}
			}
			if = {
				limit = { is_year = 1420 }
				PAP = { set_country_flag = community_of_tabor }
				POL = { set_country_flag = hussite_confederation }
			}
			if = {
				limit = { is_year = 1422 }
				BOH = { set_country_flag = hussite_crown }
				POL = {
					set_country_flag = hussite_crown
					set_country_flag = hussite_crown_refused
				}
			}
			if = {
				limit = { is_year = 1423 }
				BOH = {
					clr_country_flag = hussite_crown
					set_country_flag = hussite_wars_second_phase
				}
				POL = { clr_country_flag = hussite_crown }
			}
			if = {
				limit = { is_year = 1423 NOT = { is_year = 1432 } } #Hussite Wars, part 2
				BOH = {
					subtract_stability_2 = yes
					set_country_flag = religious_civil_war
				}
			}
			if = {
				limit = { is_year = 1427 }
				BOH = { set_country_flag = hussite_offensive }
			}
			if = {
				limit = {
					is_year = 1433
					NOT = { is_year = 1471 }
				}
				BOH = {
					set_country_flag = hussite_compacta
					set_country_flag = was_hussite
					set_variable = { which = sympathy_to_old_religion value = 60 }
					add_country_modifier = { name = edict_of_tolerance duration = -1 }
				}
				PAP = { set_country_flag = hussite_compacta_signed }
			}
			if = {
				limit = {
					is_year = 1439
					BYZ = { NOT = { religion = catholic } }
				}
				BYZ = { set_country_flag = union_of_florence set_country_flag = crusade_promised }
			}
			if = {
				limit = {
					is_year = 1443
					NOT = { is_year = 1471 }
				}
				BOH = { set_variable = { which = sympathy_to_old_religion value = 40 } }
			}
			if = {
				limit = {
					is_year = 1453
					NOT = { is_year = 1471 }
				}
				BOH = { set_variable = { which = sympathy_to_old_religion value = 20 } }
			}
			if = {
				limit = { is_year = 1462 }
				PAP = { set_country_flag = hussite_compacta_voided }
			}
			if = {
				limit = {
					NOT = { has_global_flag = living_pope }
					PAP = { OR = { has_regency = no has_consort_regency = yes } }
				}
				set_global_flag = living_pope
				random_list = {
					30 = { PAP = { set_country_flag = reformer_pope } }
					40 = { PAP = { set_country_flag = secular_pope } }
					30 = { PAP = { set_country_flag = corrupt_pope } }
				}
			}
			if = {
				limit = { is_year = 1549 }
				set_global_flag = libri_carolini
			}
			every_country = {
				limit = {
					religion = protestant
					is_year = 1580
				}
				set_country_flag = formula_of_concord
			}
			every_country = {
				limit = { religion = hinduism }
				set_variable = { which = caste_system value = 2 }
			}
			random_country = { #Encourages historical conversion to Catholicism
				limit = {
					tag = LIT
					NOT = { religion_group = christian }
				}
				capital_scope = {
					change_variable = { which = catholic value = 4 }
					change_variable = { which = orthodox value = -4 }
				}
			}
			random_country = {
				limit = {
					tag = PRM
					NOT = { religion_group = christian }
				}
				capital_scope = {
					change_variable = { which = orthodox value = 4 }
				}
			}
			random_country = {
				limit = {
					tag = OIR
					NOT = { religion_group = taoic }
				}
				capital_scope = {
					change_variable = { which = vajrayana value = 4 }
				}
			}
			#Inquisitions
			random_country = {
				limit = {
					OR = { tag = CAS tag = SPA }
					is_year = 1478
					NOT = { is_year = 1834 }
				}
				set_variable = { which = inquisition value = 2 }
			}
			random_country = {
				limit = {
					tag = POR
					is_year = 1536
					NOT = { is_year = 1634 }
				}
				set_variable = { which = inquisition value = 2 }
			}
			random_country = {
				limit = {
					tag = POR
					is_year = 1634
					NOT = { is_year = 1821 }
				}
				set_variable = { which = inquisition value = 1 }
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1542
					NOT = { is_year = 1908 }
				}
				set_variable = { which = inquisition value = 2 }
			}
			#sikhism Events
			if = {
				limit = { is_year = 1496 }
				507 = { set_province_flag = sikhism_origins set_province_flag = sikhism_holy_land }
			}
			#Muslim Caliphs
			random_country = {
				limit = {
					tag = MAM
					num_of_cities = 6
					is_free_or_tributary_trigger = yes
				}
				set_country_flag = caliph
				set_country_flag = captive_caliph
			}
			if = {
				limit = { is_year = 1356 }
				OTT = {
					set_country_flag = christian_jizya
					set_country_flag = christian_devsirme
				}
				if = {
					limit = { is_year = 1453 }
					TUR = { set_country_flag = christians_tolerated } #Millet system
				}
			}
			random_country = {
				limit = {
					tag = TUR
					is_year = 1518
				}
				set_country_flag = caliph
				set_country_flag = ruler_as_caliph
			}
			random_country = {
				limit = {
					tag = MOR
					is_year = 1510 #Saadi dynasty
				}
				set_country_flag = caliph
				set_country_flag = ruler_as_caliph
			}
			random_country = {
				limit = {
					tag = SOK
					is_year = 1804 #Sokoto Caliphate
				}
				set_country_flag = caliph
				set_country_flag = ruler_as_caliph
			}
			#Catholic Schisms
			random_country = {
				limit = {
					tag = AVI
					num_of_cities = 1
					NOT = { is_year = 1417 }
				}
				set_global_flag = catholic_schism
				set_country_flag = western_schism
				add_opinion = { who = PAP modifier = rival_popes }
				reverse_add_opinion = { who = PAP modifier = rival_popes }
				change_government = papal_government
			}
			#Catholic Theology and Councils
			if = {
				limit = { is_year = 1378 }
				PAP = { set_country_flag = conciliar_movement }
			}
			if = {
				limit = { is_year = 1409 }
				every_country = {
					limit = {
						religion = catholic
						NOT = { government = theocracy }
						capital_distance = { who = PAP distance = 260 }
						#should have exceptions for countries that have deals
					}
					set_country_flag = conciliarism_supported
				}
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1409
					NOT = { is_year = 1410 }
				}
				set_country_flag = church_council #Council of Pisa (disputed)
				change_variable = { which = council_topic_schism value = 1 }
				1380 = { #Pisa
					save_global_event_target_as = council_site
					set_province_flag = church_council
					add_province_modifier = {
						name = church_council
						duration = 90
					}
				}
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1410
				}
				set_country_flag = regular_councils_promised
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1414 #Council of Constance
					NOT = { is_year = 1418 }
				}
				set_country_flag = church_council #Council of Constance
				2622 = { #Konstanz
					set_province_flag = church_council
					save_global_event_target_as = council_site
					add_province_modifier = {
						name = church_council
						duration = 365
					}
				}
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1415 #Council of Constance
				}
				set_country_flag = martyrdom_of_jan_hus
			}
			every_country = {
				limit = {
					OR = {
						tag = HAB
						tag = FRA
						tag = SPA
						tag = CAS
					}
					is_year = 1415
					religion = catholic
				}
				set_country_flag = right_of_exclusion
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1420
				}
				set_country_flag = taborites
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1431
					NOT = { is_year = 1438 }
				}
				set_country_flag = church_council #Council of Basel
				2359 = { #Basel
					set_province_flag = church_council
					save_global_event_target_as = council_site
					add_province_modifier = {
						name = church_council
						duration = 365
					}
				}
			}
			if = {
				limit = { is_year = 1431 }
				PAP = { set_country_flag = papal_conciliarism }
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1438
					NOT = { is_year = 1439 }
				}
				set_country_flag = church_council #Council of Ferrara
				1378 = { #Ferrara
					set_province_flag = church_council
					save_global_event_target_as = council_site
					add_province_modifier = {
						name = church_council
						duration = 365
					}
				}
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1439
					NOT = { is_year = 1445 }
				}
				set_country_flag = church_council #Council of Florence
				116 = { #Florence
					set_province_flag = church_council
					save_global_event_target_as = council_site
					add_province_modifier = {
						name = church_council
						duration = 365
					}
				}
				BYZ = {
					set_country_flag = union_of_florence
					set_country_flag = crusade_promised
				}
			}
			every_country = {
				limit = {
					exists = AVI
					NOT = { is_year = 1409 }
					religion = catholic
					OR = {
						culture_group = langue_d_oil
						culture_group = langue_d_oc
						tag = SCO
						tag = CAS
						tag = SPA
						tag = ARA
						tag = NAV
						tag = AVI
						tag = CYP
						tag = FRA
						tag = BUR
						tag = SAV
						tag = NAP
						tag = SWI
						tag = LUX
						tag = KLE
						tag = FRI
						tag = HOL
						tag = BRB
						tag = HAI
						tag = BOH
						tag = SAX
						tag = HAB
					}
				}
				set_country_flag = support_antipope
				PAP = {
					capital_scope = {
						add_core = AVI
					}
					set_global_flag = catholic_schism
				}
				AVI = {
					add_opinion = { who = PAP modifier = rival_popes }
					reverse_add_opinion = { who = PAP modifier = rival_popes }
				}
			}
			every_country = {
				limit = {
					exists = AVI
					is_year = 1409 #Election of Alexander V
					religion = catholic
					OR = {
						tag = CAS
						tag = SPA
						tag = ARA
						tag = NAV
					}
				}
				set_country_flag = support_antipope
				PAP = {
					capital_scope = {
						add_core = AVI
					}
				}
				AVI = {
					add_opinion = { who = PAP modifier = rival_popes }
					reverse_add_opinion = { who = PAP modifier = rival_popes }
				}
			}
			every_country = {
				limit = {
					exists = AVI
					religion = catholic
					NOT = { has_country_flag = support_antipope }
				}
				set_country_flag = support_roman_pope
				AVI = {
					capital_scope = {
						add_core = PAP
					}
				}
				PAP = {
					add_opinion = { who = AVI modifier = rival_popes }
					reverse_add_opinion = { who = AVI modifier = rival_popes }
					set_global_flag = catholic_schism
				}
			}
			if = {
				limit = { is_year = 1390 }
				PAP = { set_country_flag = constantine_donation_cf_questioned }
			}
			if = {
				limit = { is_year = 1440 }
				PAP = { set_country_flag = constantine_donation_cf_exposed }
			}
			random_country = {
				limit = {
					tag = FRA
					NOT = { is_year = 1409 }
					exists = AVI
				}
				add_historical_friend = AVI
			}
			random_country = {
				limit = {
					tag = FRA
					is_year = 1415 #Council of Constance
				}
				set_country_flag = concordat_approved
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1417 #Council of Constance
				}
				set_country_flag = secular_veto
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1423
					NOT = { is_year = 1424 }
				}
				set_country_flag = church_council #Council of Siena (disputed)
				117 = { #Siena
					set_province_flag = church_council
					save_global_event_target_as = council_site
					add_province_modifier = {
						name = church_council
						duration = 90
					}
				}
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1431
					NOT = { is_year = 1438 }
				}
				set_country_flag = church_council #Council of Basel
				set_country_flag = regular_councils_supposedly_promised
				clr_country_flag = regular_councils_promised
				change_variable = { which = conciliarism value = -1 }
				2359 = { #Basel
					set_province_flag = church_council
					save_global_event_target_as = council_site
					add_province_modifier = {
						name = church_council
						duration = 365
					}
				}
			}
			random_country = {
				limit = {
					tag = FRA
					is_year = 1438
				}
				set_country_flag = catholic_pragmatic_sanction
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1438
					NOT = { is_year = 1439 }
				}
				set_country_flag = church_council #Council of Ferrara
				1378 = { #Ferrara
					set_province_flag = church_council
					save_global_event_target_as = council_site
					add_province_modifier = {
						name = church_council
						duration = 90
					}
				}
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1439
					NOT = { is_year = 1445 }
				}
				set_country_flag = church_council #Council of Florence
				116 = { #Florence
					set_province_flag = church_council
					save_global_event_target_as = council_site
					add_province_modifier = {
						name = church_council
						duration = 365
					}
				}
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1441 #Superiority of pope over councils affirmed
				}
				clr_country_flag = regular_councils_supposedly_promised
				set_country_flag = papal_superiority
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1506
				}
				change_variable = { which = st_peters_basilica value = 1 }
			}
			every_country = {
				limit = {
					OR = {
						tag = CAS
						tag = SPA
						tag = POR
						tag = ARA
					}
					is_year = 1508
				}
				set_country_flag = patronato_real
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1512
					NOT = { is_year = 1517 }
				}
				set_country_flag = church_council #Fifth Lateran Council
				set_country_flag = papal_absolutism
				1380 = { #Pisa
					set_province_flag = church_council
					save_global_event_target_as = council_site
					add_province_modifier = {
						name = church_council
						duration = 90
					}
				}
			}
			random_country = {
				limit = {
					tag = FRA
					is_year = 1516
				}
				set_country_flag = concordat_of_bologna
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1517
				}
				clr_country_flag = papal_superiority
				set_country_flag = papal_infallibility
				set_country_flag = indulgences
				change_variable = { which = conciliarism value = -1 }
			}
			if = {
				limit = { is_year = 1517 }
				every_country = {
					limit = {
						OR = {
							#Protestant
							tag = AUG
							tag = GBR
							tag = DAN
							tag = DEN
							tag = ENG
							tag = BOH
							tag = FRL
							tag = SKA
							tag = SHL
							tag = WUR
							tag = PRU
							tag = HAM
							tag = NOR
							tag = SWA
							tag = PAL
							tag = BRA
							tag = LVO
							tag = LIV
							tag = BRU
							tag = SWE
							tag = FRF
							tag = LUN
							tag = HES
							tag = KAL
							tag = OLD
							tag = HKA
							tag = MKL
							tag = HAN
							tag = FIN
							tag = HDA
							tag = NUR
							tag = TEU
							tag = OST
							tag = ALS
							tag = BSL
							tag = SAX
							tag = KUR
							tag = EST
							tag = POM
							tag = KUL
							tag = WES
							tag = HSA
							tag = ULM
							tag = ICE
							tag = BRE
							tag = ANS
							tag = ANH
							tag = LOR
							#Reformed
							tag = AUV
							tag = AMG
							tag = DAL
							tag = ANJ
							tag = PRO
							tag = NAV
							tag = GUY
							tag = SCO
							tag = SWI
							tag = NED
							tag = BOU
							tag = GBN
						}
					}
					set_country_flag = humanism
				}
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1540 #September 27
				}
				set_country_flag = jesuits_founded
			}
			every_country = {
				limit = {
					religion = catholic
					is_year = 1542
					NOT = { is_year = 1773 }
					NOT = { is_colonial_nation = yes }
				}
				change_variable = { which = jesuit_support value = 1 }
				if = {
					limit = {
						OR = {
							num_of_colonies = 1
							colony = 1
							#						trade_company_size = 1
						}
					}
					set_country_flag = jesuit_missions_encouraged
					POR = {
						set_country_flag = jesuit_missions_supported
						change_variable = { which = jesuit_support value = 1 }
					}
				}
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1546 #Actually December 1545
					NOT = { is_year = 1549 }
				}
				set_country_flag = church_council #Council of Trent (first period)
				110 = { #Trent
					set_province_flag = church_council
					save_global_event_target_as = council_site
					add_province_modifier = {
						name = church_council
						duration = 365
					}
				}
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1546
				}
				set_country_flag = tradition_counts #1546.4.8
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1547
				}
				change_variable = { which = st_peters_basilica value = 1 }
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1549
				}
				set_country_flag = clerical_residence #1549.9.17
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1551
					NOT = { is_year = 1552 }
				}
				set_country_flag = church_council #Council of Trent (second period)
				110 = { #Trent
					set_province_flag = church_council
					save_global_event_target_as = council_site
					add_province_modifier = {
						name = church_council
						duration = 365
					}
				}
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1555
				}
				set_country_flag = new_vulgate_bible
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1559
				}
				set_country_flag = forbidden_index
				set_country_flag = forbidden_index_banned
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1562
				}
				set_country_flag = conclave_reform #Pius IV 'In Eligendis'
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1562
					NOT = { is_year = 1564 }
				}
				set_country_flag = church_council #Council of Trent (third period)
				110 = { #Trent
					set_province_flag = church_council
					save_global_event_target_as = council_site
					add_province_modifier = {
						name = church_council
						duration = 365
					}
				}
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1562
				}
				set_country_flag = elite_priests #1562.6.16
				set_country_flag = latin_only #1562.9.9
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1563
				}
				set_country_flag = counter_reformation #1563.12.4
				set_country_flag = seminaries #1563.12.4
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1567
				}
				set_country_flag = indulgences_banned
			}
			random_country = {
				limit = {
					tag = PLC
					is_year = 1573
				}
				add_country_modifier = { name = edict_of_tolerance duration = -1 }
				set_country_flag = edict_of_tolerance
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1585
				}
				set_country_flag = papal_constitution
				set_country_flag = ad_limina_bishops
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1588
				}
				set_country_flag = roman_inquisition
				set_variable = { which = inquisition value = 2 }
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1590
				}
				change_variable = { which = st_peters_basilica value = 1 }
			}
			random_country = {
				limit = {
					tag = FRA
					is_year = 1598 #Edict of Nantes
					NOT = { is_year = 1685 } #Revokation of the edict
				}
				add_country_modifier = { name = edict_of_tolerance duration = -1 }
				set_country_flag = edict_of_tolerance
			}
			if = {
				limit = {
					is_year = 1506
					NOT = { is_year = 1626 }
				}
				2530 = {
					add_province_modifier = { name = great_temple_progress duration = -1 }
					set_variable = { which = great_temple value = 10 }
					if = {
						limit = { is_year = 1520 }
						change_variable = { which = great_temple value = 10 }
					}
					if = {
						limit = { is_year = 1534 }
						change_variable = { which = great_temple value = 10 }
					}
					if = {
						limit = { is_year = 1548 }
						change_variable = { which = great_temple value = 10 }
					}
					if = {
						limit = { is_year = 1562 }
						change_variable = { which = great_temple value = 10 }
					}
					if = {
						limit = { is_year = 1576 }
						change_variable = { which = great_temple value = 10 }
					}
					if = {
						limit = { is_year = 1590 }
						change_variable = { which = great_temple value = 10 }
					}
					if = {
						limit = { is_year = 1604 }
						change_variable = { which = great_temple value = 10 }
					}
					if = {
						limit = { is_year = 1618 }
						change_variable = { which = great_temple value = 10 }
					}
				}
			}
			random_country = {
				limit = {
					tag = PAP
					is_year = 1691
				}
				set_country_flag = nepotism_banned
			}
			if = {
				limit = {
					is_year = 1309
					NOT = { is_year = 1378 }
					PAP = { owns = 202 } #Avignon
				}
				202 = { set_province_flag = constantine_donation_pf }
				FRA = {
					set_country_flag = constantine_donation_cf
					create_guarantee = PAP
				}
				PAP = {
					set_country_flag = babylonian_captivity
					set_country_flag = avignon_cardinals
				}
			}
			if = {
				limit = { is_year = 1331 } #John XII sets papal finances
				PAP = { set_country_flag = papal_financial_demands }
			}
			if = {
				limit = { is_year = 1316 }
				PAP = { change_variable = { which = babylonian_captivity_resentment value = 1 } }
			}
			if = {
				limit = { is_year = 1334 }
				PAP = { change_variable = { which = babylonian_captivity_resentment value = 1 } }
			}
			if = {
				limit = { is_year = 1342 }
				PAP = { change_variable = { which = babylonian_captivity_resentment value = 1 } }
			}
			if = {
				limit = { is_year = 1353 }
				PAP = { change_variable = { which = babylonian_captivity_resentment value = 1 } }
			}
			if = {
				limit = { is_year = 1362 }
				PAP = { change_variable = { which = babylonian_captivity_resentment value = 1 } }
			}
			if = {
				limit = { is_year = 1370 }
				PAP = { change_variable = { which = babylonian_captivity_resentment value = 1 } }
			}
			##Miaphysite history
			ETH = {
				1206 = { set_province_flag = unity_center } #Shewa (Debre Lilanos)
				1569 = { set_province_flag = unctionist_center } #Gojjam
			}
			if = {
				limit = { is_year = 1388 } #End of the Abuna's life (so happened previously)
				ETH = { set_country_flag = miaphysite_synodos }
			}
			if = {
				limit = { is_year = 1411 } #End of reign - not exact date
				ETH = { set_country_flag = miaphysite_monasteries_incorporated }
			}
			if = {
				limit = { is_year = 1434 NOT = { is_year = 1468 } }
				ETH = { set_country_flag = uprooted_paganism_at_court }
			}
			if = {
				limit = { is_year = 1449 } #Synod of Debre Mitmaq
				ETH = { set_country_flag = miaphysite_controversy_sabbath_resolved }
			}
			if = {
				limit = { is_year = 1450 }
				ETH = {
					set_country_flag = stephanite_foundation
					set_country_flag = stephanite_persecution
					#Unrelated
					set_country_flag = miaphysite_law_of_kings
				}
			}
			if = {
				limit = { is_year = 1468 } #End of reign - not exact date
				ETH = { add_country_modifier = { name = miaphysite_strict_christian_rules duration = -1 } }
			}
			if = {
				limit = { is_year = 1478 } #End of reign - not exact date
				ETH = { add_country_modifier = { name = miaphysite_royal_church duration = -1 } }
			}
			if = {
				limit = { is_year = 1520 } #Portuguese make contact
				ETH = { set_country_flag = met_other_christians }
			}
			if = {
				limit = { is_year = 1550 } #16th century
				set_global_flag = miaphysite_cult_of_zakristos
				#Makes Gondar the set_province_flag = cult_of_zakristos flag
			}
			if = {
				limit = { is_year = 1533 } #One possible date
				ETH = { add_country_modifier = { name = ethiopian_glory_of_the_kings duration = -1 } }
			}
			if = {
				limit = { is_year = 1763 } #Synod of Kayla Meda
				ETH = { set_country_flag = sonsofgrace_foundation }
			}
			###End of history setup
			###Late start Renaissance and Reformation
			if = {
				limit = { is_year = 1400 }
				set_global_flag = renaissance
				116 = { set_province_flag = renaissance_ideas }
				add_reform_desire = -1 #Reset
			}
			if = {
				limit = { is_year = 1410 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1415 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1420 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1425 }
				add_reform_desire = 0.05
				every_province = { #23 provinces in vanilla
					limit = {
						continent = europe
						religion = catholic
						OR = {
							any_neighbor_province = { has_province_flag = renaissance_ideas }
							any_neighbor_province = { religion_group = muslim }
							any_neighbor_province = { religion_group = jewish_group }
							any_neighbor_province = { religion_group = dharmic }
							any_neighbor_province = { religion_group = taoic }
							any_neighbor_province = { religion_group = muslim }
							any_neighbor_province = { religion_group = new_world_pagan }
							area = lower_guadalquivir_area
							area = upper_guadalquivir_area
						}
					}
					set_province_flag = renaissance_ideas
					set_province_flag = renaissance_1425
				}
			}
			if = {
				limit = { is_year = 1430 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1435 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1440 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1445 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1450 } #67 provinces (18 countries) in vanilla
				add_reform_desire = 0.05
				every_province = {
					limit = {
						continent = europe
						religion = catholic
						any_neighbor_province = { has_province_flag = renaissance_ideas }
						NOT = { has_province_flag = renaissance_ideas }
					}
					set_province_flag = renaissance_ideas
					set_province_flag = renaissance_1450
				}
			}
			if = {
				limit = { is_year = 1455 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1460 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1465 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1470 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1475 }
				add_reform_desire = 0.05
				every_province = {
					limit = {
						continent = europe
						religion = catholic
						any_neighbor_province = { has_province_flag = renaissance_ideas }
						NOT = { has_province_flag = renaissance_ideas }
					}
					set_province_flag = renaissance_ideas
					set_province_flag = renaissance_1475
				}
			}
			if = {
				limit = { is_year = 1480 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1485 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1490 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1495 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1500 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1505 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1510 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1515 }
				add_reform_desire = 0.05
			}
			if = {
				limit = { is_year = 1525 }
				every_province = {
					limit = {
						continent = europe
						religion = catholic
						any_neighbor_province = { has_province_flag = renaissance_ideas }
						NOT = { has_province_flag = renaissance_ideas }
					}
					set_province_flag = renaissance_ideas
					set_province_flag = renaissance_1525
				}
			}
			#Reformation choices
			if = {
				limit = { is_religion_enabled = protestant }
				every_country = {
					limit = {
						religion = catholic
						NOT = { has_country_flag = renaissance }
						protestant_cultures_trigger = yes
					}
					hidden_effect = {
						change_variable = { which = support_for_reform value = 1 }
						set_country_flag = useful_protestant
						change_variable = { which = minority_usefulness value = 5 }
					}
					clr_country_flag = renaissance
					set_country_flag = humanism
				}
			}
			#Freedom for players to choose their nation's destiny
			every_country = {
				limit = { ai = no }
				clr_country_flag = renaissance_ideas
				every_province = { clr_province_flag = renaissance_ideas }
			}
			PAP = { set_variable = { which = catholic_provinces value = 0 } }
			every_province = {
				limit = { religion = catholic }
				PAP = { change_variable = { which = catholic_provinces value = 1 } }
			}
			every_country = {
				limit = {
					religion = catholic
					capital_scope = {
						has_province_flag = renaissance_ideas
					}
				}
				set_country_flag = renaissance
				if = {
					limit = { is_religion_enabled = protestant }
					set_country_flag = protestant_reaction
				}
			}
			###Finish advanced Renaissance setup
			###Set decisions by countries (creates a sense of history in progress)
			every_country = {
				limit = {
					religion = sunni
					ai = yes
					OR = {
						culture_group = altaic
						culture_group = tartar_group
						culture_group = rajput
						culture_group = eastern_aryan
						culture_group = dravidian
						culture_group = hindusthani
						culture_group = central_indian
						culture_group = deccan_group
					}
					NOT = { has_country_flag = hanafi_school_favored }
					NOT = { has_country_flag = hanbali_school_favored }
					NOT = { has_country_flag = maliki_school_favored }
					NOT = { has_country_flag = shafii_school_favored }
				}
				set_country_flag = hanafi_school_favored
			}
			every_country = {
				limit = {
					religion = sunni
					ai = yes
					OR = {
						culture_group = berber_group
						culture_group = mande_group
						culture_group = senegambian
						culture_group = saharan_group
						culture_group = songhai_group
						culture_group = maghreb
						culture_group = chadic_group
						culture_group = kwa_group
						culture_group = southern_african
						culture_group = bantu_group
					}
					NOT = { has_country_flag = hanafi_school_favored }
					NOT = { has_country_flag = hanbali_school_favored }
					NOT = { has_country_flag = maliki_school_favored }
					NOT = { has_country_flag = shafii_school_favored }
				}
				set_country_flag = maliki_school_favored
			}
			every_country = {
				limit = {
					religion = sunni
					ai = yes
					OR = {
						culture_group = persian_group
						culture_group = malay
						culture_group = swahili_group
						culture_group = somali_group
					}
					NOT = { has_country_flag = hanafi_school_favored }
					NOT = { has_country_flag = hanbali_school_favored }
					NOT = { has_country_flag = maliki_school_favored }
					NOT = { has_country_flag = shafii_school_favored }
				}
				set_country_flag = shafii_school_favored
			}
			every_country = {
				limit = {
					religion = shiite
					ai = yes
					primary_culture = turkish
					NOT = { has_country_flag = usuli_school_favored }
					NOT = { has_country_flag = akhbari_school_favored }
				}
				set_country_flag = usuli_school_favored
			}
			every_country = {
				limit = {
					religion = shiite
					ai = yes
					culture_group = turko_byzantine
					NOT = { primary_culture = turkish }
					NOT = { has_country_flag = usuli_school_favored }
					NOT = { has_country_flag = akhbari_school_favored }
				}
				set_country_flag = akhbari_school_favored
			}
			every_country = {
				limit = {
					religion_group = muslim
					ai = yes
					num_of_religion = { religion = hinduism value = 0.50 }
				}
				add_ruler_modifier = { name = flexible_dhimmi duration = -1 }
				set_country_flag = flexible_dhimmi_policy
			}
			every_country = {
				limit = {
					religion = vajrayana
					OR = {
						culture_group = burman #tibet, bhutan
						culture_group = eastern_aryan #nepal
					}
					OR = {
						NOT = { tag = TIB }
						NOT = { is_year = 1368 }
					}
					NOT = { has_ruler_modifier = red_hat_buddhism }
					NOT = { has_ruler_modifier = yellow_hat_buddhism }
					NOT = { has_ruler_modifier = black_hat_buddhism }
				}
				add_ruler_modifier = { name = red_hat_buddhism duration = -1 } #Sakya Buddhists
				set_country_flag = red_hat_buddhism
			}
			random_country = {
				limit = {
					tag = TIB
					religion = vajrayana
					is_year = 1368
					NOT = { is_year = 1578 }
					NOT = { has_ruler_modifier = red_hat_buddhism }
					NOT = { has_ruler_modifier = yellow_hat_buddhism }
					NOT = { has_ruler_modifier = black_hat_buddhism }
				}
				add_ruler_modifier = { name = black_hat_buddhism duration = -1 } #Karma Kagyu Buddhists
				set_country_flag = black_hat_buddhism
			}
			if = {
				limit = { is_year = 1475 }
				set_global_flag = yellow_hats_founded
			}
			random_country = {
				limit = {
					tag = TIB
					religion = vajrayana
					is_year = 1578
					NOT = { has_ruler_modifier = red_hat_buddhism }
					NOT = { has_ruler_modifier = yellow_hat_buddhism }
					NOT = { has_ruler_modifier = black_hat_buddhism }
				}
				add_ruler_modifier = { name = yellow_hat_buddhism duration = -1 } #Gelugpa Buddhists
				set_country_flag = yellow_hat_buddhism
			}
			every_country = {
				limit = {
					religion = vajrayana
					OR = {
						culture_group = altaic #manchu, mongols
						culture_group = tungusic
						culture_group = tartar_group
					}
					is_year = 1577
					NOT = { has_ruler_modifier = red_hat_buddhism }
					NOT = { has_ruler_modifier = yellow_hat_buddhism }
					NOT = { has_ruler_modifier = black_hat_buddhism }
				}
				add_ruler_modifier = { name = yellow_hat_buddhism duration = -1 }
				set_country_flag = yellow_hat_buddhism
			}
			every_country = {
				limit = {
					religion = mahayana
					primary_culture = korean
					NOT = { has_country_modifier = confucianism_dominates }
					NOT = { has_ruler_modifier = pure_land_buddhism }
					NOT = { has_ruler_modifier = meditation_buddhism }
					NOT = { has_ruler_modifier = nichiren_buddhism }
					NOT = { has_ruler_modifier = lotus_sutra_buddhism }
					OR = { has_regency = no has_consort_regency = yes }
				}
				add_ruler_modifier = { name = meditation_buddhism duration = -1 }
				set_country_flag = meditation_buddhism
			}
			every_country = {
				limit = {
					religion = mahayana
					culture_group = japanese
					NOT = { has_country_modifier = confucianism_dominates }
					NOT = { has_ruler_modifier = pure_land_buddhism }
					NOT = { has_ruler_modifier = meditation_buddhism }
					NOT = { has_ruler_modifier = nichiren_buddhism }
					NOT = { has_ruler_modifier = lotus_sutra_buddhism }
					OR = { has_regency = no has_consort_regency = yes }
				}
				random_list = {
					20 = {
						add_ruler_modifier = { name = pure_land_buddhism duration = -1 }
						set_country_flag = pure_land_buddhism
					}
					30 = {
						add_ruler_modifier = { name = meditation_buddhism duration = -1 }
						set_country_flag = meditation_buddhism
					}
					30 = {
						add_ruler_modifier = { name = nichiren_buddhism duration = -1 }
						set_country_flag = nichiren_buddhism
					}
					20 = {
						add_ruler_modifier = { name = lotus_sutra_buddhism duration = -1 }
						set_country_flag = lotus_sutra_buddhism
					}
				}
			}
			every_country = {
				limit = { religion = norse_pagan_reformed }
				if = {
					limit = { NOT = { ai = yes } }
					country_event = { id = dg_asatru.001 days = 30 }
				}
				if = {
					limit = { ai = yes }
					add_ruler_modifier = { name = god_of_thunder_thor duration = -1 }
					set_country_flag = thor_worship
				}
			}
			every_country = {
				limit = { religion = confucianism }
				country_event = { id = dg_confucian.001 days = 30 }
			}
			every_country = {
				limit = { religion = hellenic_pagan }
				country_event = { id = dg_hellenic.004 days = 30 }
			}
			every_country = {
				limit = { religion = hussite }
				country_event = { id = dg_hussite.054 days = 30 }
			}
			every_country = {
				limit = { religion = inti }
				country_event = { id = dg_inti.001 days = 30 }
			}
			if = {
				limit = { religion = slavic_pagan_reformed }
				country_event = { id = dg_rodnoverie.001 days = 30 }
			}
			if = {
				limit = { religion = baltic_pagan_reformed }
				country_event = { id = dg_romuva.001 days = 30 }
			}
			if = {
				limit = { religion = finnish_pagan_reformed }
				country_event = { id = dg_ukonusko.001 days = 30 }
			}
			if = {
				limit = { religion = vajrayana ai = no }
				country_event = { id = dg_vajrayana.002 days = 30 }
			}
			if = {
				limit = {
					religion = zoroastrian
					NOT = { has_global_flag = zoroastrian_reform }
				}
				country_event = { id = dg_zoroastrian.001 days = 30 }
			}
			if = {
				limit = {
					religion = zoroastrian
					has_global_flag = zoroastrian_reform
				}
				country_event = { id = dg_zoroastrian.023 days = 30 }
			}
			every_country = {
				limit = {
					religion = hinduism
					culture_group = eastern_aryan
					NOT = { has_ruler_modifier = vaishnavism }
					NOT = { has_ruler_modifier = shaivism }
					NOT = { has_ruler_modifier = shaktism }
					NOT = { has_ruler_modifier = smartism }
					OR = { has_regency = no has_consort_regency = yes }
				}
				if = {
					limit = { NOT = { ai = yes } }
					country_event = { id = dg_hindu.001 days = 30 }
				}
				if = {
					limit = { ai = yes }
					add_ruler_modifier = { name = shaktism duration = -1 }
					set_country_flag = shaktism
				}
			}
			every_country = {
				limit = {
					religion = hinduism
					NOT = { culture_group = eastern_aryan }
					NOT = { has_ruler_modifier = vaishnavism }
					NOT = { has_ruler_modifier = shaivism }
					NOT = { has_ruler_modifier = shaktism }
					NOT = { has_ruler_modifier = smartism }
					OR = { has_regency = no has_consort_regency = yes }
				}
				if = {
					limit = { NOT = { ai = yes } }
					country_event = { id = dg_hindu.001 days = 30 }
				}
				if = {
					limit = { ai = yes }
					add_ruler_modifier = { name = vaishnavism duration = -1 }
					set_country_flag = vaishnavism
				}
			}
			every_country = {
				limit = {
					religion = baltic_pagan_reformed
					NOT = { has_ruler_modifier = god_of_thunder_perkunas }
					NOT = { has_ruler_modifier = god_of_grain_patrimpas }
					NOT = { has_ruler_modifier = god_of_all_dievas }
					OR = { has_regency = no has_consort_regency = yes }
				}
				add_ruler_modifier = { name = god_of_thunder_perkunas }
			}
			every_country = {
				limit = {
					religion_group = muslim
					capital_scope = { religion_group = muslim }
				}
				set_country_flag = islamic_trusts
				capital_scope = { set_province_flag = islamic_trust }
			}
			every_country = {
				limit = {
					religion = sunni
					OR = {
						culture_group = altaic
						primary_culture = turkish
						culture_group = tartar_group
					}
					NOT = { any_neighbor_country = { NOT = { religion_group = muslim } } }
				}
				set_country_flag = ghazi_supported
			}
			every_country = {
				limit = {
					religion = catholic
					is_religion_enabled = protestant
					NOT = { piety = 0.60 }
				}
				change_variable = { which = monastic_decline value = 1 }
			}
			every_country = {
				limit = {
					religion = catholic
					is_religion_enabled = reformed
					NOT = { piety = 0.60 }
				}
				change_variable = { which = monastic_decline value = 1 }
			}
			every_country = {
				limit = { any_owned_province = { religion_group = christian } }
				every_owned_province = {
					limit = {
						is_year = 1540
						OR = { religion = protestant religion = reformed }
					}
					set_province_flag = populist_reformation
				}
				every_owned_province = {
					limit = {
						is_year = 1560
						religion = protestant
					}
					set_province_flag = magisterial_reformation
				}
				every_owned_province = {
					limit = {
						owner = { religion = orthodox }
						religion = orthodox
						OR = {
							is_capital = yes
							base_tax = 6
							has_province_flag = metropolitan
							has_province_flag = patriarchate
						}
					}
					set_province_flag = cenobitic_order
				}
				random_owned_province = {
					limit = {
						owner = { religion = orthodox }
						is_capital = yes
						religion = orthodox
					}
					set_province_flag = cenobitic_order
				}
			}
			every_country = {
				limit = {
					religion = catholic
					NOT = { has_country_flag = catholic_pragmatic_sanction }
					NOT = { government = theocracy }
					OR = {
						AND = {
							is_year = 1380
							border_distance = { who = PAP distance = 200 }
						}
						AND = {
							is_year = 1390
							border_distance = { who = PAP distance = 190 }
						}
						AND = {
							is_year = 1400
							border_distance = { who = PAP distance = 180 }
						}
						AND = {
							is_year = 1410
							border_distance = { who = PAP distance = 170 }
						}
						AND = {
							is_year = 1420
							border_distance = { who = PAP distance = 160 }
						}
						AND = {
							is_year = 1430
							border_distance = { who = PAP distance = 150 }
						}
						AND = {
							is_year = 1440
							border_distance = { who = PAP distance = 140 }
						}
						AND = {
							is_year = 1450
							border_distance = { who = PAP distance = 130 }
						}
						AND = {
							is_year = 1460
							border_distance = { who = PAP distance = 120 }
						}
						AND = {
							is_year = 1470
							border_distance = { who = PAP distance = 110 }
						}
						AND = {
							is_year = 1480
							border_distance = { who = PAP distance = 100 }
						}
						AND = {
							is_year = 1490
							border_distance = { who = PAP distance = 90 }
						}
						AND = {
							is_year = 1500
							border_distance = { who = PAP distance = 80 }
						}
						AND = {
							is_year = 1510
							border_distance = { who = PAP distance = 70 }
						}
					}
				}
				random_owned_province = {
					limit = {
						religion = catholic
						NOT = { has_province_modifier = catholic_archbishopric }
						NOT = { has_province_modifier = catholic_patriarchate }
						NOT = { has_province_modifier = absentee_bishop }
						NOT = { has_province_modifier = greedy_bishop }
						NOT = { base_tax = 5 }
						NOT = { PAP = { has_country_flag = clerical_residence } }
						NOT = { PAP = { has_country_flag = seminaries } }
					}
					set_province_flag = absentee_bishop
					add_province_modifier = { name = absentee_bishop duration = 2000 }
				}
				random_owned_province = {
					limit = {
						religion = catholic
						NOT = { has_province_modifier = catholic_archbishopric }
						NOT = { has_province_modifier = catholic_patriarchate }
						NOT = { has_province_modifier = absentee_bishop }
						NOT = { has_province_modifier = greedy_bishop }
						base_tax = 5
						NOT = { PAP = { has_country_flag = simony_abolished } }
						NOT = { PAP = { has_country_flag = annate_abolished } }
					}
					set_province_flag = simony_province
					add_province_modifier = { name = greedy_bishop duration = 500 }
				}
				if = {
					limit = { num_of_cities = 10 }
					random_owned_province = {
						limit = {
							religion = catholic
							NOT = { has_province_modifier = catholic_archbishopric }
							NOT = { has_province_modifier = catholic_patriarchate }
							NOT = { base_tax = 5 }
							NOT = { has_province_modifier = absentee_bishop }
							NOT = { has_province_modifier = greedy_bishop }
							NOT = { PAP = { has_country_flag = clerical_residence } }
							NOT = { PAP = { has_country_flag = seminaries } }
						}
						set_province_flag = absentee_bishop
						add_province_modifier = { name = absentee_bishop duration = 2000 }
					}
					random_owned_province = {
						limit = {
							religion = catholic
							NOT = { has_province_modifier = catholic_archbishopric }
							NOT = { has_province_modifier = catholic_patriarchate }
							NOT = { has_province_modifier = absentee_bishop }
							NOT = { has_province_modifier = greedy_bishop }
							base_tax = 5
							NOT = { PAP = { has_country_flag = simony_abolished } }
							NOT = { PAP = { has_country_flag = annate_abolished } }
						}
						set_province_flag = simony_province
						add_province_modifier = { name = greedy_bishop duration = 500 }
					}
				}
				if = {
					limit = { num_of_cities = 20 }
					random_owned_province = {
						limit = {
							religion = catholic
							NOT = { has_province_modifier = catholic_archbishopric }
							NOT = { has_province_modifier = catholic_patriarchate }
							NOT = { base_tax = 5 }
							NOT = { has_province_modifier = absentee_bishop }
							NOT = { has_province_modifier = greedy_bishop }
							NOT = { PAP = { has_country_flag = clerical_residence } }
							NOT = { PAP = { has_country_flag = seminaries } }
						}
						set_province_flag = absentee_bishop
						add_province_modifier = { name = absentee_bishop duration = 2000 }
					}
					random_owned_province = {
						limit = {
							religion = catholic
							NOT = { has_province_modifier = catholic_archbishopric }
							NOT = { has_province_modifier = catholic_patriarchate }
							NOT = { has_province_modifier = absentee_bishop }
							NOT = { has_province_modifier = greedy_bishop }
							base_tax = 5
							NOT = { PAP = { has_country_flag = simony_abolished } }
							NOT = { PAP = { has_country_flag = annate_abolished } }
						}
						set_province_flag = simony_province
						add_province_modifier = { name = greedy_bishop duration = 500 }
					}
				}
				if = {
					limit = { any_owned_province = { has_province_modifier = absentee_bishop } }
					set_country_flag = absenteeism
					change_variable = { which = catholic_corruption value = 1 }
					every_neighbor_country = {
						limit = { culture_group = PREV }
						set_country_flag = absenteeism
					}
				}
				if = {
					limit = { any_owned_province = { has_province_modifier = greedy_bishop } }
					set_country_flag = simony
					change_variable = { which = catholic_corruption value = 1 }
					every_neighbor_country = {
						limit = { culture_group = PREV }
						set_country_flag = simony
					}
				}
			}
			every_country = { #Religious Toleration policies
				limit = {
					OR = {
						religion = confucianism
						religion_group = pagan
						religion_group = european_pagan
						religion_group = new_world_pagan
					}
				}
				if = {
					limit = {
						num_of_owned_provinces_with = {
							OR = {
								check_variable = { which = buddhism value = 4 }
								check_variable = { which = mahayana value = 4 }
								check_variable = { which = shinto value = 4 }
								check_variable = { which = vajrayana value = 4 }
								AND = {
									check_variable = { which = confucianism value = 4 }
									NOT = { owner = { religion = confucianism } }
								}
							}
							value = 3
						}
					}
					set_country_flag = buddhists_permitted
					set_country_flag = buddhist_presence
					change_variable = { which = buddhists_ignored value = 2 }
				}
				if = {
					limit = {
						num_of_owned_provinces_with = {
							religion_group = taoic
							is_core = owner
							has_owner_religion = no
							value = 3
						}
					}
					set_country_flag = buddhist_population
					set_country_flag = buddhists_tolerated
					change_variable = { which = buddhists_ignored value = 2 }
				}
				if = {
					limit = {
						NOT = { religion_group = muslim }
						num_of_owned_provinces_with = {
							OR = {
								check_variable = { which = sunni value = 4 }
								check_variable = { which = shiite value = 4 }
								check_variable = { which = druze value = 4 }
								check_variable = { which = wahhabi value = 4 }
								check_variable = { which = ibadi value = 4 }
							}
							value = 3
						}
					}
					set_country_flag = muslims_permitted
					set_country_flag = muslim_presence
					change_variable = { which = muslims_ignored value = 2 }
				}
				if = {
					limit = {
						NOT = { religion_group = muslim }
						num_of_owned_provinces_with = {
							religion_group = muslim
							is_core = owner
							has_owner_religion = no
							value = 3
						}
					}
					set_country_flag = muslims_tolerated
					set_country_flag = muslim_population
					change_variable = { which = muslims_ignored value = 2 }
				}
				if = {
					limit = {
						num_of_owned_provinces_with = {
							OR = {
								AND = {
									check_variable = { which = shamanism value = 4 }
									NOT = { owner = { religion = shamanism } }
								}
								AND = {
									check_variable = { which = animism value = 4 }
									NOT = { owner = { religion = animism } }
								}
								AND = {
									check_variable = { which = west_african_pagan_reformed value = 4 }
									NOT = { owner = { religion = west_african_pagan_reformed } }
								}
								AND = {
									check_variable = { which = polynesian_religion value = 4 }
									NOT = { owner = { religion = polynesian_religion } }
								}
							}
							value = 3
						}
					}
					set_country_flag = pagans_permitted
					set_country_flag = pagan_presence
					change_variable = { which = pagans_ignored value = 2 }
				}
				if = {
					limit = {
						num_of_owned_provinces_with = {
							religion_group = pagan
							is_core = owner
							has_owner_religion = no
							value = 3
						}
					}
					set_country_flag = pagans_tolerated
					set_country_flag = pagan_population
					change_variable = { which = pagans_ignored value = 2 }
				}
				if = {
					limit = {
						num_of_owned_provinces_with = {
							OR = {
								AND = {
									check_variable = { which = hellenic_pagan value = 4 }
									NOT = { owner = { religion = hellenic_pagan } }
								}
								AND = {
									check_variable = { which = norse_pagan_reformed value = 4 }
									NOT = { owner = { religion = norse_pagan_reformed } }
								}
								AND = {
									check_variable = { which = slavic_pagan_reformed value = 4 }
									NOT = { owner = { religion = slavic_pagan_reformed } }
								}
								AND = {
									check_variable = { which = finnish_pagan_reformed value = 4 }
									NOT = { owner = { religion = finnish_pagan_reformed } }
								}
								AND = {
									check_variable = { which = baltic_pagan_reformed value = 4 }
									NOT = { owner = { religion = baltic_pagan_reformed } }
								}
							}
							value = 3
						}
					}
					set_country_flag = european_pagans_permitted
					set_country_flag = european_pagan_presence
					change_variable = { which = european_pagans_ignored value = 2 }
				}
				if = {
					limit = {
						num_of_owned_provinces_with = {
							religion_group = european_pagan
							is_core = owner
							has_owner_religion = no
							value = 3
						}
					}
					set_country_flag = european_pagans_tolerated
					set_country_flag = european_pagan_population
					change_variable = { which = european_pagans_ignored value = 2 }
				}
				if = {
					limit = {
						num_of_owned_provinces_with = {
							OR = {
								AND = {
									check_variable = { which = inti value = 4 }
									NOT = { owner = { religion = inti } }
								}
								AND = {
									check_variable = { which = nahuatl value = 4 }
									NOT = { owner = { religion = nahuatl } }
								}
								AND = {
									check_variable = { which = mesoamerican_religion value = 4 }
									NOT = { owner = { religion = mesoamerican_religion } }
								}
								AND = {
									check_variable = { which = totemism value = 4 }
									NOT = { owner = { religion = totemism } }
								}
								AND = {
									check_variable = { which = pantheism value = 4 }
									NOT = { owner = { religion = pantheism } }
								}
							}
							value = 3
						}
					}
					set_country_flag = new_world_pagans_permitted
					set_country_flag = new_world_pagan_presence
					change_variable = { which = new_world_pagans_ignored value = 2 }
				}
				if = {
					limit = {
						num_of_owned_provinces_with = {
							is_core = owner
							has_owner_religion = no
							religion_group = new_world_pagan
							value = 3
						}
					}
					set_country_flag = new_world_pagans_tolerated
					set_country_flag = new_world_pagan_population
					change_variable = { which = new_world_pagans_ignored value = 2 }
				}
				if = {
					limit = {
						num_of_owned_provinces_with = {
							OR = {
								AND = {
									check_variable = { which = catholic value = 4 }
									NOT = { owner = { has_country_flag = chinese_rites_controversy } }
								}
								check_variable = { which = orthodox value = 4 }
								check_variable = { which = gnostic value = 4 }
								check_variable = { which = chaldean value = 4 }
								check_variable = { which = hussite value = 4 }
								check_variable = { which = coptic value = 4 }
								check_variable = { which = protestant value = 4 }
								check_variable = { which = reformed value = 4 }
							}
							value = 3
						}
					}
					set_country_flag = christians_permitted
					set_country_flag = christian_presence
					change_variable = { which = christians_ignored value = 2 }
				}
				if = {
					limit = {
						OR = {
							check_variable = { which = catholic_population value = 10 }
							check_variable = { which = orthodox_population value = 10 }
							check_variable = { which = gnostic_population value = 10 }
							check_variable = { which = protestant_population value = 10 }
							check_variable = { which = reformed_population value = 10 }
							check_variable = { which = hussite_population value = 10 }
							check_variable = { which = coptic_population value = 10 }
							check_variable = { which = chaldean_population value = 10 }
							num_of_owned_provinces_with = {
								religion_group = christian
								is_core = owner
								has_owner_religion = no
								OR = {
									NOT = { religion = catholic }
									NOT = { owner = { has_country_flag = chinese_rites_controversy } }
								}
								value = 3
							}
						}
					}
					set_country_flag = christians_tolerated
					set_country_flag = christian_population
					change_variable = { which = christians_ignored value = 2 }
				}
				if = {
					limit = {
						num_of_owned_provinces_with = {
							check_variable = { which = jewish value = 4 }
							value = 3
						}
					}
					set_country_flag = jews_permitted
					set_country_flag = jewish_presence
					change_variable = { which = jews_ignored value = 2 }
				}
				if = {
					limit = {
						num_of_owned_provinces_with = {
							religion_group = jewish_group
							is_core = owner
							has_owner_religion = no
							value = 3
						}
					}
					set_country_flag = jews_tolerated
					set_country_flag = jewish_population
					change_variable = { which = jews_ignored value = 2 }
				}
				if = {
					limit = {
						num_of_owned_provinces_with = {
							OR = {
								check_variable = { which = hinduism value = 4 }
								check_variable = { which = sikhism value = 4 }
								check_variable = { which = jain value = 4 }
								check_variable = { which = zoroastrian value = 4 }
								check_variable = { which = adi_dharam value = 4 }
							}
							value = 3
						}
					}
					set_country_flag = dharmics_permitted
					set_country_flag = dharmic_presence
					change_variable = { which = dharmics_ignored value = 2 }
				}
				if = {
					limit = {
						num_of_owned_provinces_with = {
							religion_group = dharmic
							is_core = owner
							has_owner_religion = no
							value = 3
						}
					}
					set_country_flag = dharmic_population
					set_country_flag = dharmics_tolerated
					change_variable = { which = dharmics_ignored value = 2 }
				}
			}
			if = {
				limit = { is_year = 1531 }
				set_global_flag = leagues_divided_empire
				if = {
					limit = { is_year = 1546 }
					set_global_flag = first_league_war
				}
				if = {
					limit = { NOT = { is_year = 1548 } }
					enable_hre_leagues = yes
				}
				if = {
					limit = { is_year = 1608 }
					#					set_global_flag = evangelical_league
					if = {
						limit = { is_year = 1618 }
						#						set_global_flag = evangelical_league_war
					}
					if = {
						limit = { NOT = { is_year = 1648 } }
						enable_hre_leagues = yes
					}
				}
				if = {
					limit = { hre_leagues_enabled = yes }
					every_country = {
						limit = { is_part_of_hre = yes religion = protestant }
						join_league = protestant
					}
				}
			}
			set_global_flag = dei_gratia_history
			###End historical decisions
		}
	}
}


